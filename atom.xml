<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>System Inside</title>
  <icon>https://www.gravatar.com/avatar/ba4a4c9ed2a98e1ba0d030ca3449d4a5</icon>
  <subtitle>Data Center: System, Platform &amp; Application Delivery</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://sysin.org/"/>
  <updated>2020-08-23T05:45:09.690Z</updated>
  <id>http://sysin.org/</id>
  
  <author>
    <name>sysin</name>
    <email>e-mail_address</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>如何修改 VMware Fusion 中的虚机网络 IP 地址段</title>
    <link href="http://sysin.org/article/change-vmware-fusion-networking/"/>
    <id>http://sysin.org/article/change-vmware-fusion-networking/</id>
    <published>2020-08-23T02:10:00.000Z</published>
    <updated>2020-08-23T05:45:09.690Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><p>近日，由于公有云上虚机资源紧张，开始在本机 VMware Fusion 中测试产品，发现网络默认使用了“172.16”开头的地址段，图形界面无法直接修改。</p><h2 id="一-了解-vmware-fusion-中的网络类型-1022264">一、<a href="https://kb.vmware.com/articleview?docid=1022264&amp;lang=zh_CN" target="_blank" rel="noopener">了解 VMware Fusion 中的网络类型 (1022264)</a></h2><p>可用于虚拟机的网络类型有三种。每种网络类型都由其自身用途、行为和功能。</p><p>注意：使用错误的网络类型或配置设置可能会导致出现不良行为。</p><h3 id="桥接模式网络连接">桥接模式网络连接</h3><p>如果您的 Mac 位于以太网、无线网或 FireWire 网络中，则使用桥接网络连接通常是使您的虚拟机可以访问该网络的最简单方法。使用桥接网络连接，虚拟机将显示为与 Mac 相同的物理以太网网络中的其他计算机。</p><p>使用桥接网络连接的虚拟机可能会使用在该虚拟机桥接到的网络上提供的任何服务，其中包括文件服务器、打印机和网关。同样，配置有桥接网络连接的任意物理主机或其他虚拟机可以使用虚拟机上的资源，就好像该虚拟机是同一个网络中的物理计算机。</p><p>桥接网络适配器称为 vmnet0。在 Fusion 3.x 及更高版本中，该适配器使用 vmnet-bridge 和 vmnet-netifup 服务。</p><h3 id="仅主机型网络-vmnet1">仅主机型网络 -- vmnet1</h3><p>当使用此类型的网络连接时，虚拟机将连接到虚拟专用网络中的 Mac，这在 Mac 以外通常不可见。在同一个 Mac 中配置有仅主机网络的多个虚拟机将位于同一个网络中，并且互相可见。</p><p>仅主机网络适配器称为 vmnet1。在 Fusion 3.x 及更高版本中，该适配器使用 vmnet-dhcpd 服务。</p><h3 id="网络地址转换-nat-网络-vmnet8">网络地址转换 (NAT) 网络 -- vmnet8</h3><p>如果要使用 Mac 拨号网络连接的方法将虚拟机连接到 Internet 或其他 TCP/IP 网络，或者无法向虚拟机提供 Mac 的网络中的 IP 地址，则此类型通常是使您的虚拟机可以访问网络的最简单方法。此类型还允许虚拟机访问 Mac 已连接到的 VPN。</p><p>虚拟机在外部网络中没有自己的 IP 地址。相反，会在 Mac 中设置单独的专用网络。虚拟机从 VMware 虚拟 DHCP 服务器中获取该网络上的地址。除非虚拟机启动连接，否则无法直接通过除 Mac 以外的任意计算机或网站连接该虚拟机。</p><p>NAT 网络适配器称为 vmnet8。在 Fusion 3.x 及更高版本中，该适配器使用 vmnet-natd、vmnet-dhcpd 和 vmnet-netifup 服务。</p><h2 id="二-自定义网络-ip-地址段">二、自定义网络 IP 地址段</h2><p>VMware Fusion 有三个网络配置文件：networking、dhcpd.conf 和 nat.conf。</p><p>全局：</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Library/Preferences/VMware\ Fusion/networking</span><br></pre></td></tr></table></figure></p><p>vmnet1：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/Library/Preferences/VMware\ Fusion/vmnet1/dhcpd.conf</span><br><span class="line">/Library/Preferences/VMware\ Fusion/vmnet1/nat.conf</span><br></pre></td></tr></table></figure></p><p>vmnet8：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/Library/Preferences/VMware\ Fusion/vmnet8/dhcpd.conf</span><br><span class="line">/Library/Preferences/VMware\ Fusion/vmnet8/nat.conf</span><br></pre></td></tr></table></figure></p><p>修改 IP 地址段步骤如下，在 VMware Fusion 11.5 版本中测试通过。</p><h3 id="1-停止-vmnet-网络服务">1. 停止 vmnet 网络服务</h3><p>执行命令：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/VMware\ Fusion.app/Contents/Library/vmnet-cli --stop</span><br></pre></td></tr></table></figure></p><p>备注：这步是可选的，直接下一步也可以</p><h3 id="2-只需要修改-networking-配置文件">2. 只需要修改 networking 配置文件</h3><p>执行命令：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /Library/Preferences/VMware\ Fusion/networking</span><br></pre></td></tr></table></figure></p><p>示例：将 vmnet1 中的 IP 段修改为 192.168.1.0，将 vmnet8 中的 IP 段修改为 10.10.1.0</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">VERSION=1,0</span><br><span class="line">answer VNET_1_DHCP yes</span><br><span class="line">answer VNET_1_DHCP_CFG_HASH 305D3393C78096F94C8C979DF2321B14BEE94AB1</span><br><span class="line">answer VNET_1_HOSTONLY_NETMASK 255.255.255.0</span><br><span class="line">answer VNET_1_HOSTONLY_SUBNET 172.16.178.0  # 修改为 192.168.1.0</span><br><span class="line">answer VNET_1_VIRTUAL_ADAPTER yes</span><br><span class="line">answer VNET_8_DHCP yes</span><br><span class="line">answer VNET_8_DHCP_CFG_HASH DE662EAB01380DE3338128A859C717A8F863F3CF</span><br><span class="line">answer VNET_8_HOSTONLY_NETMASK 255.255.255.0</span><br><span class="line">answer VNET_8_HOSTONLY_SUBNET 172.16.24.0  # 修改为 10.10.1.0</span><br><span class="line">answer VNET_8_NAT yes</span><br><span class="line">answer VNET_8_VIRTUAL_ADAPTER yes</span><br></pre></td></tr></table></figure></p><h3 id="3-配置网络">3. 配置网络</h3><p>执行命令：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/VMware\ Fusion.app/Contents/Library/vmnet-cli --configure</span><br></pre></td></tr></table></figure></p><p>vmnet-cli 将根据上述修改的地址段自动修改 dhcpd.conf 和 nat.conf 中的 IP 地址。</p><p>查看 dhcpd.conf 和 nat.conf 配置文件：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat /Library/Preferences/VMware\ Fusion/vmnet1/dhcpd.conf</span><br><span class="line">cat /Library/Preferences/VMware\ Fusion/vmnet1/nat.conf</span><br><span class="line"></span><br><span class="line">cat /Library/Preferences/VMware\ Fusion/vmnet8/dhcpd.conf</span><br><span class="line">cat /Library/Preferences/VMware\ Fusion/vmnet8/nat.conf</span><br></pre></td></tr></table></figure></p><p>可以看到配置已经修改成功。</p><h3 id="4-启动网络服务">4. 启动网络服务</h3><p>执行命令：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/VMware\ Fusion.app/Contents/Library/vmnet-cli --start</span><br></pre></td></tr></table></figure></p><h3 id="5-验证">5. 验证</h3><p>执行命令：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig</span><br></pre></td></tr></table></figure></p><p>可以看到 vmnet1 和 vmnet8 的 IP 地址已经更改成功。</p><h3 id="6-虚拟机重新获取配置">6. 虚拟机重新获取配置</h3><p>虚机如果是手动配置的 IP，直接修改即可。</p><p>虚机如果是 DHCP，可以直接重启 vmware fusion 和 虚机系统，也可以直接在虚机重新获取地址，比如 Linux 命令行中执行 <code>sudo dhclient -v -r eth0</code> ，<strong>eth0</strong> 为对应网卡。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;近日，由于公有云上虚机资源紧张，开始在本机 VMwar
      
    
    </summary>
    
    
    
      <category term="VMware" scheme="http://sysin.org/tags/VMware/"/>
    
      <category term="Apple" scheme="http://sysin.org/tags/Apple/"/>
    
      <category term="macOS" scheme="http://sysin.org/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>使用 Public Key 认证</title>
    <link href="http://sysin.org/article/public-key-authentication/"/>
    <id>http://sysin.org/article/public-key-authentication/</id>
    <published>2020-08-21T01:10:00.000Z</published>
    <updated>2020-08-21T01:33:15.104Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https%EF%BC%9A//www.sysin.org">www.sysin.org</a></p><p>原文发布链接：<a href="https://www.sysin.org/article/public-key-authentication/" target="_blank" rel="noopener">https://www.sysin.org/article/public-key-authentication/</a></p><p>摘要：本文介绍了 Public Key 认证的一般原理，及其在 Linux、CISCO IOS、CISCO NX-OS、F5 BIG-IP、Palo Alto PAN-OS、Fortinet FortiOS 和 Juniper JUNOS 中的配置方法及建议。</p><hr><h2 id="一-public-key-认证基本原理">一、Public Key 认证基本原理</h2><p>Public Key（非对称，asymmetric）认证使用一对相关联的 Key Pair（一个公钥 Public Key，一个私钥 Private Key）来代替传统的密码（或我们常说的口令，Password）。顾名思义，Public Key 是用来公开的，可以将其放到 SSH 服务器自己的帐号中，而 Private Key 只能由自己保管，用来证明自己身份。</p><p>使用 Public Key 加密过的数据只有用与之相对应的 Private Key 才能解密。这样在认证的过程中，Public Key 拥有者便可以通过Public Key 加密一些东西发送给对应的 Private Key 拥有者，如果在通信的双方都拥有对方的 Public Key（自己的 Private Key 只由自己保管），那么就可以通过这对 Key Pair 来安全地交换信息，从而实现相互认证。在使用中，我们把自己的 Public Key 放在通过安全渠道放到服务器上，Private Key 自己保管（用一个口令把 Private Key 加密后存放），而服务器的 Public Ke y一般会在第一次登录服务器的时候存放到本地客户端（严格地说来服务器的 Public Key 也应该通过安全渠道放到本地客户端，以防止别人用他自己的 Public Key 来欺骗登录）。</p><h2 id="二-public-key-认证相对于-password-认证的优点">二、Public Key 认证相对于 Password 认证的优点</h2><p>常用的 SSH 认证方式有：</p><pre><code>a. 基于主机 IP（rhost）的认证：对于某个主机（IP）信任并让之登录，这种认证容易受到 IP 欺骗攻击。b. Kerberos 认证：一个大型的基于域的认证，这种认证安全性高，但是太大、太复杂不方便部署。c. PAM 认证：类似于传统的密码认证，是绝大多数 Unix/Linux 系统自带的一个认证和记帐的模块，它的功能比较复杂，配置起来比较麻烦。而且，容易由于配置失误而引起安全问题。d. 传统的 Unix/Linux 口令（或密码 Password）认证：在客户端直接输入帐号密码，然后让 SSH 加密传输到服务器端验证。</code></pre><p>在众多 SSH 登录认证中，传统的单口令（Password）认证用得比较多，所以在这里我们主要对比一下 SSH 认证中的口令（Password）认证和 Public Key 认证的区别。这种认证方式有着如下明显的缺点：</p><pre><code>1）为了确保密码安全，密码必须很长很复杂，但是这样的密码很难记忆；2）对于自己所拥有的每个帐号，为了安全，不同的帐号都要设置不同的密码，管理起来很不方便；3）对于默认帐号，默认密码，例如装机时用的帐号，如果一时疏忽没有改密码，被其它不怀好意的人扫描到帐号和密码，可能会造成安全漏洞；4）如果远程主机已经被攻击，即使使用 SSH 安全通道进行保护，在网络上发送的密码在到达远程主机时也可能被截获；5）对于每个帐号的修改都要人工登录（为了安全，不能把 Password 放到脚本里），随着服务器数量增多，这项工作会变得十分烦琐。</code></pre><p>相反，使用 Public Key 认证正好可以解决上述问题，即其优势所在。</p><h2 id="三-linux-public-key-配置">三、Linux Public Key 配置</h2><p>使用一种被称为&quot;公私钥&quot;认证的方式来进行 ssh 登录. &quot;公私钥&quot;认证方式简单的解释：首先在客户端上创建一对公私钥 （公钥文件：~/.ssh/id_rsa.pub； 私钥文件：~/.ssh/id_rsa）</p><p>然后把公钥放到服务器上（~/.ssh/authorized_keys）, 自己保留好私钥。在使用 ssh 登录时，ssh 程序会发送私钥去和服务器上的公钥做匹配。如果匹配成功就可以登录了。</p><p>步骤如下：先要在本地生成一个 rsa 的公共 key，然后 copy 到远程你要认证的服务器创建 key</p><p>（1）本地</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SYSIN-SRV#</span><span class="bash"> ssh-keygen -t rsa  <span class="comment">#可选参数 -b 2048，CentOS7 中默认</span></span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa)：</span><br><span class="line">Created directory '/root/.ssh'.</span><br><span class="line">Enter passphrase (empty for no passphrase)：</span><br><span class="line">Enter same passphrase again：</span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is：</span><br><span class="line">SHA256：MfZHl/b8XhGTU59fhLHptmzNFnhCrorySvGojyb69dM root@SYSIN-SRV  #root@SYSIN-SRV 这里是当前用户名@主机名，公钥文件中可以删除</span><br><span class="line">The key's randomart image is：</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|+= = . . ....    |</span><br><span class="line">|O.E +   o    .   |</span><br><span class="line">|*+     o    . .  |</span><br><span class="line">|+o. . . o. . .   |</span><br><span class="line">|+  o o .SBo .    |</span><br><span class="line">|  . + oo++=+     |</span><br><span class="line">|   o +. o.+.     |</span><br><span class="line">|  . o..  o  .    |</span><br><span class="line">|   . ...  ..     |</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure></p><p>直接三次回车即可，这里会提示输入密码 passphrase，这个密码与与远程 ssh 登入密码无关，Public-key 证机制比密码要安全，因为密码不在网络上传输。而且可以是用加密的方式存储的，为了安全，也可以设置一个 passphrase，这样，别人拿到密钥也没有用。</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># cd .ssh/</span></span><br><span class="line"><span class="meta"># ls</span></span><br><span class="line">id_rsa  id_rsa.pub  known_hosts</span><br><span class="line"><span class="meta"># cp id_ras.pub authorized_keys <span class="comment">//本机公钥配置，允许 ssh localhost 免密登录</span></span></span><br><span class="line"><span class="comment">//id_rsa 文件复制到其他机器上复用，权限需要设置为700</span></span><br><span class="line"><span class="meta"># chmod 700 id_rsa</span></span><br></pre></td></tr></table></figure></p><p>（2）将公钥文件复制到远程服务器上：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># ssh-copy-id root@目标节点IP</span></span><br></pre></td></tr></table></figure></p><p>这里 root 是在目标节点上登录的用户，@ 符号后面接目标节点 IP 即可，之后会提示输入目标节点 root 用户密码，输入即可。</p><p>添加认证信息后，目标节点主机的 ~/.ssh/ 目录下将会出现一个 authorized_keys 文件，里面包含了管理节点的公钥信息，可以检查一下是否存在。</p><p>保存好上述生成的公钥和私钥文件后，可以上传到其他主机（或者网络设备）上直接使用：</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 直接上传已有的 Public key</span></span></span><br><span class="line">mkdir .ssh</span><br><span class="line">cd .ssh</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 上传 id_rsa  id_rsa.pub 到当前目录</span></span></span><br><span class="line">cp id_rsa.pub authorized_keys</span><br><span class="line">chmod 700 id_rsa</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 测试访问是否正常</span></span></span><br><span class="line">ssh localhost</span><br></pre></td></tr></table></figure></p><p>（3）修改 sshd 配置文件：</p><p>启用 Public key 认证并关闭传统密码认证，重启 sshd 服务生效。</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/ssh/sshd_config</span><br><span class="line">PubkeyAuthentication yes</span><br><span class="line">PasswordAuthentication no</span><br></pre></td></tr></table></figure></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># CentOS 7 默认配置如下</span></span></span><br><span class="line">PasswordAuthentication yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 取消注释#PubkeyAuthentication yes</span></span></span><br><span class="line">sed -i 's/^#\(PubkeyAuthentication yes\)/\1/' /etc/ssh/sshd_config</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 修改为PasswordAuthentication no，即替换行</span></span></span><br><span class="line">sed -i '/^PasswordAuthentication yes/c PasswordAuthentication no' /etc/ssh/sshd_config</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 写入文件需要添加 -i 参数</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 重启sshd服务</span></span></span><br><span class="line">service sshd restart</span><br></pre></td></tr></table></figure></p><h2 id="四-ssh-客户端设置">四、SSH 客户端设置</h2><h3 id="1-使用-putty-客户端">1. 使用 Putty 客户端</h3><p>如果使用 Windows 中的 Putty</p><p>如果想使用 putty，因为 ssh-keygen 生成的 SSH2 和 putty 的 key 格式不同，无法直接使用，必须用 puttygen.exe 转换一下：</p><p>把 Linux 的 id_rsa copy 到 windows 中，运行 puttygen.exe，选择菜单 Conversions -&gt; Import key 然后 save private key，就可以使用这个 private key 设置 putty 了。</p><p>Windows 中设置 Putty 使用 key</p><p>1） 启动 Putty，设置好 session 的各项参数（如果以前已经设置过，那么 load 一下），然后从左边选择“SSH-&gt;Auth”，点击 Browse 按钮，选择 key.ppk 文件。2） 设置 auto-login 用户名，Connection -&gt; Data -&gt; Auto-login username3） 再从左边选择 Session，然后点击 Save 按钮把修改保存下来。然后点击 Open 按钮就可以登录了。</p><p>如果上面的操作都没有问题，那这时应该就自动登录了，无需输入密码。</p><p>putty 的密钥转换成 SecureCRT 的密钥</p><p>以前用的是 putty，生成了 PUB/PRIVATE KEY的，现在用 puttygen.exe load private key，然后用 Conversions 导出到 openssh 格式的 private key，名为 identy，接着把 pubkey 也导出来，叫 identy.pub，放到相同的目录下，最后在 securecrt 的 session 里指定 private key 就 OK 了，一定要弄成 xx xx.pub 的形式，否则会说找不到密码。</p><h3 id="2-使用-securecrt-配置公钥">2. 使用 SecureCRT 配置公钥</h3><p>在 Windows 客户机上，建立 C:/SSH 目录，然后将 id_dsa 和 id_dsa.pub 原封不动的复制到 C:/SSH 里，确保文件名为 id_dsa 和 id_dsa.pub（macOS类似）</p><pre><code>第一步，按向导正常连接一台主机 SSH，填写主机名和用户名第二步，编辑会话主机的属性，Connection--SSH2，右侧 Authentication 页面选中 PublicKey，点击 “Properties...”第三步，默认选中 Use global public key ，Use identity or certificate file 那里，点击“...”按钮，浏览我的电脑，找到 C:/SSH 目录，选中 id_dsa 文件，然后确定。</code></pre><p>保存好配置，关闭 SecureCRT，然后打开配置了证书的主机，正常情况下将提示要输入密钥的加密字，输入后就应该可以登录进系统了。同时再打开另一个 SecureCRT 窗口。登录同样的主机，由于 SecureCRT 已缓存了证书及加密字，因此不再需要输入用户名密码，使用就很方便了！</p><h2 id="五-cisco-ios">五、Cisco IOS</h2><h3 id="1-启用-public-key-认证">1. 启用 public key 认证</h3><h4 id="在-linux-上生成-key">在 Linux 上生成 key</h4><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SYSIN-SRV#</span><span class="bash"> ssh-keygen -t rsa  <span class="comment">#可选参数 -b 2048，CentOS7 中默认</span></span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa)：</span><br><span class="line">Created directory '/root/.ssh'.</span><br><span class="line">Enter passphrase (empty for no passphrase)：</span><br><span class="line">Enter same passphrase again：</span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is：</span><br><span class="line">SHA256：MfZHl/b8XhGTU59fhLHptmzNFnhCrorySvGojyb69dM root@SYSIN-SRV  #root@SYSIN-SRV 这里是当前用户名@主机名，公钥文件中可以删除</span><br><span class="line">The key's randomart image is：</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|+= = . . ....    |</span><br><span class="line">|O.E +   o    .   |</span><br><span class="line">|*+     o    . .  |</span><br><span class="line">|+o. . . o. . .   |</span><br><span class="line">|+  o o .SBo .    |</span><br><span class="line">|  . + oo++=+     |</span><br><span class="line">|   o +. o.+.     |</span><br><span class="line">|  . o..  o  .    |</span><br><span class="line">|   . ...  ..     |</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure></p><h4 id="在-linux-主机上查看-public-key">在 Linux 主机上查看 public key</h4><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat ~/.ssh/id_rsa.pub</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 默认是一行</span></span></span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDefQcDto4gCHqf0umUCAY1O7GHPwU+Se92aUHVkVI4Kd8sJVFoQKjvMga9dRm12zGDDO/wM9tSHWKc+msARsz2m6h1HbsiR7CoOTPtTuDc/BN3m7Q7SGXzf51AI3tvOQ4IhlDwRMFBLGTFVVDjpYMDZjwZNEwCBbeZMETNUedCvbyduEmOaZIm5LzCQ5upPG+uEMsP5Sh8XQX5vK8P5P04EmCAEqned5FmHMrPI3kGfabxRhiLa7Ujv3gMh4z59tKmVsoMyKXU3gf+561D9BdvuTo+gvtUElghBvz3wiPA45KW7LL2INBXiJ89p0iOmkiAEnxkDdsXpq+GEj2PaiE9</span><br></pre></td></tr></table></figure></p><h4 id="转换成多行格式">转换成多行格式</h4><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Cisco does not accept the entire key pasted into one long line, so you need to break it into multiple lines. The maximum line length at the Cisco CLI is 254 characters, but it's convenient to wrap smaller than this so that it fits on a terminal line.</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> fold -b -w 72 ~/.ssh/id_rsa.pub</span></span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDefQcDto4gCHqf0umUCAY1O7GHPwU+Se92</span><br><span class="line">aUHVkVI4Kd8sJVFoQKjvMga9dRm12zGDDO/wM9tSHWKc+msARsz2m6h1HbsiR7CoOTPtTuDc</span><br><span class="line">/BN3m7Q7SGXzf51AI3tvOQ4IhlDwRMFBLGTFVVDjpYMDZjwZNEwCBbeZMETNUedCvbyduEmO</span><br><span class="line">aZIm5LzCQ5upPG+uEMsP5Sh8XQX5vK8P5P04EmCAEqned5FmHMrPI3kGfabxRhiLa7Ujv3gM</span><br><span class="line">h4z59tKmVsoMyKXU3gf+561D9BdvuTo+gvtUElghBvz3wiPA45KW7LL2INBXiJ89p0iOmkiA</span><br><span class="line">EnxkDdsXpq+GEj2PaiE9</span><br></pre></td></tr></table></figure></p><h4 id="在-cisco-ios-上配置">在 Cisco IOS 上配置</h4><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">conf t</span><br><span class="line">username admin privilege <span class="number">15</span> <span class="comment">//创建一个没有密码的账号admin</span></span><br><span class="line">ip ssh pubkey-chain</span><br><span class="line">username admin</span><br><span class="line">key-<span class="built_in">string</span></span><br><span class="line">&lt;&lt; paste your multi-line <span class="keyword">public</span> key here &gt;&gt;</span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure></p><h4 id="验证">验证</h4><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show run | beg pubkey</span><br></pre></td></tr></table></figure></p><h3 id="2-其他配置">2. 其他配置</h3><h4 id="security-settings">Security settings</h4><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## 禁用SSH v1</span><br><span class="line">ip ssh version 2</span><br><span class="line">## 禁用telnet</span><br><span class="line">line vty 0 15</span><br><span class="line"> transport input ssh</span><br></pre></td></tr></table></figure></p><h4 id="multiple-keys">Multiple keys</h4><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">## It is possible to have multiple public keys against the same user in the configuration, so that multiple people can login using the same account. Just add further keys as shown above. When you show the configuration, it will look like this：</span><br><span class="line"></span><br><span class="line">ip ssh pubkey-chain</span><br><span class="line">  username nsrc</span><br><span class="line">   key-hash ssh-rsa EFF40492D1D6BF5D0B68491128456D27 yourname@yourdomain.example</span><br><span class="line">   key-hash ssh-rsa 768CD77578B0C1B55BCC0C3549D3E573 another@yourdomain.example</span><br></pre></td></tr></table></figure></p><h4 id="移除密码">移除密码</h4><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">## You can remove passwords from users in the configuration; this will force those users to use ssh key authentication. If these people require admin rights they will either still need to know the enable secret, or their login can drop them directly into enable mode：</span><br><span class="line">username foo privilege 15</span><br><span class="line">示例：</span><br><span class="line">no username admin</span><br><span class="line">username admin privilege 15</span><br></pre></td></tr></table></figure></p><h4 id="disable-passwords-entirely">Disable passwords entirely</h4><p><strong>全局设定，无法通过密码远程访问!!!</strong></p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">## If you wish to disable password authentication entirely over ssh, but leave passwords on user accounts for other purposes (e.g. console access), then use：</span><br><span class="line">## 禁用SSH的密码认证，但是保留用户密码用于console登录</span><br><span class="line">no ip ssh server authenticate user password</span><br><span class="line">no ip ssh server authenticate user keyboard</span><br></pre></td></tr></table></figure></p><p>安全建议：有公网 IP 访问建议启用，特别是设定的用户名比较敏感比如 root、admin 等，取消密码，直接使用 public key 认证</p><h2 id="六-cisco-nx-os">六、CISCO NX-OS</h2><h3 id="1-生成公钥文件id_rsapub参看linux">1. 生成公钥文件id_rsa.pub（参看Linux）</h3><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SYSIN-SRV#</span><span class="bash"> ssh-keygen -t rsa  <span class="comment">#可选参数 -b 2048，CentOS7 中默认</span></span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa)：</span><br><span class="line">Created directory '/root/.ssh'.</span><br><span class="line">Enter passphrase (empty for no passphrase)：</span><br><span class="line">Enter same passphrase again：</span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is：</span><br><span class="line">SHA256：MfZHl/b8XhGTU59fhLHptmzNFnhCrorySvGojyb69dM root@SYSIN-SRV  #root@SYSIN-SRV 这里是当前用户名@主机名，公钥文件中可以删除</span><br><span class="line">The key's randomart image is：</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|+= = . . ....    |</span><br><span class="line">|O.E +   o    .   |</span><br><span class="line">|*+     o    . .  |</span><br><span class="line">|+o. . . o. . .   |</span><br><span class="line">|+  o o .SBo .    |</span><br><span class="line">|  . + oo++=+     |</span><br><span class="line">|   o +. o.+.     |</span><br><span class="line">|  . o..  o  .    |</span><br><span class="line">|   . ...  ..     |</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure></p><h3 id="2-配置用户使用密钥">2. 配置用户使用密钥</h3><h4 id="21-传输-id_rsapub-文件到交换机的-bootflash-中并配置用户">2.1. 传输 id_rsa.pub 文件到交换机的 bootflash 中并配置用户</h4><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">N9K#copy sftp：  bootflash</span><br></pre></td></tr></table></figure></p><p>示例使用的用户名为 sysadmin</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">N9K##conf</span><br><span class="line">N9K(config)#username sysadmin role network-admin  //创建一个没有密码的用户</span><br><span class="line">N9K(config)#username sysadmin sshkey file bootflash：id_rsa.pub</span><br></pre></td></tr></table></figure></p><h4 id="22-直接复制密钥进行配置">2.2. 直接复制密钥进行配置</h4><p>第二种方式：直接复制 id_rsa.pub 中的 key 输入如下：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">N9K##conf</span><br><span class="line">N9K(config)#username sysadmin role network-admin  //创建一个没有密码的用户</span><br><span class="line">N9K(config)#username sysadmin sshkey ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDefQcDto4gCHqf0umUCAY1O7GHPwU+Se92aUHVkVI4Kd8sJVFoQKjvMga9dRm12zGDDO/wM9tSHWKc+msARsz2m6h1HbsiR7CoOTPtTuDc/BN3m7Q7SGXzf51AI3tvOQ4IhlDwRMFBLGTFVVDjpYMDZjwZNEwCBbeZMETNUedCvbyduEmOaZIm5LzCQ5upPG+uEMsP5Sh8XQX5vK8P5P04EmCAEqned5FmHMrPI3kGfabxRhiLa7Ujv3gMh4z59tKmVsoMyKXU3gf+561D9BdvuTo+gvtUElghBvz3wiPA45KW7LL2INBXiJ89p0iOmkiAEnxkDdsXpq+GEj2PaiE9</span><br></pre></td></tr></table></figure></p><h3 id="3-验证配置">3. 验证配置</h3><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">N9K# show user-account sysadmin</span><br><span class="line">user：sysadmin</span><br><span class="line">        this user account has no expiry date</span><br><span class="line">        roles：network-admin</span><br><span class="line">no password set. Local login not allowed  //没有设置密码只能远程登录</span><br><span class="line">Remote login through RADIUS/TACACS+ is possible</span><br><span class="line">        ssh public key： ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDefQcDto4gCHqf0umUCAY1O7GHPw</span><br><span class="line">        U+Se92aUHVkVI4Kd8sJVFoQKjvMga9dRm12zGDDO/wM9tSHWKc+msARsz2m6h1HbsiR7CoOTPtTuDc/BN3</span><br><span class="line">        m7Q7SGXzf51AI3tvOQ4IhlDwRMFBLGTFVVDjpYMDZjwZNEwCBbeZMETNUedCvbyduEmOaZIm5LzCQ5upPG+uEMsP5Sh8XQX5vK8P5P04EmCAEqned5FmHMrPI3kGfabxRhiLa7Ujv3gMh4z59tKmVsoMyKXU3gf+561D</span><br><span class="line">        9BdvuTo+gvtUElghBvz3wiPA45KW7LL2INBXiJ89p0iOmkiAEnxkDdsXpq+GEj2PaiE9</span><br></pre></td></tr></table></figure></p><h3 id="4-验证">4. 验证</h3><p>使用 Linux 主机 SSH 登录到交换机上并执行命令，没有任何密码提示：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SYSIN-SRV# ssh sysadmin@10.66.78.53 &quot;sh system uptime&quot;</span><br><span class="line">Warning： the output may not have all the roles</span><br><span class="line">System start time： Tue May 29 17：51：30 2012</span><br><span class="line">System uptime： 7 days, 19 hours, 42 minutes, 15 seconds</span><br><span class="line">Kernel uptime： 7 days, 19 hours, 45 minutes, 17 seconds</span><br></pre></td></tr></table></figure></p><h2 id="七-f5-big-ip">七、F5 BIG-IP</h2><h3 id="1-标准做法">1. 标准做法</h3><p>使用 publc key 认证，参看官方文档：<a href="https%EF%BC%9A//support.f5.com/csp/article/K13454">K13454</a></p><p>F5 基于 CentOS 构建，与 Linux 操作方式类似。</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 直接上传已有的Public key</span></span></span><br><span class="line">cd /root</span><br><span class="line">mkdir .ssh</span><br><span class="line">cd .ssh</span><br><span class="line">上传 id_rsa.pub 到 .ssh 目录下</span><br><span class="line">cp id_rsa.pub authorized_keys</span><br></pre></td></tr></table></figure></p><p>如果是要两台之间免密登录</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">上传 id_rsa 到 .ssh 目录下</span><br><span class="line">chmod 700 id_rsa</span><br><span class="line">## 测试访问是否正常</span><br><span class="line">ssh localhost</span><br></pre></td></tr></table></figure></p><p>默认 PubkeyAuthentication 是开启的，不需要像 Linux 那样修改 sshd 配置文件（/config/ssh/sshd_config）。</p><p>注意：</p><ol><li>禁用密码登录，似乎不支持</li><li>限制源地址访问sshd：全局限制，不能针对用户个别设置</li></ol><p>安全建议：</p><ol><li>建议设定 sshd 和 httpd 限制源地址访问</li><li>禁用默认 admin 和 root 账号</li><li>创建替代的管理员帐号</li></ol><h3 id="2-建议做法">2. 建议做法：</h3><p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir -m 755 -p /var/ssh/&lt;username&gt;</span><br><span class="line">mv /home/&lt;username&gt;/.ssh/authorized_keys /var/ssh/&lt;username&gt;</span><br><span class="line"><span class="built_in">cd</span> /home/&lt;username&gt;/.ssh &amp;&amp; ln -s /var/ssh/&lt;username&gt;/authorized_keys</span><br></pre></td></tr></table></figure></p><p>参看系统默认 root 账号配置</p><p>当前支持版本：v11.6.5，v12.1.5，v13.1.0，v14.1.0，v15.1.0，v16.0.0 及以上</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost：Active：Standalone] config # cd /root/.ssh</span><br><span class="line">[root@localhost：Active：Standalone] config # alias ll='ls -lahF --color'</span><br><span class="line">[root@localhost：Active：Standalone] .ssh # ll</span><br><span class="line">total 10K</span><br><span class="line">drwxr-xr-x. 2 root root 1.0K Jun 23 20：13 ./</span><br><span class="line">dr-x------. 3 root root 1.0K Jul 14 21：42 ../</span><br><span class="line">lrwxrwxrwx. 1 root root   29 Jun 23 20：13 authorized_keys -&gt; /var/ssh/root/authorized_keys</span><br><span class="line">lrwxrwxrwx. 1 root root   22 Jun 23 20：13 identity -&gt; /var/ssh/root/identity</span><br><span class="line">lrwxrwxrwx. 1 root root   26 Jun 23 20：13 identity.pub -&gt; /var/ssh/root/identity.pub</span><br><span class="line">lrwxrwxrwx. 1 root root   25 Jun 23 20：13 known_hosts -&gt; /var/ssh/root/known_hosts</span><br><span class="line">-rw-r--r--. 1 root root  262 Jun 23 16：27 README</span><br><span class="line">[root@localhost：Active：Standalone] .ssh # cat README</span><br><span class="line">WARNING!!</span><br><span class="line"></span><br><span class="line">Do not manually change the files in this directory!</span><br><span class="line">The ssh keys in this directory are generated at first boot and are unique</span><br><span class="line">to your machine.</span><br><span class="line">These keys are needed for communication with the SCCP.</span><br><span class="line"></span><br><span class="line">To generate new keys, please run `keyswap.sh sccp`.</span><br></pre></td></tr></table></figure></p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost：Active：Standalone] config # find / -name authorized_keys</span><br><span class="line">/shared/ssh/root/authorized_keys</span><br><span class="line">/root/.ssh/authorized_keys</span><br><span class="line">find： &apos;/proc/13236&apos;： No such file or directory</span><br><span class="line">find： &apos;/proc/13267&apos;： No such file or directory</span><br><span class="line">find： &apos;/opt/.sdm/proc/13324&apos;： No such file or directory</span><br><span class="line"></span><br><span class="line">[root@localhost：Active：Standalone] config # ll /shared/ssh/root/authorized_keys</span><br><span class="line">-rw-r--r--. 1 root root 406 Jul 14 20：06 /shared/ssh/root/authorized_keys</span><br><span class="line">[root@localhost：Active：Standalone] config # cat /shared/ssh/root/authorized_keys</span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCKV2v1jzTATRIbyat3g6WruNQSWDcdKNafhG66rNyAJ09guCukkjbRwARJGzZWKxdhSqqHvMW32fZYAX6ZCl/9eDoGjh08eKELJVxn6q7UI3xAM/ze+4GUrSStlEdagBsB/sNGvp0gr1b0eaALFpE2VsLxVr1wVpcPMKbPr7HHPfQsALakI3El5zayi6U7Ei1W7dU3hs8WoIlj89eMiuFCUXyZDtBaXht0C2nWk8C6SPJjpVfPNh++dttzW2GOfSLvwEKoCHmYGKe/aolYYvdRVGXSOpqDzZsNWBHHSyU92RqMCm1VLM1mg/ew4KFzYocdlpDssh2IaZTbua7Af+P7 Host Processor Superuser</span><br><span class="line"></span><br><span class="line">[root@localhost：Active：Standalone] config # ll /root/.ssh/authorized_keys</span><br><span class="line">lrwxrwxrwx. 1 root root 29 Jun 23 20：13 /root/.ssh/authorized_keys -&gt; /var/ssh/root/authorized_keys</span><br><span class="line">[root@localhost：Active：Standalone] config # cat /root/.ssh/authorized_keys</span><br><span class="line">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCKV2v1jzTATRIbyat3g6WruNQSWDcdKNafhG66rNyAJ09guCukkjbRwARJGzZWKxdhSqqHvMW32fZYAX6ZCl/9eDoGjh08eKELJVxn6q7UI3xAM/ze+4GUrSStlEdagBsB/sNGvp0gr1b0eaALFpE2VsLxVr1wVpcPMKbPr7HHPfQsALakI3El5zayi6U7Ei1W7dU3hs8WoIlj89eMiuFCUXyZDtBaXht0C2nWk8C6SPJjpVfPNh++dttzW2GOfSLvwEKoCHmYGKe/aolYYvdRVGXSOpqDzZsNWBHHSyU92RqMCm1VLM1mg/ew4KFzYocdlpDssh2IaZTbua7Af+P7 Host Processor Superuser</span><br></pre></td></tr></table></figure></p><h2 id="八-palo-alto-pan-os">八、Palo Alto PAN-OS</h2><h3 id="1-生成-ssh-key参照-linux">1. 生成 ssh key，参照 Linux</h3><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SYSIN-SRV#</span><span class="bash"> ssh-keygen -t rsa  <span class="comment">#可选参数 -b 2048，CentOS7 中默认</span></span></span><br><span class="line">Generating public/private rsa key pair.</span><br><span class="line">Enter file in which to save the key (/root/.ssh/id_rsa)：</span><br><span class="line">Created directory '/root/.ssh'.</span><br><span class="line">Enter passphrase (empty for no passphrase)：</span><br><span class="line">Enter same passphrase again：</span><br><span class="line">Your identification has been saved in /root/.ssh/id_rsa.</span><br><span class="line">Your public key has been saved in /root/.ssh/id_rsa.pub.</span><br><span class="line">The key fingerprint is：</span><br><span class="line">SHA256：MfZHl/b8XhGTU59fhLHptmzNFnhCrorySvGojyb69dM root@SYSIN-SRV  #root@SYSIN-SRV 这里是当前用户名@主机名，公钥文件中可以删除</span><br><span class="line">The key's randomart image is：</span><br><span class="line">+---[RSA 2048]----+</span><br><span class="line">|+= = . . ....    |</span><br><span class="line">|O.E +   o    .   |</span><br><span class="line">|*+     o    . .  |</span><br><span class="line">|+o. . . o. . .   |</span><br><span class="line">|+  o o .SBo .    |</span><br><span class="line">|  . + oo++=+     |</span><br><span class="line">|   o +. o.+.     |</span><br><span class="line">|  . o..  o  .    |</span><br><span class="line">|   . ...  ..     |</span><br><span class="line">+----[SHA256]-----+</span><br></pre></td></tr></table></figure></p><h3 id="2-配置-public-key-认证">2. 配置 Public Key 认证</h3><h4 id="21-使用-gui-界面">2.1 使用 GUI 界面</h4><p>参看<a href="https://www.paloaltonetworks.com/documentation/71/pan-os/pan-os/firewall-administration/configure-ssh-key-based-administrator-authentication-to-the-cli" target="_blank" rel="noopener">官方文档</a></p><p>创建或者编辑一个帐号</p><p>Device -- Administrators，点击 Add</p><p>勾选 Use Public Key Authentication (SSH)，点击 Import Key，浏览到 id_rsa.pub</p><p>可以看到导入后的 key 内容有所变化，被<a href="https://knowledgebase.paloaltonetworks.com/KCSArticleDetail?id=kA10g000000ClJLCA0" target="_blank" rel="noopener">自动转换为Base64编码格式</a>，在使用命令行输入时也需要 Base64 编码格式，否则会报错。</p><p>勾选 Use only client certificate authentication (Web)，则不需要为账号创建密码（编辑原有用户勾选此选项，原用户密码继续有效）。</p><p>此时该用户无法使用 SSH 密码登录，因为没有密码，Web 界面也将无法登录。</p><h4 id="22-使用-cli">2.2 使用 CLI</h4><p>创建一个同时使用密码和 key 认证的用户账号 sa1</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">set mgt-config users sa1 password</span><br><span class="line">Enter password   ：</span><br><span class="line">Confirm password ：</span><br><span class="line">set mgt-config users sa1 permissions role-based superuser yes</span><br><span class="line">set mgt-config users sa1 public-key c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFDbjRLMy9Ld1VNZkdJVm4xbDYxNTZOTDR2WHl0T3FORHJUZ2FWb05lcEZuL2tuaE9FOGR4YW1pWWNNK0xJMVU5aksvOVdjeTd0Q2tCeUR3YWs5RjBnS1NVUUlURWpJZTkzNytNQ1NxQU4xR1MxTlNsa2IvcmZjUEs1dGIyam9TejFyb3cyTXl6WDZLVGZDVkc0eVN6UWFTeDRnZmg0d0ZJb3poejdyVFB3YlQ0cjRtejVCaEdKRklBRzAyeUNMdVZNbkhVN0VPdVFmaDI5WTN1cjhOcWdJdnY2UXRTUHN0a0N5dzdrOXNaWmMyZitVVmtTK0FOZVN0dnpXR2JuZ0V0OFlaQjRlRTN1RzRwVWJxbEFXenJjbXVXVmZZRXR6Wkh6VVVtSFlPb1poRVdXbzQ4OER1VXF1NUEvZVJkK1RaZE42WUdMZkliT3dxcG9GVFJyNXc0VEggcm9vdEBTU0xYMTIxCg==</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 注意 public-key 使用Base64编码格式，可以通过Web界面转换</span></span></span><br></pre></td></tr></table></figure></p><p>创建一个仅仅使用 key 认证的用户账号 sa2（该用户无法登录 GUI）</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">set mgt-config users sa2 permissions role-based superuser yes</span><br><span class="line">set mgt-config users sa2 client-certificate-only yes</span><br><span class="line">set mgt-config users sa2 public-key c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFDbjRLMy9Ld1VNZkdJVm4xbDYxNTZOTDR2WHl0T3FORHJUZ2FWb05lcEZuL2tuaE9FOGR4YW1pWWNNK0xJMVU5aksvOVdjeTd0Q2tCeUR3YWs5RjBnS1NVUUlURWpJZTkzNytNQ1NxQU4xR1MxTlNsa2IvcmZjUEs1dGIyam9TejFyb3cyTXl6WDZLVGZDVkc0eVN6UWFTeDRnZmg0d0ZJb3poejdyVFB3YlQ0cjRtejVCaEdKRklBRzAyeUNMdVZNbkhVN0VPdVFmaDI5WTN1cjhOcWdJdnY2UXRTUHN0a0N5dzdrOXNaWmMyZitVVmtTK0FOZVN0dnpXR2JuZ0V0OFlaQjRlRTN1RzRwVWJxbEFXenJjbXVXVmZZRXR6Wkh6VVVtSFlPb1poRVdXbzQ4OER1VXF1NUEvZVJkK1RaZE42WUdMZkliT3dxcG9GVFJyNXc0VEggcm9vdEBTU0xYMTIxCg==</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 注意 public-key 使用Base64编码格式，可以通过Web界面转换</span></span></span><br></pre></td></tr></table></figure></p><h2 id="九-fortinet-fortios">九、Fortinet FortiOS</h2><blockquote><p>以下在 FortiOS 6.0 下测试通过</p></blockquote><ul><li>生成密钥</li></ul><p>一般使用 RSA 2048-bit key，参考 Linux 生成方式</p><ul><li>语法</li></ul><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  config system admin</span><br><span class="line">    edit admin</span><br><span class="line">      set ssh-public-key1 &quot;&lt;key-type&gt; &lt;key-value&gt;&quot;</span><br><span class="line">    next</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><ul><li>示例</li></ul><blockquote><p>注意格式：不要用开头和结尾的 ---- BEGIN SSH2 PUBLIC KEY ---- 或者注释&quot;[2048-bit dsa,...]&quot; 或者 ---- END SSH2 PUBLIC KEY ---- 等内容示例，同时删除已经设置的密码，新账号不用设置密码：</p></blockquote><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  config system admin</span><br><span class="line">    edit sadmin</span><br><span class="line">      set ssh-public-key1 &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDefQcDto4gCHqf0umUCAY1O7GHPwU+Se92aUHVkVI4Kd8sJVFoQKjvMga9dRm12zGDDO/wM9tSHWKc+msARsz2m6h1HbsiR7CoOTPtTuDc/BN3m7Q7SGXzf51AI3tvOQ4IhlDwRMFBLGTFVVDjpYMDZjwZNEwCBbeZMETNUedCvbyduEmOaZIm5LzCQ5upPG+uEMsP5Sh8XQX5vK8P5P04EmCAEqned5FmHMrPI3kGfabxRhiLa7Ujv3gMh4z59tKmVsoMyKXU3gf+561D9BdvuTo+gvtUElghBvz3wiPA45KW7LL2INBXiJ89p0iOmkiAEnxkDdsXpq+GEj2PaiE9&quot;</span><br><span class="line">      unset password &quot;要删除的账号的密码&quot;</span><br><span class="line">    next</span><br><span class="line">end</span><br></pre></td></tr></table></figure></p><blockquote><p>经过测试这里 <code>unset password</code> 后，密码为空，即无需密码就能登录，这或许与一般安全产品的理念不同（没有钥匙则无法开锁）。</p></blockquote><ul><li>注意点：需要同时设置密码！</li></ul><h2 id="十-juniper-junos">十、Juniper JUNOS</h2><h3 id="1-官方文档">1. 官方文档</h3><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Enable SSH service on the switch using the following command：</span></span></span><br><span class="line"><span class="meta">root@Juniper#</span><span class="bash"> <span class="built_in">set</span> system services ssh</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Generate the SSH key on a device running Junos OS  by logging into the shell prompt as a root user：</span></span></span><br><span class="line"><span class="meta">root@Juniper&gt;</span><span class="bash">start shell</span></span><br><span class="line"><span class="meta">root@Juniper%</span><span class="bash"> ssh-keygen -t rsa</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Once the keys are generated we can associate the key with the "userid" using the following command.</span></span></span><br><span class="line"><span class="meta">root@Juniper#</span><span class="bash"><span class="built_in">set</span> system login user &lt;userid&gt; uid 2000</span></span><br><span class="line"><span class="meta">root@Juniper#</span><span class="bash"><span class="built_in">set</span> system login user &lt;userid&gt; class super-user</span></span><br><span class="line"><span class="meta">root@Juniper#</span><span class="bash"><span class="built_in">set</span> system login user &lt;userid&gt; authentication load-key-file /root/.ssh/id_rsa.pub</span></span><br><span class="line"></span><br><span class="line">After running the above configuration commands, it will create a directory with &lt;userid&gt; in /var/home and the authorized_key for SSH will be created.</span><br><span class="line"></span><br><span class="line">When an upgrade/downgrade is performed, the files id_rsa and id_rsa.pub, which are locally created and are not part of configuration, will not be restored. Hence we will have to copy the contents of the /root/.ssh directory and put them back after the upgrade/downgrade is complete. We also will have to associate the user with the key using the following CLI command：</span><br><span class="line"></span><br><span class="line"><span class="meta">root@Juniper#</span><span class="bash"><span class="built_in">set</span> system login user &lt;userid&gt; authentication load-key-file /root/.ssh/id_rsa.pub</span></span><br></pre></td></tr></table></figure></p><h3 id="2-快速配置">2. 快速配置</h3><p>通常我们已经用 Linux 生成了自己的公钥和私钥，这里直接使用。</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 使用root账号登录，将公钥文件id_rsa.pub上传到/root/.ssh/下面（默认需要创建.ssh文件夹）</span></span></span><br><span class="line">start shell</span><br><span class="line">cd /root</span><br><span class="line">mkdir .ssh</span><br><span class="line">cd .ssh</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Cluster环境，将id_rsa.pub上传到另外一个节点node1</span></span></span><br><span class="line">rcp -T /root/.ssh/id_rsa.pub node1：/root/.ssh/</span><br><span class="line">rlogin -T node1</span><br><span class="line">ls /root/.ssh/id_rsa.pub</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 新建账号，若账号已经创建并使用密码认证，将同时使用pub认证</span></span></span><br><span class="line">set system login user &lt;username&gt; class super-user authentication load-key-file /root/.ssh/id_rsa.pub</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 示例 使用key认证并取消密码认证</span></span></span><br><span class="line">set system login user sysadmin class super-user authentication load-key-file /root/.ssh/id_rsa.pub</span><br><span class="line">delete system login user sysadmin authentication encrypted-password #删除已有账号密码认证</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 示例 同时使用密码和key认证</span></span></span><br><span class="line">set system login user sysadmin class super-user authentication plain-text-password</span><br><span class="line">set system login user sysadmin class super-user authentication load-key-file /root/.ssh/id_rsa.pub</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 删除用户命令为：delete system login user &lt;username&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 禁用root账号ssh登录</span></span></span><br><span class="line">set system services ssh root-login deny</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 恢复</span></span></span><br><span class="line">set system services ssh root-login allow</span><br></pre></td></tr></table></figure></p><h3 id="3-建议做法">3. 建议做法</h3><p>1). root 账号有密码，使用 root 账号上传 /root/.ssh/id_rsa.pub2). 新建一个 admin1 账号，注意不要使用敏感字符，使用 public key 认证，无密码3). 新建一个 admin2 账号，注意不要使用敏感字符，有复杂密码，或者同时使用 public key 认证，必要时候应急使用4). 禁用 root ssh login5). 必要时限制源地址访问，禁用密码认证</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https%EF%BC%9A//www.sysin.org&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文发布链接：&lt;a href=&quot;https://www.sysin.org/article/publ
      
    
    </summary>
    
    
    
      <category term="Linux" scheme="http://sysin.org/tags/Linux/"/>
    
      <category term="PAN-OS" scheme="http://sysin.org/tags/PAN-OS/"/>
    
      <category term="FortiOS" scheme="http://sysin.org/tags/FortiOS/"/>
    
      <category term="F5" scheme="http://sysin.org/tags/F5/"/>
    
      <category term="CISCO" scheme="http://sysin.org/tags/CISCO/"/>
    
      <category term="NX-OS" scheme="http://sysin.org/tags/NX-OS/"/>
    
  </entry>
  
  <entry>
    <title>Varnish with Hitch HTTP/2 implement on CentOS 8.0</title>
    <link href="http://sysin.org/article/Varnish-with-Hitch-HTTP2/"/>
    <id>http://sysin.org/article/Varnish-with-Hitch-HTTP2/</id>
    <published>2020-08-20T02:10:00.000Z</published>
    <updated>2020-08-21T02:28:47.404Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><hr><p>版本支持：</p><p>In Varnish Cache 5.0 there is experimental support for HTTP/2.</p><p>Varnish 6.0 now fully supports HTTP/2.</p><p>Varnish HTTP/2 前端通过 Hitch 代理实现。</p><p>访问逻辑：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+------------+    +------------+    +------------+    +------------+</span><br><span class="line">|            |    |            |    |            |    |            |</span><br><span class="line">|    浏览器   +----+    Hitch   +----+  Varnish   +----+    Nginx   |</span><br><span class="line">|            |    |            |    |            |    |            |</span><br><span class="line">+------------+    +------------+    +------------+    +------------+</span><br></pre></td></tr></table></figure></p><h2 id="hitch-简介">Hitch 简介</h2><p>Hitch 是 Varnish Software 开发的基于 libev 的高性能 SSL/TLS 开源代理软件。</p><p>它支持 TLS 1.0、1.1、1.2 和 1.3，对于大型部署环境，它支持多达 15000个 Socket 侦听和 50万张证书。作为 Stud 项目的继承者，Hitch 更快、更小、用途单一，允许同时在 Varnish 前端和后端使用 SSL/TLS。</p><p><strong>主要特性：</strong></p><ul><li>支持 TLS 1.0, TLS 1.1, 和 TLS 1.2 (hitch 1.5 版本开始支持 TLS 1.3)</li><li>SNI, 支持通配符证书和非通配符证书</li><li>支持 HAproxy 的 PROXY 协议</li><li>支持 NPN 或 ALPN 扩展实现 HTTP/2</li><li>支持大规模部署（多达 15000个 Socket 侦听和 50万张证书）</li><li>支持平滑重新加载证书和监听端点</li></ul><p>Varnish Software 同时为 Hitch 提供商业支持。</p><p>访问以下网站了解更多：</p><p><a href="http://hitch-tls.org/" target="_blank" rel="noopener">Hitch community site</a></p><p><a href="https://github.com/varnish/hitch/" target="_blank" rel="noopener">Hitch on Github</a></p><h2 id="安装-varnish-60-lts">安装 Varnish 6.0 LTS</h2><p>Bash Scripts</p><p>quick install repo</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://packagecloud.io/install/repositories/varnishcache/varnish60lts/script.rpm.sh | sudo bash</span><br></pre></td></tr></table></figure></p><p>Install</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install varnish -y</span><br><span class="line"><span class="meta">#</span> or</span><br><span class="line">dnf install varnish -y</span><br></pre></td></tr></table></figure></p><p>Version</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">varnishd -V</span><br><span class="line">varnishd (varnish-6.0.2 revision 0458b54db26cfbea79af45ca5c4767c7c2925a91)</span><br><span class="line">Copyright (c) 2006 Verdens Gang AS</span><br><span class="line">Copyright (c) 2006-2018 Varnish Software AS</span><br></pre></td></tr></table></figure></p><p>Default config</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/varnish/default.vcl</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> This is an example VCL file for Varnish.</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> It does not do anything by default, delegating control to the</span><br><span class="line"><span class="meta">#</span> builtin VCL. The builtin VCL is called when there is no explicit</span><br><span class="line"><span class="meta">#</span> return statement.</span><br><span class="line"><span class="meta">#</span></span><br><span class="line"><span class="meta">#</span> See the VCL chapters in the Users Guide at https://www.varnish-cache.org/docs/</span><br><span class="line"><span class="meta">#</span> and https://www.varnish-cache.org/trac/wiki/VCLExamples for more examples.</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Marker to tell the VCL compiler that this VCL has been adapted to the</span><br><span class="line"><span class="meta">#</span> new 4.0 format.</span><br><span class="line">vcl 4.0;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Default backend definition. Set this to point to your content server.</span><br><span class="line">backend default &#123;</span><br><span class="line">    .host = "127.0.0.1";</span><br><span class="line">    .port = "8080";</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sub vcl_recv &#123;</span><br><span class="line">    # Happens before we check if we have this in cache already.</span><br><span class="line">    #</span><br><span class="line">    # Typically you clean up the request here, removing cookies you don't need,</span><br><span class="line">    # rewriting the request, etc.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sub vcl_backend_response &#123;</span><br><span class="line">    # Happens after we have read the response headers from the backend.</span><br><span class="line">    #</span><br><span class="line">    # Here you clean the response headers, removing silly Set-Cookie headers</span><br><span class="line">    # and other mistakes your backend does.</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sub vcl_deliver &#123;</span><br><span class="line">    # Happens when we have all the pieces we need, and are about to send the</span><br><span class="line">    # response to the client.</span><br><span class="line">    #</span><br><span class="line">    # You can do accounting or modifying the final object here.</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="安装-hitch-15epel">安装 Hitch 1.5（EPEL）</h2><p><code>hitch</code> requires:</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">libev &gt;= 4</span><br><span class="line">openssl (recent, &gt;=1.0.0 recommended)</span><br></pre></td></tr></table></figure></p><p>hitch currently works on Linux, OpenBSD, FreeBSD, and MacOSX. It has been tested the most heavily on Linux/x86_64.</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dnf install epel-release -y</span><br><span class="line">dnf install hitch -y</span><br></pre></td></tr></table></figure></p><p>Version</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hitch -V</span><br><span class="line">hitch 1.5.2</span><br></pre></td></tr></table></figure></p><p>Default config</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/hitch/hitch.conf</span><br><span class="line"><span class="meta">#</span> Run 'man hitch.conf' for a description of all options.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">frontend = &#123;</span><br><span class="line">    host = "*"</span><br><span class="line">    port = "443"</span><br><span class="line">&#125;</span><br><span class="line">backend = "[127.0.0.1]:6086"    # 6086 is the default Varnish PROXY port.</span><br><span class="line">workers = 4                     # number of CPU cores</span><br><span class="line"></span><br><span class="line">daemon = on</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> We strongly recommend you create a separate non-privileged hitch</span><br><span class="line"><span class="meta">#</span> user and group</span><br><span class="line">user = "hitch"</span><br><span class="line">group = "hitch"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Enable to let clients negotiate HTTP/2 with ALPN. (default off)</span><br><span class="line"><span class="meta">#</span> alpn-protos = "h2, http/1.1"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> run Varnish as backend over PROXY; varnishd -a :80 -a localhost:6086,PROXY ..</span><br><span class="line">write-proxy-v2 = on             # Write PROXY header</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">syslog = on</span><br><span class="line">log-level = 1</span><br><span class="line"><span class="meta">#</span> Add pem files to this directory</span><br><span class="line">pem-dir = "/etc/pki/tls/private"</span><br></pre></td></tr></table></figure></p><h2 id="配置-hitch">配置 hitch</h2><p>示例配置（<a href="https://github.com/varnish/hitch/blob/master/docs/configuration.md" target="_blank" rel="noopener">更多参数参看官方文档</a>）：</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/hitch/hitch.conf /etc/hitch/hitch.conf.bak</span><br><span class="line"></span><br><span class="line">echo '</span><br><span class="line"><span class="meta">#</span> Run 'man hitch.conf' for a description of all options.</span><br><span class="line"></span><br><span class="line">frontend = &#123;</span><br><span class="line">    host = "*"</span><br><span class="line">    port = "443"</span><br><span class="line">&#125;</span><br><span class="line">backend = "[127.0.0.1]:6086"    # 6086 is the default Varnish PROXY port.</span><br><span class="line">workers = 4                     # number of CPU cores</span><br><span class="line"></span><br><span class="line">daemon = on</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> We strongly recommend you create a separate non-privileged hitch</span><br><span class="line"><span class="meta">#</span> user and group</span><br><span class="line">user = "hitch"</span><br><span class="line">group = "hitch"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Enable to let clients negotiate HTTP/2 with ALPN. (default off)</span><br><span class="line"><span class="meta">#</span> Varnish 启动参数必须增加 `-p feature=+http2`，开始 HTTP/2 特性（默认关闭）</span><br><span class="line">alpn-protos = "h2, http/1.1"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> run Varnish as backend over PROXY; varnishd -a :80 -a localhost:6086,PROXY ..</span><br><span class="line">write-proxy-v2 = on             # Write PROXY header</span><br><span class="line"></span><br><span class="line">syslog = on</span><br><span class="line">log-level = 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> Add pem files to this directory</span><br><span class="line"><span class="meta">#</span>pem-dir = "/etc/pki/tls/private"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span># PEM 文件包含 key、cert 和 chain 的组合，可以支持多个 PEM 文件</span><br><span class="line"><span class="meta">#</span># cat example.com.key example.com.crt my-ca-bundle.crt &gt; example.com.pem</span><br><span class="line">pem-file = "/etc/hitch/varnish.pem"</span><br><span class="line"><span class="meta">#</span> 定义第二个 PEM 文件</span><br><span class="line"><span class="meta">#</span>pem-file = "/etc/hitch/mydomain.pem"</span><br><span class="line"><span class="meta">#</span># 官方推荐默认 cipher</span><br><span class="line">ciphers = "EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH"</span><br><span class="line"><span class="meta">#</span># Hitch supports TLS (1.0, 1.1, 1.2, 1.3) and SSL 3. By default</span><br><span class="line">tls-protos = TLSv1.2 TLSv1.3</span><br><span class="line"><span class="meta">#</span># TCP Fast Open saves up to one full round-trip time (RTT) over the standard three-way connection handshake during a TCP session.</span><br><span class="line">tcp-fastopen = on</span><br><span class="line">' &gt; /etc/hitch/hitch.conf</span><br></pre></td></tr></table></figure></p><blockquote><p>OCSP staple 相关配置参看<a href="https://github.com/varnish/hitch/blob/master/docs/configuration.md" target="_blank" rel="noopener">官方文档</a></p></blockquote><p><strong>不间断运行重新加载配置</strong></p><p>当前支持添加、更新和删除 PEM 文件（<code>PEM-file</code>）和前端侦听端点（<code>frontend</code>）。</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl reload hitch</span><br></pre></td></tr></table></figure></p><h2 id="启动-varnish-支持-http2">启动 Varnish 支持 HTTP/2</h2><p>默认情况下，Varnish 中的 HTTP/2 支持是禁用的，因此必须添加一个特性标志才能启用它。即通过传递“-p feature=+http2”作为 Varnish 的启动参数来实现。</p><p>您可以通过运行<code>varnishadm param.show feature</code>命令来检查是否已启用参数。</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># varnishadm param.show feature</span><br><span class="line"></span><br><span class="line">feature</span><br><span class="line">        Value is: none (default)</span><br><span class="line"></span><br><span class="line">        Enable/Disable various minor features.</span><br><span class="line">           none                       Disable all features.</span><br><span class="line"></span><br><span class="line">        Use +/- prefix to enable/disable individual feature:</span><br><span class="line">           short_panic                Short panic message.</span><br><span class="line">           wait_silo                  Wait for persistent silo.</span><br><span class="line">           no_coredump                No coredumps.</span><br><span class="line">           esi_ignore_https           Treat HTTPS as HTTP in</span><br><span class="line">                                      ESI:includes</span><br><span class="line">           esi_disable_xml_check      Don&apos;t check of body looks like</span><br><span class="line">                                      XML</span><br><span class="line">           esi_ignore_other_elements  Ignore non-esi XML-elements</span><br><span class="line">           esi_remove_bom             Remove UTF-8 BOM</span><br><span class="line">           https_scheme               Also split https URIs</span><br><span class="line">           http2                      Support HTTP/2 protocol</span><br><span class="line">           http_date_postel           Relax parsing of timestamps in</span><br><span class="line">                                      HTTP headers</span><br></pre></td></tr></table></figure></p><p><strong>启动 Varnish</strong></p><blockquote><p>本例中，Varnish 使用默认配置，事先运行了 Nginx，将 Nginx 默认端口修改为 8080 即可（具体过程略）。</p></blockquote><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">varnishd -a :<span class="number">80</span> -a localhost:<span class="number">6086</span>,PROXY -p feature=+http2 -f /etc/varnish/<span class="keyword">default</span>.vcl</span><br><span class="line">#或者</span><br><span class="line">varnishd -a localhost:<span class="number">6086</span>,PROXY -p feature=+http2 -f /etc/varnish/<span class="keyword">default</span>.vcl</span><br></pre></td></tr></table></figure></p><p><strong>验证 Varnish 已经开启 HTTP/2 支持</strong></p><p><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">varnishadm param.show feature</span><br><span class="line">feature</span><br><span class="line">        Value is: +http2</span><br><span class="line">        Default is: none</span><br><span class="line"></span><br><span class="line">        ......</span><br></pre></td></tr></table></figure></p><p><strong>然后启动 hitch</strong></p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart hitch</span><br></pre></td></tr></table></figure></p><p><strong>配置 HSTS</strong></p><p>编辑 varnish vcl，如下字段添加：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sub vcl_deliver &#123;</span><br><span class="line"><span class="built_in">set</span> resp.http.Strict-Transport-Security = <span class="string">"max-age=31536000; includeSubDomains; preload"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><blockquote><p>Varnish 需要重启或者重新加载配置才能生效。</p></blockquote><h2 id="ssl-test-a">SSL Test A+</h2><p>以上配置在 Qualys SSL Labs SSL 测试中可获得 A+ 评级。</p><p><img src="/article/Varnish-with-Hitch-HTTP2/Varnish-APlus.png" alt="Varnish-APlus"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;版本支持：&lt;/p&gt;
&lt;p&gt;In Varnis
      
    
    </summary>
    
    
    
      <category term="HTTP" scheme="http://sysin.org/tags/HTTP/"/>
    
      <category term="TLS" scheme="http://sysin.org/tags/TLS/"/>
    
      <category term="Varnish" scheme="http://sysin.org/tags/Varnish/"/>
    
  </entry>
  
  <entry>
    <title>VMware Horizon 8.0 2006 下载</title>
    <link href="http://sysin.org/article/Download-VMware-Horizon-8.0-2006/"/>
    <id>http://sysin.org/article/Download-VMware-Horizon-8.0-2006/</id>
    <published>2020-08-13T02:10:00.000Z</published>
    <updated>2020-08-16T06:52:33.073Z</updated>
    
    <content type="html"><![CDATA[<p>VMware Horizon Version 2006Released 11 August 2020</p><h2 id="什么是-vmware-horizon">什么是 VMware Horizon？</h2><p>VMware Horizon® 解决方案可以通过面向终端用户的单一平台，简化本地部署、云中、混合云或多云配置中的虚拟桌面和应用的管理和交付。Horizon 采用全面的工作空间环境管理并已针对软件定义的数据中心进行优化，有助于 IT  部门按照终端用户期望的速度和业务部门要求的效率，控制、管理和保护终端用户所需的全部 Windows 资源。</p><h2 id="vmware-horizon-的用途">VMware Horizon 的用途</h2><h3 id="通过单一平台交付桌面和应用">通过单一平台交付桌面和应用</h3><p>将静态桌面转变为能够按需交付的安全数字化工作空间。通过单个 VDI 和应用虚拟化平台置备虚拟或远程桌面和应用，从而精简管理并轻松为终端用户授权。</p><h3 id="大幅提高投资回报">大幅提高投资回报</h3><p>可通过虚拟存储、虚拟计算和虚拟网络连接动态分配资源，从而简化管理并降低成本。通过可将虚拟化技术从数据中心延伸到设备的单个平台降低日常运维开销。</p><h3 id="保护数据并简化合规性管理">保护数据并简化合规性管理</h3><p>利用可动态适应终端用户计算环境的策略整合对终端用户计算资源的控制、交付和保护。利用虚拟网络连接简化并动态保护数据中心基础架构和工作负载。</p><h3 id="简化本地部署和云环境的管理">简化本地部署和云环境的管理</h3><p>利用可在数秒内交付桌面的现代桌面和应用交付体系架构，借助真正的无状态桌面降低存储和运维开销，并确保轻松进行应用打包和安装。</p><h3 id="支持丰富的自适应用户体验">支持丰富的自适应用户体验</h3><p>跨设备、位置、介质和连接为知识型员工、移动员工甚至 3D 开发人员提供始终如一的卓越终端用户体验。</p><h2 id="功能特性">功能特性</h2><h3 id="为软件定义的数据中心而构建">为软件定义的数据中心而构建</h3><p>Horizon 7 与包含 vSphere、vSAN 和 NSX 的 VMware 软件定义的数据中心紧密集成。这种集成为本地部署和公有云提供无缝的全包式解决方案，因此无需构建、测试和支持不同的存储、虚拟化及网络连接产品。</p><h3 id="vsan-for-horizon"><a href="https://www.vmware.com/cn/products/horizon/horizon-vsan.html" target="_blank" rel="noopener">vSAN for Horizon</a></h3><p>借助 VMware vSAN，客户可以降低起步成本，并充分利用大量已针对 Horizon 优化的预配置虚拟设备，包括 vSAN 就绪节点设备和 EVO SDDC 基础架构。</p><h3 id="horizon-超融合基础架构"><a href="https://www.vmware.com/cn/products/horizon/horizon-hci.html" target="_blank" rel="noopener">Horizon 超融合基础架构</a></h3><p>借助我们的超融合基础架构解决方案快速部署和运行，它是一个紧密集成的软件体系，非常适用于 Horizon 桌面和应用虚拟化。</p><h3 id="vsphere-for-desktop"><a href="https://www.vmware.com/content/dam/digitalmarketing/vmware/zh-cn/pdf/products/vsphere/vmware-vsphere-desktop-faqs.pdf" target="_blank" rel="noopener">vSphere for Desktop</a></h3><p>vSphere Desktop 是用于部署桌面虚拟化的新 vSphere 版本。它可提供 vSphere Enterprise Plus Edition 的全部特性和功能，使您能够为所有桌面工作负载实现可扩展性、高可用性和最佳性能。</p><h3 id="vrealize-operations-for-horizon"><a href="https://www.vmware.com/cn/products/vrealize-operations-horizon.html" target="_blank" rel="noopener">vRealize Operations for Horizon</a></h3><p>VMware vRealize Operations for Horizon 是一款监控和报告工具，用于管理您的 Horizon 和 XenDesktop/XenApp 环境。</p><h3 id="nsx-for-horizon"><a href="https://www.vmware.com/cn/products/horizon/horizon-nsx.html" target="_blank" rel="noopener">NSX for Horizon</a></h3><p>VMware NSX for Horizon 利用可以随虚拟桌面动态调整的策略，使虚拟桌面基础架构 (VDI) 网络连接变得快速、简便。</p><p><a href="https://www.vmware.com/content/dam/digitalmarketing/vmware/zh-cn/pdf/products/horizon/vmware-horizon-with-nsx-esg-whitepaper.pdf" target="_blank" rel="noopener"> 使用 NSX for Horizon 实现客户优势 </a></p><h3 id="vmware-cloud-foundation-for-horizon"><a href="https://www.vmware.com/cn/products/horizon/horizon-cloud-foundation.html" target="_blank" rel="noopener">VMware Cloud Foundation for Horizon</a></h3><p>在扩展和保护 Horizon 部署时享受一键式的简便性，并且更快实现业务价值。VMware Cloud Foundation for Horizon 可交付具有集成式虚拟桌面和应用服务的企业级云计算平台。</p><h3 id="horizon-7-on-vmware-cloud-on-aws"><a href="https://www.vmware.com/cn/products/horizon/horizon-on-vmc-aws.html" target="_blank" rel="noopener">Horizon 7 on VMware Cloud on AWS</a></h3><p>VMware Horizon 7 on VMware Cloud on AWS 可为虚拟桌面和应用交付无缝集成的混合云。</p><h3 id="windows-和-linux">Windows 和 Linux</h3><p>跨多个数据中心大规模快速交付 Windows 和 Linux 资源。了解 <a href="https://www.vmware.com/cn/products/horizon/horizon-linux.html#windows?src=WWW_HrzOld_Features_HorizonForWindows" target="_blank" rel="noopener">Horizon for Windows</a> 和 <a href="https://www.vmware.com/cn/products/horizon/horizon-linux.html#linux?src=WWW_HrzOld_Features_HorizonForLinux" target="_blank" rel="noopener">Horizon for Linux</a>。</p><h3 id="可精简访问流程的智能策略">可精简访问流程的智能策略</h3><p>借助 True SSO 和连接用户、设备和位置信息的基于角色、符合环境的精细策略，简化所有桌面和应用服务的身份验证过程。借助简化的网络连接、自动化智能和从数据中心到设备的全方位威胁保护，对虚拟基础架构实施多层保护。</p><h2 id="文件列表">文件列表</h2><h3 id="vmware-horizon-8-2006-enterprise">VMware Horizon 8 2006 Enterprise</h3><pre><code>Horizon Connection Server (64-bit)文件大小: 303.24 MB文件类型: exeHorizon Agent (32-bit)文件大小: 166.88 MB文件类型: exeHorizon Agent (64-bit)文件大小: 229.51 MB文件类型: exeHorizon Agent Direct-Connection (32 bit)文件大小: 19.11 MB文件类型: exeHorizon Agent Direct-Connection (64 bit)文件大小: 33.83 MB文件类型: exeHorizon Agent for 64-bit Linux文件大小: 225.56 MB文件类型: tar.gzHorizon HTML Access Direct-Connection文件大小: 5.72 MB文件类型: zipHorizon View Composer文件大小: 45.93 MB文件类型: exeHorizon GPO Bundle文件大小: 800.7 KB文件类型: zip</code></pre><p>Unified Access Gateway Enterprise files. For use with Horizon Enterprise.（暂缺）</p><pre><code>Unified Access Gateway (UAG) 3.10 for vSphere and Amazon AWS (Non-FIPS)文件大小: 2.98 GB文件类型: ovaUnified Access Gateway (UAG) 3.10 for vSphere (FIPS)文件大小: 2.65 GB文件类型: ovaUnified Access Gateway (UAG) 3.10 for Microsoft Azure文件大小: 2.89 GB文件类型: zipUnified Access Gateway (UAG) 3.10 PowerShell Scripts文件大小: 57.33 KB文件类型: zip</code></pre><h3 id="client">Client</h3><p>VMware Horizon Client for Windows</p><pre><code>VMware Horizon Client for Windows2020-08-11</code></pre><p>VMware Horizon Client for Mac</p><pre><code>VMware Horizon Client for macOS2020-08-11</code></pre><p>VMware Horizon Client for Linux</p><pre><code>VMware Horizon Client for 32-bit Linux2020-08-11VMware Horizon Client for 64-bit Linux2020-08-11VMware Horizon Client for Linux tarball version2020-08-11</code></pre><p>VMware Horizon Client for iOS</p><pre><code>VMware Horizon Client for iOS devices2020-08-11</code></pre><p>VMware Horizon Client for Android</p><pre><code>VMware Horizon Client for Android 64-bit x86-based devices2020-08-11VMware Horizon Client for Android 32-bit x86-based devices2020-08-11VMware Horizon Client for Android 32-bit ARM-based devices2020-08-11VMware Horizon Client for Android 64-bit ARM-based devices2020-08-11VMware Horizon Client for Android devices from Google Play store2020-08-11VMware Horizon Client for Kindle Fire in Amazon Appstore for Android2020-08-11</code></pre><p>VMware Horizon Client for Chrome</p><pre><code>VMware Horizon Client for Chrome devices2020-05-22</code></pre><h2 id="下载地址">下载地址</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">链接: https://pan.baidu.com/s/1IZzJoFJdScpIZXmhI45x-Q  密码: 16q5</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;VMware Horizon Version 2006
Released 11 August 2020&lt;/p&gt;
&lt;h2 id=&quot;什么是-vmware-horizon&quot;&gt;什么是 VMware Horizon？&lt;/h2&gt;
&lt;p&gt;VMware Horizon® 解决方案可以通过面
      
    
    </summary>
    
    
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
      <category term="VMware" scheme="http://sysin.org/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>VMware vRealize Network Insight 5.3 下载 百度网盘</title>
    <link href="http://sysin.org/article/Download-VMware-vRealize-Network-Insight-5.3/"/>
    <id>http://sysin.org/article/Download-VMware-vRealize-Network-Insight-5.3/</id>
    <published>2020-08-11T02:10:00.000Z</published>
    <updated>2020-08-12T05:33:30.934Z</updated>
    
    <content type="html"><![CDATA[<h2 id="发现-优化应用安全性和网络连接解决方案并对其进行故障排除">发现、优化应用安全性和网络连接解决方案并对其进行故障排除</h2><p>VMware vRealize Network Insight 可帮助您跨混合和多云环境构建经过优化且高度可用的安全网络基础架构。它提供了网络可见性和分析功能，以提高微分段安全性，最大限度地降低应用迁移期间的风险，优化网络性能，并信心十足地管理和扩展 NSX、SD-WAN Velocloud 和 Kubernetes 部署。</p><h2 id="应用场景">应用场景</h2><p><img src="https://www.vmware.com/content/vmware/vmware-published-sites/cn/products/vrealize-network-insight/_jcr_content/parcontainer/threecolumncontainer_392160576/threecolumncontainer1/image_copy_23504860.img.png/1589297890137.png" alt="vmw-transparent-network"></p><h3 id="网络可见性和分析">网络可见性和分析</h3><ul><li>混合和多云环境以及 SD-WAN 的可见性，支持 VMware NSX、VeloCloud、VMware Cloud on AWS 和 Microsoft Azure</li><li>发现叠加和底层网络之间的连接</li><li>分析混合云中的流量和应用</li></ul><p><img src="https://www.vmware.com/content/vmware/vmware-published-sites/cn/products/vrealize-network-insight/_jcr_content/parcontainer/threecolumncontainer_392160576/threecolumncontainer2/image.img.png/1589297890181.png" alt="vmw-transparent-security"></p><h3 id="规划应用安全性和云迁移">规划应用安全性和云迁移</h3><ul><li>发现应用（虚拟机、容器），确定流量模式</li><li>规划安全性：推荐防火墙策略、微分段应用</li><li>跨虚拟机、容器和云环境排除混合应用的安全故障</li><li>映射依赖关系以降低应用迁移期间的风险</li></ul><p><img src="https://www.vmware.com/content/vmware/vmware-published-sites/cn/products/vrealize-network-insight/_jcr_content/parcontainer/threecolumncontainer_392160576/threecolumncontainer3/image_copy.img.png/1589297890296.png" alt="vmw-transparent-virtualization"></p><h3 id="优化虚拟网络和物理网络并进行故障排除">优化虚拟网络和物理网络并进行故障排除</h3><ul><li>缩短应用连接问题的平均修复时间 (MTTR)</li><li>通过消除网络瓶颈优化应用性能</li><li>跨多个 NSX Manager 进行管理和扩展</li></ul><h2 id="功能特性列表">功能特性列表</h2><table><thead><tr><th>功能</th><th>vREALIZE NETWORK INSIGHT ADVANCED</th><th>vREALIZE NETWORK INSIGHT ENTERPRISE</th><th>NETWORK INSIGHT VMWARE CLOUD SERVICE</th></tr></thead><tbody><tr><td>虚拟流量（VDS IPFIX、V2V、V2P）</td><td>•</td><td>•</td><td>•</td></tr><tr><td>NSX 防火墙微分段规划与运维  (NSX  IPFIX)</td><td>•</td><td>•</td><td>•</td></tr><tr><td>应用发现仪表盘（名称、标记、RegEx）</td><td>•</td><td>•</td><td>•</td></tr><tr><td>NSX 后续运维（拓扑视图、运行状况确认清单、边缘网关负载均衡仪表盘）</td><td>•</td><td>•</td><td>•</td></tr><tr><td>跨均第衡三器方的交可换见机性、路由器、防火墙和负载</td><td>•</td><td>•</td><td>•</td></tr><tr><td>公共 API</td><td>•</td><td>•</td><td>•</td></tr><tr><td>DNS 映射（导入绑定文件）新</td><td>•</td><td>•</td><td>•</td></tr><tr><td>NSX PCI 合规性仪表盘</td><td></td><td>•</td><td>•</td></tr><tr><td>适用于应用发现的 ServiceNow 集成</td><td></td><td>•</td><td>•</td></tr><tr><td>针规对划和V可Mw见a性re Cloud on AWS 的安全性</td><td></td><td>•</td><td>•</td></tr><tr><td>针性对 AWS 和 Azure 的安全性规划和可见  (新)</td><td></td><td>•</td><td>•</td></tr><tr><td>Infoblox 的 DNS 解析</td><td></td><td>•</td><td>•</td></tr><tr><td>物理流量（NetFlow v7 和 v9，以及sFlow）</td><td></td><td>•</td><td>•</td></tr><tr><td>针对 VMware Enterprise PKS、Kubernetes 和 OpenShift 的可见性</td><td></td><td>•</td><td>•</td></tr><tr><td>网常络情和况安、全异性常分值析检（测最等大）流量使用方、异</td><td></td><td>•</td><td>•</td></tr><tr><td>可配置的延长数据保留期</td><td></td><td>•</td><td>•</td></tr><tr><td>Cisco ACI、BGP-EVPN 底层可见性</td><td></td><td>•</td><td>•</td></tr></tbody></table><h2 id="新增内容">新增内容</h2><p>vRealize Network Insight 5.3 | 2020 年 7 月 14 日 | 内部版本 1593829198</p><p>以下是 vRealize Network Insight 5.3 的主要特性和功能：</p><h3 id="保证和验证">保证和验证</h3><ul><li><p>网络映射：</p><p>显示物理网络和虚拟网络的拓扑</p><ul><li>显示设备和网络运行状况摘要</li><li>将设备分组到多个区域，简化了可视化</li><li>支持 VMware NSX-T 和领先的网络供应商，如 Cisco、Arista、Palo Alto Networks</li></ul></li><li><p>路径故障排除：</p><p>在网络映射中显示从源到目标的网络路径</p><ul><li>实现了使用通配符的搜索，可显示多个路径</li><li>识别允许的路径和由于交换机或防火墙上的配置问题而被阻止的路径</li></ul></li><li><p>意向：</p><p>支持即时可用和用户定义的网络意向</p><ul><li>验证设备和网络意向是否符合覆盖网络和底层网络的配置</li><li>支持设备和网络意向</li><li>使用 STIG 合规性意向验证密码</li></ul></li></ul><h3 id="vmware-nsx-t-实施后操作故障排除">VMware NSX-T 实施后操作故障排除</h3><ul><li>引入了一组有关主机和网络利用率的新事件</li><li>支持新的流重新传输计数衡量指标</li><li>显示基础架构延迟衡量指标：vNIC 到 vNIC、vNIC 到 pNIC、pNIC 到 vNIC、VTEP 到 VTEP</li></ul><h3 id="第三方设备监控">第三方设备监控</h3><ul><li>支持 HPE 交换机</li><li>支持 Mellanox 交换机</li><li>支持对 Arista 交换机进行事件分析和关联</li></ul><h3 id="vmware-sd-wan-by-velocloud-监控和故障排除">VMware SD-WAN by VeloCloud 监控和故障排除</h3><ul><li>在 Edge 拓扑仪表板上显示网关集群</li><li>支持使用实时流和配置的端到端路径（IP 或虚拟机）</li><li>在 Edge 仪表板上使用 Sankey 图表增强了流分析。</li><li>增强了覆盖网络隧道衡量指标（隧道 QOE）</li><li>在整个部署中实现失效链路可见性</li></ul><h3 id="vmware-cloud-on-aws">VMware Cloud on AWS</h3><ul><li>Direct Connect 仪表板增强功能<ul><li>显示失败的通告子网警示、流小组件、高级流衡量指标</li><li>对 Direct Connect 事件进行了重命名。例如，“BGP 状态为‘关闭’”重命名为了“Direct Connect: BGP 状态为‘关闭’”</li><li>显示 VIF 计数、前几个流（按规则）、NSX Manager 和 vCenter 默认事件</li></ul></li><li>获取 VMC SDDC 的 TCP 流 RTT 计数和 TCP 重新传输计数</li><li>支持在 VMC 上使用 PowerShell 脚本部署 vRealize Network Insight Cloud 收集器</li></ul><h3 id="其他">其他</h3><ul><li>VMware PKS Enterprise 已更名为 Tanzu Kubernetes Grid Integrated Edition</li><li>UI 性能进行了改进，页面加载速度更快</li><li>改进了搜索建议，包括与在全局搜索栏中键入的文本匹配的已保存搜索和近期搜索</li><li>添加了对配备 NXOS 9.2.2 的 Cisco Nexus 交换机、Cisco ACI 4.2.3、Checkpoint Firewall R80.30、Juniper JunOS v17 和 Palo Alto Networks Panorama 9.1 的支持</li><li>vRealize Suite Lifecycle Manager 8.1 产品支持包 3 支持安装 vRealize Network Insight 5.3。请参见 <a href="https://docs.vmware.com/cn/VMware-vRealize-Suite-Lifecycle-Manager/8.1/rn/VMware-vRealize-Suite-Lifecycle-Manager-81-Release-Notes.html#networkinsight" target="_blank" rel="noopener">VMware vRealize Suite Lifecycle Manager 8.1 发行说明</a>。有关使用 vRealize Suite Lifecycle Manager 安装和升级 Network Insight 的信息，请参见 <a href="https://docs.vmware.com/cn/VMware-vRealize-Suite-Lifecycle-Manager/8.1/com.vmware.vrsuite.lcm.8.1.doc/GUID-7E2CE69B-2CE2-49EA-8FC4-C7816F5FC837.html" target="_blank" rel="noopener">vRealize Suite Lifecycle Manager 安装、升级和管理指南</a>。</li></ul><h2 id="文件列表">文件列表</h2><p><strong>vRealize Network Insight – Platform OVA file</strong>File size: 6.41 GBFile type: ovaName: VMware-vRealize-Network-Insight-5.3.0.1593829198-platform.ovaRelease Date: 2020-07-14Build Number: 1593829198OVA file for the VMware vRealize Network Insight Appliance. Use the VMware vSphere Client to import this .ova file to your setup.MD5SUM: 62c4cd9d0ca6d452f7ee036049fbf1fbSHA1SUM: 66a54634dadf5c1330aa46d6ce8bf402344b03f7SHA256SUM: d7ab8b0a9432c6eb245ffce7099ea925fa0303ae9897839a327af29f7241666f</p><p><strong>vRealize Network Insight – Proxy OVA file</strong>File size: 2.55 GBFile type: ovaName: VMware-vRealize-Network-Insight-5.3.0.1593829198-proxy.ovaRelease Date: 2020-07-14Build Number: 1593829198OVA file for the VMware vRealize Network Insight Appliance. Use the VMware vSphere Client to import this .ova file to your setup.MD5SUM: fd18019437aedd35db5862a9c25c36cdSHA1SUM: 02a7676d6b208cdc989899fbdddf25205f7e891dSHA256SUM: f60a0beb0fa8c3069a9ef0b096e44c11e4f639e9ac8a52d21f2a7a9c1e7979ae</p><p><strong>vRealize Network Insight 5.3.0 Offline Upgrade Bundle</strong>File size: 3.69 GBFile type: bundleName: VMware-vRealize-Network-Insight.5.3.0.1593829198.upgrade.bundleRelease Date: 2020-07-14Build Number: 1593829198MD5SUM: 27b20e17a0e5acce33630e7e484401e2SHA1SUM: d223187bef93f7b8bcb1cdf1c6fcb163317ab8e8SHA256SUM: 21a6412eccfb1c498228ed224bb5a287e97bbbcdf670f8c0800bba41176419ce</p><h2 id="下载地址">下载地址</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">链接：https://pan.baidu.com/s/1QSUns-m6eaUEBHU_VxRkIA</span><br><span class="line">提取码：7s6y</span><br></pre></td></tr></table></figure></p><h2 id="关于许可">关于许可</h2><p>因版权原因，不提供软件许可，请自行搜索。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;发现-优化应用安全性和网络连接解决方案并对其进行故障排除&quot;&gt;发现、优化应用安全性和网络连接解决方案并对其进行故障排除&lt;/h2&gt;
&lt;p&gt;VMware vRealize Network Insight 可帮助您跨混合和多云环境构建经过优化且高度可用的安全网络基础架构。
      
    
    </summary>
    
    
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
      <category term="VMware" scheme="http://sysin.org/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>PAN-OS 10.0 VM 下载，全球首个基于机器学习的新一代防火墙</title>
    <link href="http://sysin.org/article/Download-PAN-OS-10.0-VM/"/>
    <id>http://sysin.org/article/Download-PAN-OS-10.0-VM/</id>
    <published>2020-08-03T02:10:00.000Z</published>
    <updated>2020-08-04T06:14:44.664Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Palo Alto Networks PAN-OS 10.0: World's First ML-Powered NGFW</strong></p><h2 id="关键新特性">关键新特性：</h2><ul><li><p>SSL Decryption Support for TLSv1.3</p></li><li><p>Inline ML for Web-Based Attacks</p></li><li><p>Secure Kubernetes Environments with the CN-Series NGFW</p></li><li><p>IoT Security</p></li></ul><p>参看：<a href="https://docs.paloaltonetworks.com/pan-os/10-0/pan-os-new-features.html" target="_blank" rel="noopener">PAN-OS ® New Features Guide</a></p><h2 id="下载连接">下载连接：</h2><p>PA-VM-ESX-10.0.0.ova</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">magnet:?xt=urn:btih:336DA271DA2A654F00D93C20B98B4F1737889651&amp;dn=PA-VM-ESX-10.0.0.ova&amp;tr=udp%3a%2f%2ftracker.openbittorrent.com%3a1337%2fannounce&amp;tr=udp%3a%2f%2ftracker.opentrackr.org%3a1337%2fannounce</span><br></pre></td></tr></table></figure></p><p>Panorama-ESX-10.0.0.ova</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">magnet:?xt=urn:btih:F3DD6D1B429BC1D882111803B35C71414BBDF307&amp;dn=Panorama-ESX-10.0.0.ova&amp;tr=udp%3a%2f%2ftracker.openbittorrent.com%3a1337%2fannounce&amp;tr=udp%3a%2f%2ftracker.opentrackr.org%3a1337%2fannounce</span><br></pre></td></tr></table></figure></p><h2 id="本地下载">本地下载：</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">百度网盘: https://pan.baidu.com/s/1Ze_t1tKeXEW66eio5yFqzQ  密码: q18r</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;Palo Alto Networks PAN-OS 10.0: World&#39;s First ML-Powered NGFW&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;关键新特性&quot;&gt;关键新特性：&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;SSL Decryption
      
    
    </summary>
    
    
    
      <category term="PAN-OS" scheme="http://sysin.org/tags/PAN-OS/"/>
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
  </entry>
  
  <entry>
    <title>QUIC &amp; HTTP/3 Support：主流浏览器和服务端对 HTTP/3 的支持情况</title>
    <link href="http://sysin.org/article/QUIC-&amp;-HTTP3-Support/"/>
    <id>http://sysin.org/article/QUIC-&amp;-HTTP3-Support/</id>
    <published>2020-08-01T02:10:00.000Z</published>
    <updated>2020-08-13T01:32:15.245Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><h2 id="1-引言">1. 引言</h2><h3 id="11-什么是-quic">1.1 什么是 QUIC</h3><p>QUIC（Quick UDP Internet Connections）是 chromium 的一个项目，这是一个体验的协议，旨在降低基于 TCP 通讯的 Web 延迟。QUIC 非常类似 TCP+TLS+SPDY ，但是基于 UDP 实现的。因为 TCP 是由操作系统内核或者是 middlebox 固件实现，因此对 TCP 进行大幅改造不太可能。所以 Google 开发了 QUIC 基于 UDP 来避免 TCP 的一些限制。</p><p>主页：https://www.chromium.org/quic</p><p>QUIC 与已有的 TCP+TLS+SPDY 比较关键的特性：</p><ul><li>降低了连接建立时间</li><li>改进了握手控制</li><li>多路复用</li><li>可对错误连接进行转发</li><li>连接移植</li></ul><h3 id="12-了解-http3">1.2 了解 HTTP/3</h3><p>运行在 QUIC 之上的 HTTP 协议被称为 HTTP/3 (HTTP-over-QUIC)。QUIC 协议 (Quick UDP Internet Connection) 基于 UDP，正是看中了 UDP 的速度与效率。同时 QUIC 也整合了 TCP、TLS 和 HTTP/2 的优点，并加以优化。</p><ul><li><p>特点:</p><ol><li>减少了握手的延迟(1-RTT 或 0-RTT)</li><li>多路复用，并且没有 TCP 的阻塞问题</li><li>连接迁移，(主要是在客户端)当由 Wifi 转移到 4G 时，连接不会被断开</li><li>集成了 TLS 1.3 加密</li></ol></li><li><p>HTTP/3 与 HTTP/1.1 和 HTTP/2 没有直接的关系，也不是 HTTP/2 的扩展</p></li><li><p>HTTP/3 将会是一个全新的 WEB 协议</p></li><li><p>HTTP/3 目前处于制订和测试阶段</p></li></ul><h2 id="2-服务端">2. 服务端</h2><h3 id="21-f5-big-ip-http3">2.1 F5 BIG-IP HTTP/3</h3><p>参看：<a href="https://support.f5.com/csp/article/K60235402" target="_blank" rel="noopener">K60235402</a></p><p>从 BIG-IP 15.1.0.1 开始，F5 引入了 HTTP/3 和 QUIC 作为实验特性。BIG-IP 系统的中 HTTP/3 和 QUIC profiles 分别基于 <a href="https://tools.ietf.org/html/draft-ietf-quic-http-24" target="_blank" rel="noopener">draft-ietf-quic-http-24</a> 和 <a href="https://tools.ietf.org/html/draft-ietf-quic-transport-24" target="_blank" rel="noopener">draft-ietf-quic-transport-24</a> 实验性实现。</p><h4 id="使用-tmui-创建-http3-virtual-server">使用 TMUI 创建 HTTP/3 virtual server</h4><p>具体步骤如下：</p><ol><li><p>Log in to the Configuration utility.</p></li><li><p>Go to <strong>Local Traffic</strong> &gt; <strong>Virtual Servers</strong>.</p></li><li><p>Select <strong>Create</strong>.</p></li><li><p>Provide appropriate values for <strong>Name</strong>, <strong>Destination Address/Mask</strong>.</p></li><li><p>For <strong>Service Port</strong>, enter an appropriate port number. For example, <strong>4433</strong>.</p></li><li><p>For Protocol , select UDP . <strong>Note</strong>: HTTP/3 and QUIC use the <strong>UDP</strong> protocol. By selecting <strong>UDP</strong>, options for HTTP/3 and QUIC profiles will be available for selection in the <strong>Acceleration</strong> section of the page.</p></li><li><p>For Protocol Profile (Server) , select tcp . <strong>Note</strong>: As HTTP/3 server side is currently not supported, you cannot use any of the UDP protocols on the server side.</p></li><li><p>For <strong>HTTP Profile (Client)</strong>, select <strong>http</strong>.</p></li><li><p>For <strong>SSL Profile (Client)</strong>, select <strong>clientssl-quic</strong>.</p></li><li><p>For <strong>SSL Profile (Server)</strong>, select an appropriate Server SSL profile to communicate with your pool member.</p></li><li><p>Optional: For <strong>Source Address Translation</strong>, select <strong>Auto Map</strong>.</p></li><li><p>Select the <strong>HTTP MRF Router</strong> check box.</p></li><li><p>For  QUIC Profile (experimental) , select  quic.<strong>Note</strong>: To create your own QUIC profile, go to <strong>Local Traffic</strong> &gt; <strong>Profiles</strong> &gt; <strong>Services</strong> &gt; <strong>QUIC (experimental)</strong> and select <strong>Create</strong>.</p></li><li><p>For  HTTP/3 Profile (experimental) , select  http3.<strong>Note</strong>: To create your own HTTP/3 profile, go to <strong>Local Traffic</strong> &gt; <strong>Profiles</strong> &gt; <strong>Services</strong> &gt; <strong>HTTP/3 (experimental)</strong> and select <strong>Create</strong>.</p></li><li><p>Under <strong>Default Pool</strong>, select your pool.</p></li><li><p>Select <strong>Finished</strong>.</p></li></ol><h4 id="使用-tmsh-创建-http3-virtual-server">使用 tmsh 创建 HTTP/3 virtual server</h4><p>具体步骤如下：</p><ol><li><p>Log in to the TMOS Shell ( tmsh ) by entering the following command: tmsh</p></li><li><p>To create an HTTP/3 virtual server, use the following command syntax:</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create ltm virtual &lt;vs_name&gt; ip-protocol udp destination &lt;ipaddress&gt;:&lt;port_number&gt; pool &lt;pool_name&gt; source-address-translation &#123;type &lt;type&gt;&#125; profiles add &#123; udp &#123; context clientside &#125; tcp &#123; context serverside &#125; &lt;clientssl_profile&gt; &#123; context clientside &#125; &lt;serverssl_profile&gt; &#123;context serverside &#125; &lt;quic_profile&gt; &#123; context clientside &#125; &lt;http3_profile&gt; &#123; context clientside &#125; &lt;http_profile&gt; httprouter &#125;</span><br></pre></td></tr></table></figure></p><p>For example, enter the following command to create an HTTP/3 virtual server that contains the attributes in the table that follows:</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create ltm virtual quic_vs ip-protocol udp destination 10.10.10.10:4433 pool example_pool source-address-translation &#123;type automap&#125; profiles add &#123; udp &#123; context clientside &#125; tcp &#123; context serverside &#125; clientssl-quic &#123; context clientside &#125; serverssl &#123;context serverside &#125; quic &#123; context clientside &#125; http3 &#123; context clientside &#125; http httprouter &#125;</span><br></pre></td></tr></table></figure></p><table><thead><tr><th>Option</th><th>Value</th></tr></thead><tbody><tr><td>Virtual Server name</td><td>quic_vs</td></tr><tr><td>Destination Address/Mask</td><td>10.10.10.10</td></tr><tr><td>Service Port</td><td>4433</td></tr><tr><td>Protocol</td><td>UDP</td></tr><tr><td>Protocol Profile (Client)</td><td>udp</td></tr><tr><td>Protocol Profile (Server)</td><td>tcp</td></tr><tr><td>HTTP Profile</td><td>http</td></tr><tr><td>SSL Profile (Client)</td><td>clientssl-quic</td></tr><tr><td>SSL Profile (Server)</td><td>serverssl</td></tr><tr><td>Source Address Translation</td><td>Auto Map</td></tr><tr><td>HTTP MRF Router</td><td>Enabled</td></tr><tr><td>QUIC Profile (experimental)</td><td>quic</td></tr><tr><td>HTTP/3 Profile (experimental)</td><td>http3</td></tr><tr><td>Pool</td><td>example_pool</td></tr></tbody></table></li></ol><h3 id="22-nginx-http3">2.2 Nginx HTTP/3</h3><p>参考：<a href="https://www.nginx.com/blog/introducing-technology-preview-nginx-support-for-quic-http-3/" target="_blank" rel="noopener">Introducing a Technology Preview of NGINX Support for QUIC and HTTP/3</a></p><p>2020年6月10日，NGINX 宣布了 NGINX 的官方 QUIC 和 HTTP/3 实现的初始版本，即 http_v3_module。这是一个技术预览，应该被视为实验性的 - 它不适用于生产环境。在编写本文时，<a href="https://datatracker.ietf.org/doc/draft-ietf-quic-transport/" target="_blank" rel="noopener">QUIC 标准</a>尚未定稿，并且此初始版本是针对当前草案的一个子集实现的。</p><p>经过几个月的设计和开发，http_v3_module 已经准备好进行互操作性测试。我们也欢迎一般的反馈和代码贡献。请注意，http_v3_module 在 NGINX 开源主线开发分支中不可用（也不是 NGINX Plus 的任何版本）；因为它仍处于试验阶段，所以它是一个独立的开发分支，位于 https://hg.nginx.org/nginx-quic。</p><p>还请注意，这个 QUIC + HTTP/3 的实现是全新的，与Cloudflare作为其 <a href="https://blog.cloudflare.com/experience-with-http-3-using-nginx-and-quiche/" target="_blank" rel="noopener">quiche 项目</a>的一部分提供的修补程序无关。</p><p>对于那些熟悉 NGINX 配置的人来说，启用 QUIC + HTTP/3 非常简单。</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;              # TCP listener for HTTP/1.1</span><br><span class="line">    listen 443 http3 reuseport;  # UDP listener for QUIC+HTTP/3</span><br><span class="line"></span><br><span class="line">    ssl_protocols       TLSv1.3; # QUIC requires TLS 1.3</span><br><span class="line">    ssl_certificate     ssl/www.example.com.crt;</span><br><span class="line">    ssl_certificate_key ssl/www.example.com.key;</span><br><span class="line"></span><br><span class="line">    add_header Alt-Svc 'quic=":443"'; # Advertise that QUIC is available</span><br><span class="line">    add_header QUIC-Status $quic;     # Sent when QUIC was used</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="23-microsoft-http3">2.3 Microsoft HTTP/3</h3><p>Microsoft 在最新的  <a href="https://insider.windows.com/en-us/" target="_blank" rel="noopener">Windows Insider Preview Builds</a> 中支持 QUIC 和 HTTP/3，并将其开源，名为 <a href="https://github.com/microsoft/msquic" target="_blank" rel="noopener">MsQuic</a>。</p><h4 id="msquic-is-open-source"><a href="https://techcommunity.microsoft.com/t5/networking-blog/msquic-is-open-source/ba-p/1345441" target="_blank" rel="noopener">MsQuic is Open Source</a></h4><p>Microsoft 正在开发开源的 QUIC library，叫做 <a href="https://github.com/microsoft/msquic" target="_blank" rel="noopener">MsQuic</a>, 在 GitHub 基于 <a href="https://github.com/microsoft/msquic/blob/master/LICENSE" target="_blank" rel="noopener">MIT license</a>. MsQuic 是一个跨平台的通用库，它实现了 <a href="https://quicwg.org/" target="_blank" rel="noopener">QUIC</a> 传输协议。QUIC 正在由<a href="https://www.ietf.org/" target="_blank" rel="noopener">互联网工程工作组</a>（IETF）制定标准。MsQuic 是一个针对多种使用模式优化的客户机和服务器解决方案，并被多个 Microsoft 产品和服务使用。MsQuic 目前处于预览阶段，支持 Windows 和 Linux。</p><h4 id="windows-10"><a href="https://github.com/microsoft/msquic" target="_blank" rel="noopener">Windows 10</a></h4><p>在 Windows 10 上，MsQuic 依赖于 <a href="https://docs.microsoft.com/en-us/windows/win32/com/schannel" target="_blank" rel="noopener">Schannel</a> 对于 TLS 1.3 功能的内置支持。MsQuic 以 <code>msquic.sys</code>驱动程序的方式封装在 Windows 内核之中，以支持内置的 HTTP 和 SMB 功能。用户模式应用程序使用<code>msquic.dll</code>（从这里构建）并将其与他们的应用程序打包。</p><blockquote><p><strong>Important</strong> This configuration requires running the latest <a href="https://insider.windows.com/en-us/" target="_blank" rel="noopener">Windows Insider Preview Builds</a> for Schannel's TLS 1.3 support.<strong>Important</strong> This configuration does not support 0-RTT due to Schannel's current lack of support.</p></blockquote><h4 id="配置选项">配置选项</h4><p>以下是在 Windows Insider Build 20175 中的 IIS 绑定一个 HTTPS 站点的截图，可以看到如同 HTTP/2 的设置，TLS 1.3 和 QUIC 默认将启用，除非手动勾选禁用。</p><p><img src="/article/QUIC-&amp;-HTTP3-Support/TLSv1.3&amp;QUIC-on-Win10-insider-20175.png" alt="TLSv1.3&amp;amp;QUIC-on-Win10-insider-20175"></p><h3 id="24-apache-httpd">2.4 Apache httpd</h3><p>暂时没有 Apache httpd 支持 HTTP/3 的消息。Apache 目前还没有承诺何时进行相关的支持工作。</p><p><a href="https://www.litespeedtech.com/products/litespeed-web-server" target="_blank" rel="noopener">LiteSpeed is an Apache alternative</a> supporting many of the same features, but <a href="https://www.litespeedtech.com/products/litespeed-web-server" target="_blank" rel="noopener">with strong QUIC and HTTP/3 support</a>.</p><h2 id="3-客户端">3. 客户端</h2><p>参考：</p><p>https://developers.cloudflare.com/http3/intro</p><p>https://quic.nginx.org/README</p><h3 id="31-firefox">3.1 Firefox</h3><p>Firefox 75 及以上版本支持 HTTP/3</p><p>启用方法：在地址栏输入 'about:config'，配置 network.http.http3.enabled = true</p><p>通过 “Web 开发者” 可以看到 “版本:HTTP/3” “协议版本:: TLSv1.3”</p><h3 id="32-chrome-edge">3.2 Chrome、Edge</h3><p>Chrome 83 及以上版本支持 HTTP/3，使用命令行增加如下启动参数：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./chrome --enable-quic --quic-version=h3-27</span><br></pre></td></tr></table></figure></p><p><strong>Running on Windows</strong></p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd C:\Users\$USER\AppData\Local\Google\Chrome\Application</span><br><span class="line">chrome.exe --enable-quic --quic-version=h3-27</span><br></pre></td></tr></table></figure></p><p>(replace $USER with the name of your account on Windows)</p><p><strong>Running on macOS</strong></p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --enable-quic --quic-version=h3-27</span><br></pre></td></tr></table></figure></p><p>Microsoft Edge (based on Chromium) 与 Chrome 同步支持，例如在 macOS 中运行 Edge：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/Applications/Microsoft\ Edge.app//Contents/MacOS/Microsoft\ Edge --enable-quic --quic-version=h3-27</span><br></pre></td></tr></table></figure></p><h3 id="33-curl">3.3 Curl</h3><p>文档显示 Curl <a href="https://daniel.haxx.se/blog/2019/09/11/curl-7-66-0-the-parallel-http-3-future-is-here/" target="_blank" rel="noopener">7.66</a> 及以上支持 HTTP/3，使用 --http3 参数，但实际上需要额外配置才能支持！</p><ul><li><p>Ubuntu 20.04 自带 7.68 但不可直接使用</p></li><li><p>CentOS 8 自带 7.61，更新也不可直接使用：</p></li></ul><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rpm -Uvh http://www.city-fan.org/ftp/contrib/yum-repo/rhel8/x86_64/city-fan.org-release-2-1.rhel8.noarch.rpm</span><br><span class="line">dnf --enablerepo=city-fan.org install libcurl libcurl-devel</span><br></pre></td></tr></table></figure></p><ul><li>macOS 10.15.5 自带 7.64，更新后也不可直接使用：</li></ul><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install curl</span><br><span class="line">ln /usr/local/bin/curl /usr/local/Cellar/curl/7.71.1/bin/curl</span><br><span class="line">chmod +x /usr/local/bin/curl</span><br></pre></td></tr></table></figure></p><p>报错如下：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl --http3 -s -o /dev/null -v https://sysin.org</span><br><span class="line"></span><br><span class="line">curl: option --http3: the installed libcurl version doesn&apos;t support this</span><br><span class="line">curl: try &apos;curl --help&apos; or &apos;curl --manual&apos; for more information</span><br></pre></td></tr></table></figure></p><p>解决办法：创建支持 HTTP/3 的 curl：参看 <a href="https://github.com/curl/curl/blob/master/docs/HTTP3.md" target="_blank" rel="noopener">HTTP3 (and QUIC)</a></p><h4 id="linux-ngtcp2-version-curl-build-with-openssl">Linux: ngtcp2 version curl Build with OpenSSL</h4><p>Build (patched) OpenSSL</p><pre><code>git clone --depth 1 -b OpenSSL_1_1_1d-quic-draft-27 https://github.com/tatsuhiro-t/opensslcd openssl./config enable-tls1_3 --prefix=/usr/local/opensslmakemake install_sw</code></pre><p>Build nghttp3</p><pre><code>cd ..git clone https://github.com/ngtcp2/nghttp3cd nghttp3autoreconf -i./configure --prefix=/usr/local/nghttp3 --enable-lib-onlymakemake install</code></pre><p>Build ngtcp2</p><pre><code>cd ..git clone https://github.com/ngtcp2/ngtcp2cd ngtcp2autoreconf -i./configure PKG_CONFIG_PATH=/usr/local/openssl/lib/pkgconfig:/usr/local/nghttp3/lib/pkgconfig LDFLAGS=&quot;-Wl,-rpath,&lt;somewhere1&gt;/lib&quot; --prefix=/usr/local/ngtcp2makemake install</code></pre><p>Build curl</p><pre><code>cd ..git clone https://github.com/curl/curlcd curl./buildconfLDFLAGS=&quot;-Wl,-rpath,/usr/local/openssl/lib&quot; ./configure --with-ssl=/usr/local/openssl --with-nghttp3=/usr/local/nghttp3 --with-ngtcp2=/usr/local/ngtcp2 --enable-alt-svcmake</code></pre><p>也可以 <a href="https://github.com/curl/curl/blob/master/docs/HTTP3.md#build-with-gnutls" target="_blank" rel="noopener">Build with GnuTLS</a></p><h4 id="macoscurl-quiche">macOS：Curl + Quiche</h4><p>Homebrew formula for curl + quiche to easily build and test HTTP/3 on MacOS.</p><p><strong>Requirement</strong></p><p>Install homebrew from https://brew.sh/</p><p><strong>Build</strong></p><p>This will replace your current curl installation. Run the following commands to install required dependencies and to build curl with quiche support.</p><ul><li>Uninstall curl if you already have:</li></ul><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew remove -f curl</span><br></pre></td></tr></table></figure></p><ul><li>Build curl with quiche:</li></ul><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install -s https://raw.githubusercontent.com/cloudflare/homebrew-cloudflare/master/curl.rb</span><br></pre></td></tr></table></figure></p><p>At the end curl binary will be installed on &quot;/usr/local/opt/curl/bin&quot;, so you need to add to your $PATH</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln /usr/local/opt/curl/bin/curl /usr/local/bin/curl</span><br></pre></td></tr></table></figure></p><p>Check if curl with H3 support is built properly:</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl --help | egrep 'alt-svc|http3'</span><br><span class="line">     --alt-svc &lt;file name&gt; Enable alt-svc with this cache file</span><br><span class="line">     --http3         Use HTTP v3</span><br></pre></td></tr></table></figure></p><p>Now, you can try curl on any H3 enabled sites.</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl --http3 -I https://sysin.org</span><br><span class="line">curl --http3 -I https://cloudflare-quic.com</span><br></pre></td></tr></table></figure></p><h3 id="34-在线检测网站">3.4 在线检测网站</h3><p>https://http3check.net/</p><p>https://gf.dev/http3-test</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;1-引言&quot;&gt;1. 引言&lt;/h2&gt;
&lt;h3 i
      
    
    </summary>
    
    
    
      <category term="HTTP" scheme="http://sysin.org/tags/HTTP/"/>
    
      <category term="F5" scheme="http://sysin.org/tags/F5/"/>
    
      <category term="Nginx" scheme="http://sysin.org/tags/Nginx/"/>
    
      <category term="TLS" scheme="http://sysin.org/tags/TLS/"/>
    
      <category term="IIS" scheme="http://sysin.org/tags/IIS/"/>
    
      <category term="Apache" scheme="http://sysin.org/tags/Apache/"/>
    
  </entry>
  
  <entry>
    <title>如何安装 macOS Big Sur 11.0 Beta 虚机，解决 “BiErrorDomain Error 3.” 报错</title>
    <link href="http://sysin.org/article/Install_macOS_Big_Sur_11.0_Beta_VM_BiErrorDomain_Error_3/"/>
    <id>http://sysin.org/article/Install_macOS_Big_Sur_11.0_Beta_VM_BiErrorDomain_Error_3/</id>
    <published>2020-07-01T02:10:00.000Z</published>
    <updated>2020-08-12T07:44:08.321Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><h2 id="获取官方的-macos-beta-软件包">获取官方的 macOS Beta 软件包</h2><ul><li><p>官网直接下载，双击直接安装：<a href="http://swcdn.apple.com/content/downloads/15/52/001-18401-A_I5FFC1VB5J/rrfxkhkf3ykxzj3zjshu1srsh4n74a41n4/InstallAssistant.pkg" target="_blank" rel="noopener">点击</a></p></li><li><p>下载 <a href="https://betaprofiles.com/macos11" target="_blank" rel="noopener">Beta profile</a>，通过软件更新下载</p></li></ul><p>上述两种方式，都会将 Install macOS Beta.app 放置于 /Applications （应用程序）下面。</p><h2 id="安装方式">安装方式</h2><p>1.升级安装，下载后直接点击 “Install macOS Beta”</p><p>2.在当前系统中全新安装，打开“磁盘工具”，新建一个大约 16G 的 “macOS 扩展（日志式）”分区（非 APFS 卷），命名为Install，执行命令写入：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /Applications/Install\ macOS\ Beta.app/Contents/Resources/createinstallmedia --volume /Volumes/Install</span><br></pre></td></tr></table></figure></p><p>创建完毕后，打开“系统偏好设置...” &gt; “启动磁盘”，选择上述分区，重新启动，安装前抹掉原有系统卷即可全新安装。</p><p>3.创建启动 ISO，用于虚机全新安装：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">hdiutil create -size <span class="number">12</span>G -fs hfs+ -volname macOSInstaller -type SPARSEBUNDLE ~/Desktop/macOSInstaller</span><br><span class="line">hdiutil attach ~/Desktop/macOSInstaller.sparsebundle</span><br><span class="line">sudo /Applications/Install\ macOS\ Beta.app/Contents/Resources/createinstallmedia --volume /Volumes/macOSInstaller --nointeraction</span><br><span class="line">hdiutil detach /Volumes/Install\ macOS\ Beta -force</span><br><span class="line">hdiutil makehybrid -o ~/Desktop/macOSInstaller ~/Desktop/macOSInstaller.sparsebundle</span><br><span class="line">rm -rf ~/Desktop/macOSInstaller.sparsebundle</span><br></pre></td></tr></table></figure></p><p>此时将桌面上的 macOSInstaller.iso 文件挂载到虚机即可开始安装。</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>使用xz压缩文件</span><br><span class="line">cd ~/Desktop</span><br><span class="line">tar -Jcf macOSInstaller.iso.tar.xz macOSInstaller.iso</span><br></pre></td></tr></table></figure></p><h2 id="macos-big-sur-110-兼容设备">macOS Big Sur 11.0 兼容设备</h2><ul><li><strong>1. iMac 2014+</strong></li><li><strong>2. iMac Pro 2017</strong></li><li><strong>3. Mac Pro 2013+</strong></li><li><strong>4. MacMini 2014+</strong></li><li><strong>5. MacBook 2015+</strong></li><li><strong>6. MacBook Air 2013+</strong></li><li><strong>7. MacBook Pro 2013+</strong></li></ul><h2 id="解决-bierrordomain-error-3-报错">解决 “BiErrorDomain Error 3.” 报错</h2><p>在 VMware 中安装 macOS Big Sur，都会提示 “BiErrorDomain Error 3.”，无法继续，需要编辑 vmx 文件添加以下配置：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">smbios.reflectHost = <span class="string">"TRUE"</span></span><br><span class="line">hw.model = <span class="string">"MacBookPro16,1"</span></span><br><span class="line">board-id = <span class="string">"Mac-E1008331FDC96864"</span></span><br></pre></td></tr></table></figure></p><p>以上示例模拟的是 16-inch MacBook Pro，可以根据需要选择其他兼容的 Mac 设备。</p><p>获取 Mac Model ID，执行如下命令</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl hw.model</span><br></pre></td></tr></table></figure></p><p>获取 Mac Board ID，执行如下命令：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ioreg -l | grep board-id</span><br></pre></td></tr></table></figure></p><h2 id="适用的-vmware-软件和版本">适用的 VMware 软件和版本</h2><p>在以下软件和版本中测试通过</p><p>VMware ESXi 7.0.0</p><p>VMware Fusion 11.5.5</p><p>VMware Workstation 11.5.5 Windows x64</p><p>**提示：**不要安装自带的 VM-Tools，可能存在兼容性问题，下载 <a href="https://my.vmware.com/web/vmware/downloads/details?productId=742&amp;downloadGroup=VMTOOLS1110" target="_blank" rel="noopener">VMware Tools 11.1.0</a> 安装。</p><h2 id="使用-virtualbox-安装">使用 VirtualBox 安装</h2><p>使用 VirtualBox 安装 macOS Big Sur Beta，出现 “BiErrorDomain Error 3.” 报错，解决方法类似：</p><p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd “C:\Program Files\Oracle\VirtualBox\”</span><br><span class="line">VBoxManage.exe modifyvm “Your VM Name” –cpuidset <span class="number">00000001</span> <span class="number">000106e5</span> <span class="number">00100800</span> <span class="number">0098e3</span>fd bfebfbff</span><br><span class="line">VBoxManage setextradata “Your VM Name” “VBoxInternal/Devices/efi/<span class="number">0</span>/Config/DmiSystemProduct” “iMac19,<span class="number">1</span>”</span><br><span class="line">VBoxManage setextradata “Your VM Name” “VBoxInternal/Devices/efi/<span class="number">0</span>/Config/DmiSystemVersion” “<span class="number">1.0</span>”</span><br><span class="line">VBoxManage setextradata “Your VM Name” “VBoxInternal/Devices/efi/<span class="number">0</span>/Config/DmiBoardProduct” “Mac-AA95B1DDAB278B95”</span><br><span class="line">VBoxManage setextradata “Your VM Name” “VBoxInternal/Devices/smc/<span class="number">0</span>/Config/DeviceKey” “ourhardworkbythesewordsguardedpleasedontsteal(c)AppleComputerInc”</span><br><span class="line">VBoxManage setextradata “Your VM Name” “VBoxInternal/Devices/smc/<span class="number">0</span>/Config/GetKeyFromRealSMC” <span class="number">1</span></span><br></pre></td></tr></table></figure></p><h2 id="使用-parallels-desktop-安装">使用 Parallels Desktop 安装</h2><p>Set the following values set under <strong>Hardware &gt; Boot Order &gt; Advanced Settings &gt; Boot Flags.</strong></p><ul><li><code>devices.mac_hw_model=&quot;MacBookPro16,1&quot;</code></li><li><code>devices.smbios.board_id=&quot;Mac-E1008331FDC96864&quot;</code></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;获取官方的-macos-beta-软件包&quot;&gt;
      
    
    </summary>
    
    
    
      <category term="Apple" scheme="http://sysin.org/tags/Apple/"/>
    
      <category term="macOS" scheme="http://sysin.org/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>VMware Cloud Director 10 下载</title>
    <link href="http://sysin.org/article/Download-VMware-Cloud-Director-10/"/>
    <id>http://sysin.org/article/Download-VMware-Cloud-Director-10/</id>
    <published>2020-06-18T02:10:00.000Z</published>
    <updated>2020-08-18T05:48:46.337Z</updated>
    
    <content type="html"><![CDATA[<h2 id="什么是-vmware-cloud-director">什么是 VMware Cloud Director？</h2><p>VMware Cloud Director 是一款领先的云计算服务交付平台，一些全球最受欢迎的云服务提供商利用它成功地运维和管理云计算服务业务。云服务提供商使用 VMware Cloud Director 向全球数以千计的企业和 IT 团队安全、高效地交付弹性云计算资源。</p><p>通过我们的<a href="https://cloud.vmware.com/providers" target="_blank" rel="noopener">云服务提供商合作伙伴</a>在云环境中使用 VMware 产品，并<a href="https://cloudsolutions.vmware.com/" target="_blank" rel="noopener">通过 VMware Cloud Director 进行构建</a>。</p><h2 id="功能特性">功能特性</h2><h3 id="多租户资源池化">多租户资源池化</h3><p>基于通用基础架构轻松创建虚拟数据中心，以满足异构企业的需求。策略驱动型方法有助于确保企业拥有独立的虚拟资源、基于角色的独立身份验证以及精细的控制。</p><h3 id="领先的云生态系统">领先的云生态系统</h3><p>遍布全球的多家领先云计算供应商均与 VMware Cloud Director 进行原生集成，支持云服务提供商交付独具特色的客户体验并抓住更多服务商机。</p><h3 id="运维可见性和洞察信息">运维可见性和洞察信息</h3><p>全新的仪表盘和单一窗口提供了集中式多租户云计算管理视图。利用 vRealize Operations 高级分析功能、计费功能以及与 VMware Cloud Director 的原生集成，深入了解企业环境。</p><h3 id="自动化">自动化</h3><p>VMware Cloud Director 与 vRealize Orchestrator、Terraform 和 Cloud Provider Pod 等领先的自动化工具深度集成，支持云服务提供商实现复杂工作流的自动化，并部署各种服务，同时还能保持访问控制和可见性。</p><h3 id="多站点管理">多站点管理</h3><p>跨站点和地理位置延伸数据中心；通过包含多站点聚合视图的直观单一窗口监控资源。</p><h3 id="数据中心延展和云迁移">数据中心延展和云迁移</h3><p>利用 VMware Cloud Director Availability 实现简单安全的虚拟机迁移和数据中心延展。支持真正的混合性、企业驱动型工作流、无缝连接以及冷迁移或热迁移选项。</p><h3 id="容器即服务">容器即服务</h3><p>对于要在同一虚拟数据中心内按需灵活利用容器和虚拟机，并希望缩短将 Kubernetes 投入使用所需时间的企业，VMware Cloud Director 提供了一个捷径。</p><h3 id="计费">计费</h3><p>VMware Cloud Director 可提供成本透明度并落实财务责任，从而帮助 IT 负责人了解并优化顺畅支持业务服务所需的云计算基础架构成本。</p><h2 id="为云服务提供商带来的优势">为云服务提供商带来的优势</h2><h3 id="运维效率">运维效率</h3><p>VMware Cloud Director 支持快速进行 SDDC 调配和 SPOG 管理并提供自助服务功能，从而为团队和企业提供了安全、独立但灵活的资源池。</p><h3 id="竞争优势">竞争优势</h3><p>VMware Cloud Director 为 DevOps 团队提供了一个开放式平台。它带有“Cloud Verified”认证，该认证标志着全球最高水准且具有独特优势的 VMware Cloud Provider。</p><h3 id="能够向开发人员开放">能够向开发人员开放</h3><p>通过 SDK 和编程接口提高 DevOps 的敏捷性。吸引企业程序员在熟悉的多租户环境中的容器上构建并自动执行服务、自定义组织体验以及新一代工作负载。</p><h3 id="盈利">盈利</h3><p>VMware Cloud Director 使云服务提供商能够使用 vRealize Orchestrator 工作流启动新服务，或者利用原生集成的服务功能为企业客户创造更多价值。</p><h3 id="混合性与安全性">混合性与安全性</h3><p>借助与 NSX 的更出色集成，云服务提供商可以预配置数据中心连接，并避免 L2 VPN 手动配置。企业可以跨不同站点在不同 vCenter 中的虚拟数据中心之间延伸网络。NSX-T 的初始集成支持 NFV 工作负载实现了较高的吞吐量和较低的延迟。</p><h3 id="增值服务">增值服务</h3><p>允许第三方开发定制服务，将其集成到通用平台中并向企业公开以供使用，从而提供更加丰富的云体验。优化并扩展您的环境以采纳具有独特优势的增值服务产品，并掌握通过服务实现盈利和收入的最快、最便捷的途径。</p><h2 id="vmware-cloud-director-1011-发行说明">VMware Cloud Director 10.1.1 发行说明</h2><p>VMware Cloud Director 10.1.1 | 2020 年 5 月 28 日 | 内部版本 16288798（已安装内部版本 16282995） 请查看发行说明以了解新增内容及更新。</p><h3 id="新增内容">新增内容</h3><p>VMware Cloud Director 10.1.1 版本引入了对 VMware NSX-T Data Center 3.0、vSAN 7.0 和 VMware vSphere 7.0 的支持。 此版本提供了错误修复，更新了 VMware Cloud Director 设备基本操作系统和 VMware Cloud Director 开源组件。</p><h2 id="vmware-cloud-director-1010-发行说明">VMware Cloud Director 10.1.0 发行说明</h2><p>VMware Cloud Director 10.1 | 2020 年 4 月 9 日 | 内部版本 15967253（已安装内部版本 15967236）</p><p>请查看发行说明以了解新增内容及更新。</p><p>本文档内容</p><ul><li>[本版本的新增内容](https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/rn/VMware-Cloud-Director-101-Release-Notes.html#What's New)</li><li><a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/rn/VMware-Cloud-Director-101-Release-Notes.html#Security" target="_blank" rel="noopener">安全性</a></li><li>[产品支持注意事项](https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/rn/VMware-Cloud-Director-101-Release-Notes.html#Product Support Notices)</li><li>[从先前版本升级](https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/rn/VMware-Cloud-Director-101-Release-Notes.html#Upgrading from Previous Releases)</li><li><a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/rn/VMware-Cloud-Director-101-Release-Notes.html#systemreq" target="_blank" rel="noopener">系统要求和安装说明</a></li><li><a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/rn/VMware-Cloud-Director-101-Release-Notes.html#resolvedissues" target="_blank" rel="noopener">已解决的问题</a></li><li><a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/rn/VMware-Cloud-Director-101-Release-Notes.html#knownissues" target="_blank" rel="noopener">已知问题</a></li></ul><h3 id="本版本的新增内容">本版本的新增内容</h3><ul><li><p>有关本版本的新增功能和更新功能的信息，请参见 VMware 技术白皮书 <a href="https://bit.ly/3aix3br" target="_blank" rel="noopener">VMware vCloud Director 10.1 的新增功能</a>。</p></li><li><p>HTML5 UI 中的行为更改：</p></li></ul><p>在早期的 VMware Cloud Director 版本中，您可以使用 HTML UI 中的 vApp 操作菜单来停止或关闭 vApp 的电源。这两种电源操作都可以取消部署 vApp，但对 vApp 的影响不同。关闭电源操作不会遵循 vApp 中虚拟机的“启动和停止顺序”设置。关闭电源操作还会取消部署所有 vApp 网络，即从组织 VDC 网络断开所有 VM 网卡的连接并移除为 vApp 部署的任何 Edge 网关。</p><p>从 VMware Cloud Director 10.1 开始，对正在运行的 vApp 执行关闭电源操作会关闭该 vApp 中所有虚拟机的电源，而不会取消部署 vApp 和其中的虚拟机。虚拟机的网卡仍然连接到相应的网络，并且所有 vApp Edge 网关仍保持部署状态。vApp 和 vApp 中的虚拟机仍保持部署状态。vApp 中每个虚拟机的关闭电源操作仍保持活动状态，您可以使用该操作关闭虚拟机的电源。此操作会取消部署此虚拟机。</p><p>关闭 vApp 的电源后，关闭电源操作将遵循您在“启动和停止顺序”设置中定义的启动顺序。因此，虚拟机的关闭电源顺序与您配置的虚拟机启动顺序相反。关闭电源操作期间不会应用“停止等待”设置。关闭 vApp 的电源时，vApp 的电源状态（源自 vApp 中的虚拟机的电源状态）显示为“已关闭”。</p><h3 id="安全性">安全性</h3><ul><li>警告：</li></ul><p>升级到版本 10.1 后，VMware Cloud Director 始终会验证与其连接的任何基础架构端点的证书。这是因为 VMware Cloud Director 管理 SSL 证书的方式发生了变化。如果在升级之前未将证书导入到 VMware Cloud Director，则由于 SSL 验证问题，vCenter Server 和 NSX 连接可能会显示连接失败错误。在这种情况下，升级后有两个选择：</p><ol><li>运行单元管理工具 <code>trust-infra-certs</code> 命令，自动连接并检索 vCenter Server 和 NSX Manager 实例的所有基础架构端点的证书并存入集中证书存储。请参见<a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/VMware-Cloud-Director-Install-Configure-Upgrade-Guide/GUID-96E9CD2E-59BB-4B2B-B9F2-E854C7540118.html" target="_blank" rel="noopener">从 vSphere 资源导入端点证书</a>。</li><li>在服务提供商管理门户 UI 中，选择每个 vCenter Server 和 NSX 实例，然后在接受证书时重新输入凭据。</li></ol><ul><li>从版本 10.1 开始，服务提供商和租户可以使用 VMware Cloud Director API 测试与远程服务器的连接，并在 SSL 握手过程中验证服务器身份。为了保护 VMware Cloud Director 网络连接，请配置一个内部主机黑名单，使用 VMware Cloud Director API 进行连接测试的租户无法访问这些主机。在 VMware Cloud Director 安装或升级之后、授予租户 VMware Cloud Director 访问权限之前配置该黑名单。请参见<a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/VMware-Cloud-Director-Install-Configure-Upgrade-Guide/GUID-66221D98-FA64-43EF-B6DF-5C2CED29FE6A.html" target="_blank" rel="noopener">配置测试连接黑名单</a>。</li><li>VMware Cloud Director 10.1 已弃用信任所有 SSL 证书的行为。在此版本中，vCenter Server 和 NSX 连接不支持此选项。对于所有其他连接，已弃用信任所有证书，VMware Cloud Director 10.1 之后的版本将不再受支持。系统管理员必须针对此转换做好准备。</li><li>如果将 LDAP 用于 VMware Cloud Director 系统组织，则可以使用 UI 中的“首次使用时信任”对话框或使用 API 上载证书。</li><li>审核此选项的所有使用情况，并使用 UI 或 API 提供相应的证书。</li><li>将变化传达给租户。使用自定义 LDAP 且启用了<strong>接受所有证书</strong>选项的所有租户都必须逐渐弃用该配置。租户可以使用 UI 中的“首次使用时信任”对话框或通过 API 上载证书。</li></ul><h3 id="更新的开源软件包">更新的开源软件包</h3><ul><li><code>jackson-databind</code> 已更新到版本 2.9.10.1。</li><li><code>jre</code> 已更新到版本 1.8.0u231。</li><li><code>openssl</code> 已更新到版本 1.0.2u。</li><li><code>xstream</code> 已更新到版本 1.4.11.1。</li></ul><h3 id="产品支持注意事项">产品支持注意事项</h3><p>VMware Cloud Director 10.1 不支持 vSphere 7.0 和 NSX-T Data Center 3.0。正在进行互操作性认证，将在 VMware Cloud Director 10.1 的次要修补程序版本中支持 vSphere 7.0 和 NSX-T Data Center 3.0。</p><p>不支持 NSX-T Data Center 中由 VRF-lite 第 0 层网关提供支持的外部网络。</p><h3 id="终止使用和终止支持警告">终止使用和终止支持警告</h3><ul><li>不再支持 SQL Server 数据库。仅支持 PostgreSQL 数据库。</li><li>不再支持使用 Oracle Linux 主机操作系统安装 VMware Cloud Director 应用程序。</li><li>不支持 VMware Cloud Director API 版本 29 及更低版本。</li><li>VMware Cloud Director API 版本 30.0 已弃用，且在 VMware Cloud Director 10.1 后将不再受支持。</li><li>VMware Cloud Director API 版本 31.0 已弃用。</li><li>基于 Flex 的 UI 已从产品中移除，不再受支持。</li><li>在 VMware Cloud Director API 版本 33.0/VMware Cloud Director 10.0 中已弃用 <code>/api/sessions</code> API 登录端点，在未来的 VMware Cloud Director 版本中将不再提供支持。您可以使用单独的 VMware Cloud Director OpenAPI 登录端点以便服务提供商和租户访问 VMware Cloud Director。</li><li>已针对 HTTP 和 HTTPS 协议弃用 API <code>/cloud/server_status</code>，并且将在未来版本中移除。您必须为 HTTP 和 HTTPS 协议使用 <code>/api/server_status</code>。</li><li>由于 VMware Cloud Director 10.1 存储和处理 SSL 证书的方式，已从 VMware Cloud Director API 版本 34.0 中移除重置操作 <code>/ldap/action/resetLdapCertificate</code> 和 <code>/ldap/action/resetLdapKeyStore</code>。您必须使用 <code>/cloudapi/1.0.0/ssl/trustedCertificates</code> 端点取消信任证书。</li><li>已弃用更新操作 <code>/ldap/action/updateLdapCertificate</code> 和 <code>/ldap/action/updateLdapKeyStore</code>，未来版本中将不会再提供支持。VMware Cloud Director 引入了一个新端点，用于信任 LDAP 证书 <code>/cloudapi/1.0.0/ssl/trustedCertificates</code>。</li><li>vSphere 已弃用 vSphere SSO 作为 SAML IDP。配置为使用 vSphere SSO 作为其 SAML IDP 的所有 VMware Cloud Director 部署都必须迁移到其他外部 SAML IDP。未来的 vSphere 和 VMware Cloud Director 版本将不支持使用此 IDP。</li><li>不再支持 DSA 和 DSS 证书，因为它们没有建议的密码套件可用。</li></ul><h3 id="即将终止支持通知">即将终止支持通知</h3><ul><li>VMware Cloud Director API 34.0 (VMware Cloud Director 10.1) 包含正加速弃用的 API，将在未来版本中移除。请参见<a href="http://code.vmware.com/docs/11831/vmware-cloud-director-api-programming-guide" target="_blank" rel="noopener">《VMware Cloud Director API 编程指南》</a>。</li></ul><h3 id="从先前版本升级">从先前版本升级</h3><p>有关升级到 VMware Cloud Director 10.1、升级和迁移途径以及工作流的详细信息，请参见<a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/VMware-Cloud-Director-Install-Configure-Upgrade-Guide/GUID-BC45668F-83B4-4FC9-9E2D-025AA82B61DF.html" target="_blank" rel="noopener">升级和迁移 VMware Cloud Director 设备</a>或<a href="https://docs.vmware.com/cn/VMware-Cloud-Director/10.1/VMware-Cloud-Director-Install-Configure-Upgrade-Guide/GUID-6EC093C1-4CE7-4435-9FC5-F801EA618D91.html" target="_blank" rel="noopener">在 Linux 上升级 vCloud Director</a>。</p><h2 id="系统要求和安装说明">系统要求和安装说明</h2><h3 id="端口和协议">端口和协议</h3><p>有关 VMware Cloud Director 10.1 使用的网络端口和协议的信息，请参见 <a href="https://ports.vmware.com/home/VMware-Cloud-Director" target="_blank" rel="noopener">VMware 端口和协议</a>。</p><h3 id="兼容性列表">兼容性列表</h3><p>有关以下内容的最新信息，请参见 <a href="http://partnerweb.vmware.com/comp_guide/sim/interop_matrix.php" target="_blank" rel="noopener">VMware 产品互操作性列表</a>：</p><ul><li>VMware Cloud Director 与其他 VMware 平台的互操作性</li><li>支持的 VMware Cloud Director 数据库</li></ul><h3 id="支持的-vmware-cloud-director-服务器操作系统">支持的 VMware Cloud Director 服务器操作系统</h3><ul><li>CentOS 6</li><li>CentOS 7</li><li>Red Hat Enterprise Linux 6</li><li>Red Hat Enterprise Linux 7</li></ul><h3 id="支持的-amqp-服务器">支持的 AMQP 服务器</h3><p>VMware Cloud Director 使用 AMQP 提供扩展服务、对象扩展和通知所使用的消息总线。此版本的 VMware Cloud Director 需要 RabbitMQ 版本 3.7.9 或 3.8.2</p><p>有关详细信息，请参见《VMware Cloud Director 安装、配置和升级指南》。</p><h3 id="支持的-用于存储历史衡量指标数据的数据库">支持的、用于存储历史衡量指标数据的数据库</h3><p>您可以将 VMware Cloud Director 安装配置为存储 VMware Cloud Director 收集的有关虚拟机性能和资源使用情况的衡量指标。历史衡量指标数据存储在 Cassandra 数据库中。VMware Cloud Director 支持 Cassandra 版本 3.x。</p><p>有关详细信息，请参见《VMware Cloud Director 安装、配置和升级指南》。</p><h3 id="磁盘空间要求">磁盘空间要求</h3><p>每个 VMware Cloud Director 服务器需要大约 2100 MB 可用空间来执行安装和存放日志文件。</p><h3 id="内存要求">内存要求</h3><p>有关内存要求，请参阅《VMware Cloud Director 安装、配置和升级指南》</p><h3 id="cpu-要求">CPU 要求</h3><p>VMware Cloud Director 是受 CPU 限制的应用程序。应遵循相应 vSphere 版本的 CPU 过度分配准则。在虚拟化环境中，无论 VMware Cloud Director 可用的内核有多少，vCPU 与物理 CPU 的比率都必须合理，以免导致极端的过量分配。</p><h3 id="需要的-linux-软件包">需要的 Linux 软件包</h3><p>每个 VMware Cloud Director 服务器必须安装几个常见的 Linux 软件包。默认情况下，这些软件包通常与操作系统软件一起安装。如果缺少任何软件包，则安装程序将会失败，并返回诊断消息。</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alsa-lib bash chkconfig coreutils findutils glibc grep initscripts krb5-libs libgcc</span><br><span class="line"></span><br><span class="line">libICE libSM libstdc++ libX11 libXau libXdmcp libXext libXi libXt libXtst</span><br><span class="line"></span><br><span class="line">module-init-tools net-tools pciutils procps redhat-lsb sed tar wget which</span><br></pre></td></tr></table></figure></p><p>除了安装程序需要的软件包之外，配置网络连接和创建 SSL 证书的几个过程还需要使用 Linux bind-utils 软件包提供的 Linux <code>nslookup</code> 命令。</p><h3 id="受支持的-ldap-服务器">受支持的 LDAP 服务器</h3><p>您可以从以下 LDAP 服务将用户和组导入到 VMware Cloud Director。</p><table><thead><tr><th>平台</th><th>LDAP 服务</th><th>验证方法</th></tr></thead><tbody><tr><td>Windows Server 2012</td><td>Active Directory</td><td>Simple、Simple SSL</td></tr><tr><td>Windows Server 2016</td><td>Active Directory</td><td>Simple、Simple SSL</td></tr><tr><td>Linux</td><td>OpenLDAP</td><td>Simple、Simple SSL</td></tr></tbody></table><h3 id="支持的安全协议和密码套件">支持的安全协议和密码套件</h3><p>VMware Cloud Director 需要安全的客户端连接。SSL 版本 3 及 TLS 版本 1.0 和 1.1 已知存在严重的安全漏洞，已不再包含在服务器进行客户端连接时使用的默认协议集中。系统管理员可以启用更多的协议和密码套件。请参见《VMware Cloud Director 安装、配置和升级指南》中的“单元管理工具”部分。支持以下安全协议：</p><ul><li>TLS 版本 1.2</li><li>TLS 版本 1.1（默认情况下禁用）</li><li>TLS 版本 1.0（默认情况下禁用）</li></ul><p>默认启用的受支持密码套件：</p><ul><li>TLS_RSA_WITH_AES_256_GCM_SHA384</li><li>TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</li><li>TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</li><li>TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</li><li>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256</li><li>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</li><li>TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</li><li>TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</li><li>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</li><li>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</li><li>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</li></ul><p>系统管理员可以使用单元管理工具显式启用默认禁用的其他受支持密码套件。</p><p>**注意：**与 vCenter Server 5.5-update-3e 之前的版本以及 <code>ovftool</code> 4.2 之前的版本互操作要求 VMware Cloud Director 支持 TLS 版本 1.0。您可以使用单元管理工具重新配置受支持的 SSL 协议或密码集。请参见《VMware Cloud Director 安装、配置和升级指南》中的“单元管理工具”部分。</p><h3 id="支持的浏览器">支持的浏览器</h3><p>VMware Cloud Director 与以下浏览器的当前主要版本和上一主要版本兼容。</p><ul><li>Google Chrome</li><li>Mozilla Firefox</li><li>Microsoft Edge</li><li>Microsoft Internet Explorer 11</li></ul><h3 id="支持的客户机操作系统和虚拟硬件版本">支持的客户机操作系统和虚拟硬件版本</h3><p>对于支持每个资源池的 ESXi 主机，VMware Cloud Director 支持此类 ESXi 主机支持的所有客户机操作系统和虚拟硬件版本。</p><h3 id="vmware-cloud-director-webmks-211">VMware Cloud Director WebMKS 2.1.1</h3><p>VMware Cloud Director WebMKS 2.1.1 控制台增加了以下支持：</p><ul><li>Google Chrome 和 Mozilla Firefox for Windows 中的 PrintScreen 键。</li><li>Windows 和 macOS 中的 Windows 键。要模拟按 Windows 键，请在 Windows 操作系统中按 Ctrl+Windows，或在 macOS 中按 Ctrl+Command。</li><li>Google Chrome 和 Mozilla Firefox 中的自动键盘布局检测。</li></ul><h2 id="下载链接">下载链接</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">10.1.0，链接: https://pan.baidu.com/s/1137ogDXNpddZHzwdl6TfHQ  密码: jr6e</span><br><span class="line">10.1.1，链接: https://pan.baidu.com/s/19lX67IR1VBWZGnPUrKrSuA  密码: dao3</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;什么是-vmware-cloud-director&quot;&gt;什么是 VMware Cloud Director？&lt;/h2&gt;
&lt;p&gt;VMware Cloud Director 是一款领先的云计算服务交付平台，一些全球最受欢迎的云服务提供商利用它成功地运维和管理云计算服务业
      
    
    </summary>
    
    
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
      <category term="VMware" scheme="http://sysin.org/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>VMware Cloud Director Availability 4.0 下载</title>
    <link href="http://sysin.org/article/Download-VMware-Cloud-Director-Availability-4/"/>
    <id>http://sysin.org/article/Download-VMware-Cloud-Director-Availability-4/</id>
    <published>2020-06-15T02:10:00.000Z</published>
    <updated>2020-08-18T05:45:13.893Z</updated>
    
    <content type="html"><![CDATA[<p>VMware Cloud Director Availability™ 4.0 | 2 JUN 2020 | Build 16295568</p><h2 id="概述">概述</h2><p><strong>提供统一纳管、迁移和灾难恢复</strong></p><p>VMware Cloud Director Availability 是一款功能强大的解决方案，旨在“向”多租户 VMware 云环境或在这些云环境“之间”提供简单、安全且经济高效的<strong>纳管</strong>、<strong>迁移</strong>和<strong>灾难恢复服务</strong>。</p><p><img src="https://www.vmware.com/content/vmware/vmware-published-sites/cn/products/cloud-director-availability/_jcr_content/parcontainer/image_copy.img.jpg/1591098118484.jpg" alt="vmw-vca-tri-icon"></p><h2 id="优势">优势</h2><p><strong>简单、经济高效的灾难恢复和迁移</strong></p><h3 id="简单">简单</h3><p>实现基于熟悉工具而构建的一致管理功能，该管理方式综合了以前三个解决方案的功能：vCloud Availability for VMware Cloud Director 2.0、vCloud Availability Cloud-to-Cloud DR 1.5 和 VMware Cloud Director Extender 1.1。简单性则得益于现代化的 HTML-5 界面、与 VMware Cloud Director 的原生集成、新的快速设备部署模式以及面向租户和服务提供商的单个基于角色的访问控制 (RBAC) 门户。</p><h3 id="经济高效">经济高效</h3><p>从基于订阅且价格具有竞争力的解决方案中受益，该解决方案设计的核心功能可最大限度降低成本，而紧密集成则可降低运维开销。通过源自 VMware vSphere Replication 的存储独立性、租户自助式保护、故障转移和故障恢复工作流以及基于虚拟机或 vApp 的精细控制，可提高灵活性并提供更具吸引力的经济效益。</p><h3 id="集成">集成</h3><p>作为 VMware Cloud Provider 平台的一部分，VMware vCloud Availability 经过全新设计，极大地简化了云环境的纳管，实现了经济高效的可用性和恢复能力，并为云服务提供商及其终端客户提供安全运维。该解决方案与 VMware Cloud Director 紧密集成，可为基于 VMware Cloud Director 的云环境提供灾难恢复、纳管和迁移功能。</p><h3 id="保护">保护</h3><p>由于具备 VMware 软件体系的内置安全性，包括对静态数据和动态数据的加密，因此用户可以自信地部署安全解决方案。此外，该解决方案还提供对复制流量的内置压缩以及端到端 TLS 加密。</p><h2 id="新特性">新特性</h2><p>VMware Cloud Director Availability 4.0 introduces the following new features:</p><ul><li><strong><a href="https://docs.vmware.com/en/VMware-Cloud-Director-Availability/4.0/VMware-Cloud-Director-Availability-40-User-Guide/GUID-133E56BD-FCCA-45EC-892B-A95239BDE7E3.html" target="_blank" rel="noopener">Storage reporting</a></strong>: VMware Cloud Director Availability now shows the disk space used by  each virtual machine replication and aggregates the disk usage  information per organization. You can monitor the disk usage for every  replication in all directions. You can also monitor the disk usage for  every organization.</li><li><strong><a href="https://docs.vmware.com/en/VMware-Cloud-Director-Availability/4.0/VMware-Cloud-Director-Availability-40-Admin-Guide/GUID-7B9F5EE1-EE09-4DC3-B3F8-4A46D5A37C59.html" target="_blank" rel="noopener">Event notifications</a></strong>: You can now monitor the event notifications that VMware Cloud Director  Availability generates either by using a syslog server or in VMware  Cloud Director by monitoring the VMware Cloud Director Availability  events.</li><li><strong><a href="https://docs.vmware.com/en/VMware-Cloud-Director-Availability/4.0/VMware-Cloud-Director-Availability-40-User-Guide/GUID-C80FBDAD-3FB7-4973-B7D7-DCA5C063872D.html" target="_blank" rel="noopener">Bandwidth throttling</a></strong>: You can now configure a limit for the replication data traffic from the on-premises to cloud sites. You can also set a global limit in VMware  Cloud Director Availability for the total incoming replication traffic  from all cloud sites.</li><li><strong>Public API</strong> <strong>enhancements</strong> for  tenant onboarding, storage, network, and usage reporting: VMware Cloud  Director Availability now provides public APIs that help to onboard  tenants, see the storage usage, the network settings, and the compute  resource usage of the replications.</li><li><strong><a href="https://docs.vmware.com/en/VMware-Cloud-Director-Availability/4.0/VMware-Cloud-Director-Availability-40-Admin-Guide/GUID-6458FFAF-280C-408E-B310-11B8F5A06FD0.html" target="_blank" rel="noopener">Multi-NIC support</a></strong>: After completing a VMware Cloud Director Availability appliance  deployment, you can now modify the network settings of the appliance by  using the appliance management interface that now supports multiple  Network Interface Cards (NICs).</li><li><strong><a href="https://docs.vmware.com/en/VMware-Cloud-Director-Availability/4.0/VMware-Cloud-Director-Availability-40-User-Guide/GUID-89992A32-DE7B-41B3-86DB-1B62C2A3CA7B.html" target="_blank" rel="noopener">SLA profiles</a></strong>: You can now define and control the following Service Level Agreement  (SLA) replications settings: Recovery Point Objective (RPO), retention  policy for the point-in-time instances, quiescing, compression, and  initial synchronization time by using SLA profiles that can be assigned  to organizations.</li><li><strong>Improved user interface</strong> for a better usability  and efficiency: VMware Cloud Director Availability now provides easier  replication management and overview of the tasks by simplifying the  management interface.</li><li><strong><a href="https://docs.vmware.com/en/VMware-Cloud-Director-Availability/4.0/VMware-Cloud-Director-Availability-40-User-Guide/GUID-B9F8F504-DACB-4709-8997-A4E052413885.html" target="_blank" rel="noopener">Resource requirements</a></strong>: VMware Cloud Director Availability now shows the compute resource  requirements of the replications that are required on a failover. This  information provides the required destination capacity, the virtual CPU, and memory resources to fail over the protected workloads successfully  to the destination site.</li><li><strong>Live disk resizing in vSphere 7.0</strong>: In the  source site with vCenter Server 7.0 and ESXi 7.0, when resizing the disk of the source virtual machine, VMware Cloud Director Availability now  automatically resizes the protected virtual machine disk in the  destination site, running any supported vSphere version. The existing  replication instances are retained. Failover and Test Failover are  supported from any instance, before and after the disk resizing. Until  the replication instances before the resizing expire, the replica files  continue to take the additional storage space. To save the storage  space, you can remove the old replication instances or change the  retention policy.</li><li><strong><a href="https://docs.vmware.com/en/VMware-Cloud-Director-Availability/4.0/VMware-Cloud-Director-Availability-40-User-Guide/GUID-7CAAA23D-EFBF-4CFB-A728-4023242172DC.html" target="_blank" rel="noopener">Stored instances</a></strong>: To restore a workload to a previous state, you can use point-in-time or stored instances. To avoid the automatic retention of point-in-time  instances, now you can store particular point-in-time instances. The  stored instances do not change and you can use them to recover the  workload to the stored instance, regardless of the overall retention  period of the point-in-time instances.</li><li><strong>VMware Cloud Director</strong> <strong>context-menu integration</strong>: Protected vApps and virtual machines now have a protection indicator badge in the interface of VMware Cloud Director. The protection badge is visible to  providers in VMware Cloud Director with VMware Cloud Director  Availability 4.0 in the source and in the destination cloud site. Also,  you can now use a VMware Cloud Director Availability context menu for  the vApps and virtual machines directly from the VMware Cloud Director  interface. The context menu allows you to start a new replication  quickly. Tenants with policy that does not allow replications now see a  VMware Cloud Director Availability plug-in with steps to enable the  service. The steps are similar to the steps in the VMware Cloud Director Availability vSphere plug-in, without showing the service providers  list.</li><li><strong>Interoperability with NSX-T</strong>: In on-premises  sites and in cloud sites, you can now replicate workloads that use NSX-T 2.5.0 and NSX-T 2.5.1 networks. You can also use environments with  mixed NSX-V and NSX-T networks, and you can replicate workloads  from NSX-V to NSX-T and from NSX-T to NSX-V. VMware Cloud Director  Availability does not apply or translate the networking features that  the latest VMware Cloud Director 10.1.1 and NSX-T 2.5.1 do not  support. VMware Cloud Director Availability replicates the source  site NSX-V to NSX-T NAT-routed vApp networks as bridged vApp networks,  and does not replicate the DHCP service.</li><li><strong>VMware vCloud Usage Meter integration</strong>: There is an indication in the management interface that vCloud Usage Meter  meters the Cloud Service instance. When vCloud Usage Meter has not  requested metering information for more than three days, you now see a  warning message in the management interface. To collect product  consumption data and generate reports for the VMware Cloud Provider Program, see <a href="https://docs.vmware.com/en/vCloud-Usage-Meter/4.2/Using-and-Managing-vCloud-Usage-Meter/GUID-7C778B16-299C-477B-8D99-C3B753DA8042.html" target="_blank" rel="noopener">How do I add VMware Cloud Director Availability for metering</a> in the vCloud Usage Meter documentation.</li></ul><h2 id="品牌重塑">品牌重塑</h2><p>Since June 2020, vCloud Availability changed its product name to  VMware Cloud Director Availability. In the following table you can see  the new appliances names and the new services names:</p><table><thead><tr><th><strong>VMware vCloud Availability</strong></th><th><strong>VMware Cloud Director Availability</strong></th><th></th><th></th></tr></thead><tbody><tr><td>Previous Appliance Name</td><td>Previous Service Name</td><td>New Appliance Name</td><td>New Service Name</td></tr><tr><td>vCloud Availability Replication Management Appliance</td><td>vCloud Availability vApp Replication Manager</td><td>Cloud Replication Management Appliance</td><td>Cloud Service</td></tr><tr><td>vCloud Availability Replication Manager</td><td>Manager Service</td><td></td><td></td></tr><tr><td>vCloud Availability Cloud Replicator Appliance</td><td>vCloud Availability Replicator</td><td>Cloud Replicator Appliance</td><td>Replicator Service</td></tr><tr><td>vCloud Availability Cloud Tunnel Appliance</td><td>vCloud Availability Tunnel</td><td>Cloud Tunnel Appliance</td><td>Tunnel Service</td></tr><tr><td>vCloud Availability On-Premises Appliance</td><td></td><td>VMware Cloud Director Availability On-Premises Appliance</td><td></td></tr></tbody></table><h2 id="下载地址">下载地址</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">链接: https://pan.baidu.com/s/1EeNVIXoBgLfEEnt1sBDO3Q  密码: joam</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;VMware Cloud Director Availability™ 4.0 | 2 JUN 2020 | Build 16295568&lt;/p&gt;
&lt;h2 id=&quot;概述&quot;&gt;概述&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;提供统一纳管、迁移和灾难恢复&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;V
      
    
    </summary>
    
    
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
      <category term="VMware" scheme="http://sysin.org/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>iOS 如何去除软件更新标记（数字1角标）</title>
    <link href="http://sysin.org/article/iPhone_iOS_%E5%A6%82%E4%BD%95%E5%8E%BB%E9%99%A4%E6%9B%B4%E6%96%B0%E6%A0%87%E8%AE%B0/"/>
    <id>http://sysin.org/article/iPhone_iOS_%E5%A6%82%E4%BD%95%E5%8E%BB%E9%99%A4%E6%9B%B4%E6%96%B0%E6%A0%87%E8%AE%B0/</id>
    <published>2020-06-11T02:10:00.000Z</published>
    <updated>2020-08-12T07:43:59.871Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><p>描述文件下载地址：https://betaprofiles.com/ 或者 https://www.ibeta.me/</p><p>手机上用safari浏览器打开上面两个网址中的任意一个，选择“<a href="https://betaprofiles.com/#block" target="_blank" rel="noopener">Block Update</a>”或者“屏蔽OTA更新”，根据提示安装即可。</p><h2 id="ios-13">iOS 13</h2><h3 id="描述文件可用">描述文件可用</h3><p>直接安装描述文件屏蔽更新，无需重启，检查更新即可去除。</p><p>也适用于watchOS 6+，当然也适用于iPadOS 13+</p><h3 id="描述文件不可用">描述文件不可用</h3><p>描述文件不适用的解决办法：WiFi+充电，系统自动下载更新，然后删除更新文件，重启系统，标记即可消失。</p><p>在路由器上屏蔽iOS更新网址：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 mesu.apple.com</span><br><span class="line">127.0.0.1 appldnld.apple.com</span><br><span class="line">127.0.0.1 swscan.apple.com</span><br><span class="line">127.0.0.1 xp.apple.com</span><br><span class="line">127.0.0.1 gdmf.apple.com</span><br><span class="line">127.0.0.1 updates-http.cdn-apple.com</span><br></pre></td></tr></table></figure></p><h2 id="ios-12">iOS 12</h2><h3 id="描述文件可用">描述文件可用</h3><p>安装描述文件屏蔽更新，需要重启。此时已经屏蔽更新，不过更新标记任然存在。</p><p>通过以下方法去除标记：</p><p>方法一：设置--通用--还原--还原所有设置（需要重新配置的东西比较多：网络、指纹面部识别等等，iCloud设置和屏幕布局等会保留）</p><p>方法二：退出iCloud登录，还原网络设置（可能需要），标记可以去除，重新登录iCloud（如果还原网络需要重新设置的只有WiFi等，比较少）</p><h3 id="描述文件不可用">描述文件不可用</h3><p>通过以下方法去除标记：</p><p>方法一：设置--通用--还原--还原所有设置（需要重新配置的东西比较多：屏幕布局、网络、指纹面部识别等等）</p><p>方法二：退出iCloud登录，还原网络设置（可能需要），标记可以去除，重新登录iCloud（如果还原网络需要重新设置的只有WiFi等，比较少）</p><p>在路由器上屏蔽iOS更新网址：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 mesu.apple.com</span><br><span class="line">127.0.0.1 appldnld.apple.com</span><br><span class="line">127.0.0.1 swscan.apple.com</span><br><span class="line">127.0.0.1 xp.apple.com</span><br><span class="line">127.0.0.1 gdmf.apple.com</span><br><span class="line">127.0.0.1 updates-http.cdn-apple.com</span><br></pre></td></tr></table></figure></p><blockquote><p>备注：描述文件不可用时，iOS 13的方法有小伙伴反馈也适用于iOS 12，未经验证。</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;描述文件下载地址：https://betaprofil
      
    
    </summary>
    
    
    
      <category term="Apple" scheme="http://sysin.org/tags/Apple/"/>
    
      <category term="iOS" scheme="http://sysin.org/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>macOS Catalina 10.15.5 正式版 下载 百度网盘 6月1日 补充更新</title>
    <link href="http://sysin.org/article/Download-macOS-Catalina-10.15.5-0601-update/"/>
    <id>http://sysin.org/article/Download-macOS-Catalina-10.15.5-0601-update/</id>
    <published>2020-06-02T02:10:00.000Z</published>
    <updated>2020-08-03T05:32:24.672Z</updated>
    
    <content type="html"><![CDATA[<p><strong>macOS Catalina 10.15.5 = (19F101) 06/01/2020</strong></p><blockquote><p>下载链接: https://pan.baidu.com/s/15v1Mnx4T8oEB5KOOzMj80Q  密码: rlnk</p></blockquote><p><img src="https://img-blog.csdnimg.cn/20200603114922665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25ldGdj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>基于MAS原版app制作，安全无添加，无任何logo。</p><p>看来是封堵了unc0ver jailbreak tool。</p><p><a href="https://support.apple.com/en-us/HT211215" target="_blank" rel="noopener">macOS Catalina 10.15.5 Supplemental Update, Security Update 2020-003 High Sierra</a></p><p>Released June 1, 2020</p><p>Kernel</p><p>Available for: macOS High Sierra 10.13.6, macOS Catalina 10.15.5</p><p>Impact: An application may be able to execute arbitrary code with kernel privileges</p><p>Description: A memory consumption issue was addressed with improved memory handling.</p><p>CVE-2020-9859: unc0ver</p><p>Published Date: June 01, 2020</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;macOS Catalina 10.15.5 = (19F101) 06/01/2020&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;下载链接: https://pan.baidu.com/s/15v1Mnx4T8oEB5KOOzMj80Q  
      
    
    </summary>
    
    
    
      <category term="Apple" scheme="http://sysin.org/tags/Apple/"/>
    
      <category term="macOS" scheme="http://sysin.org/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>TLS Server Name Indication (TLS SNI) Support</title>
    <link href="http://sysin.org/article/TLS-SNI-Support/"/>
    <id>http://sysin.org/article/TLS-SNI-Support/</id>
    <published>2020-06-01T02:10:12.000Z</published>
    <updated>2020-08-12T07:43:19.112Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><p>TLS Server Name Indication (TLS SNI)，used when a single virtual IP server needs to host multiple domains.</p><p>TLS SNI Support 即一个 IP 地址上支持多个域名的 SSL 站点，或者说一个 IP 上支持绑定多个 SSL 证书。</p><h2 id="支持-tls-sni-的浏览器">支持 TLS SNI 的浏览器</h2><p>Browsers/clients with support for TLS server name indication:</p><ul><li>Opera 8.0 and later (the TLS 1.1 protocol must be enabled)</li><li>Internet Explorer 7 or later (under Windows Vista and later only, not under Windows XP)</li><li>Firefox 2.0 or later</li><li>Curl 7.18.1 or later (when compiled against an SSL/TLS toolkit with SNI support)</li><li>Chrome 6.0 or later (on all platforms - releases up to 5.0 only on specific OS versions)</li><li>Safari 3.0 or later (under OS X 10.5.6 or later and under Windows Vista and later)</li></ul><p>To find out if your browser supports SNI, you can go to https://alice.sni.velox.ch/.</p><h2 id="f5-big-ip-tls-sni-support">F5 BIG-IP TLS SNI Support</h2><ul><li>版本支持</li></ul><p>主流支持版本（v11.6及以上）都可以支持，参看官方文档：<a href="https://techdocs.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-ssl-administration-11-6-0/5.html" target="_blank" rel="noopener">v11.6</a>，<a href="https://techdocs.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-system-ssl-administration-12-1-1/5.html" target="_blank" rel="noopener">v12.1</a>，<a href="https://techdocs.f5.com/kb/en-us/products/big-ip_ltm/manuals/product/bigip-ssl-administration-13-1-0/5.html" target="_blank" rel="noopener">v13.1</a></p><ul><li>配置要点</li></ul><p>参看：<a href="https://support.f5.com/csp/article/K13452" target="_blank" rel="noopener">K13452</a></p><p>分别创建多个域名的（Client or Server）SSL Profile</p><p>Server Name，分别填写域名（可选），如 www.a.com，支持通配符 *.a.com 也支持 * 代表任意域名，另外一个如 www.b.com</p><p>Default SSL Profile for SNI，其中一个域名需要勾选作为默认</p><p>Virtual Servers 的 SSL Profile（Client or Server）同时选择上述创建的多个 SSL Profile</p><p>注意：在 BIG-IP 13.x 及以前版本，多个 SSL Profile 的 Ciphers 和 Client Authentication 属性需要配置一致（14.x 及以后版本无此要求）</p><ul><li>iRules</li></ul><p>另外请注意，没有自动机制允许 BIG-IP 根据在客户端 SSL Hello 消息中接收到的 “Server Name” 值来选择 SSL Profile。</p><p>不过，在 iRule 的额外帮助下，您可以根据从客户机收到的初始 HTTP 请求中接收的“主机名”报头值强制选择正确的 serverssl profile。</p><p><figure class="highlight tcl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">when HTTP_REQUEST &#123;</span><br><span class="line">    <span class="keyword">set</span> hostname [getfield [HTTP::host] <span class="string">":"</span> <span class="number">1</span>]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">when SERVER_CONNECTED &#123;</span><br><span class="line">    <span class="keyword">switch</span> -<span class="keyword">glob</span> [<span class="keyword">string</span> tolower $hostname] &#123;</span><br><span class="line">    <span class="string">"siteA.com"</span> &#123;</span><br><span class="line">        SSL::profile serverssl-siteA</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">"siteB.com"</span> &#123;</span><br><span class="line">        SSL::profile serverssl-siteB</span><br><span class="line">    &#125;</span><br><span class="line">    default &#123;</span><br><span class="line"><span class="comment">    #default serversssl profile to be selected if Host header value cannot be matched with predefined values</span></span><br><span class="line">        SSL::profile serverssl</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="nginx-tls-sni-support">Nginx TLS SNI Support</h2><ul><li>版本支持</li></ul><p>参看<a href="https://nginx.org/en/docs/http/configuring_https_servers.html" target="_blank" rel="noopener">官方文档</a></p><p>OpenSSL supports SNI since 0.9.8f version if it was built with config option “--enable-tlsext”. Since OpenSSL 0.9.8j this option is enabled by default. If nginx was built with SNI support, then nginx will show this when run with the “-V” switch:</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ nginx -V</span><br><span class="line">...</span><br><span class="line">TLS SNI support enabled</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p><p>Nginx 0.x 版本已经支持 TLS SNI</p><blockquote><ul><li>The SNI support status has been shown by the “-V” switch since 0.8.21 and 0.7.62.</li><li>The <code>ssl</code> parameter of the <a href="https://nginx.org/en/docs/http/ngx_http_core_module.html#listen" target="_blank" rel="noopener">listen</a> directive has been supported since 0.7.14. Prior to 0.8.21 it could only be specified along with the <code>default</code> parameter.</li><li>SNI has been supported since 0.5.23.</li><li>The shared SSL session cache has been supported since 0.5.6.</li><li>Version 1.9.1 and later: the default SSL protocols are TLSv1, TLSv1.1, and TLSv1.2 (if supported by the OpenSSL library).</li><li>Version 0.7.65, 0.8.19 and later: the default SSL protocols are SSLv3, TLSv1, TLSv1.1, and TLSv1.2 (if supported by the OpenSSL library).</li><li>Version 0.7.64, 0.8.18 and earlier: the default SSL protocols are SSLv2, SSLv3, and TLSv1.</li><li>Version 1.0.5 and later: the default SSL ciphers are “<code>HIGH:!aNULL:!MD5</code>”.</li><li>Version 0.7.65, 0.8.20 and later: the default SSL ciphers are “<code>HIGH:!ADH:!MD5</code>”.</li><li>Version 0.8.19: the default SSL ciphers are “<code>ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM</code>”.</li><li>Version 0.7.64, 0.8.18 and earlier: the default SSL ciphers are“<code>ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP</code>”.</li></ul></blockquote><ul><li>一般配置方法</li></ul><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">http &#123;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       443 ssl http2;</span><br><span class="line">        server_name  a.sysin.org;</span><br><span class="line">        ssl_certificate     a.sysin.org.crt;</span><br><span class="line">        ssl_certificate_key a.sysin.org.key;</span><br><span class="line">        ssl_protocols       TLSv1.2 TLSv1.3;</span><br><span class="line">        ssl_ciphers 'AES128+EECDH:AES128+EDH';</span><br><span class="line">        add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";</span><br><span class="line"></span><br><span class="line">        charset utf-8;</span><br><span class="line">        #access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /usr/share/nginx/html;</span><br><span class="line">            index  index.php index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    server &#123;</span><br><span class="line">        listen       443 ssl http2;</span><br><span class="line">        server_name  b.sysin.org;</span><br><span class="line">        ssl_certificate     b.sysin.org.crt;</span><br><span class="line">        ssl_certificate_key b.sysin.org.key;</span><br><span class="line">        ssl_protocols       TLSv1.2 TLSv1.3;</span><br><span class="line">        ssl_ciphers 'AES128+EECDH:AES128+EDH';</span><br><span class="line">        add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";</span><br><span class="line"></span><br><span class="line">        charset utf-8;</span><br><span class="line">        #access_log  /var/log/nginx/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /usr/share/nginx/html;</span><br><span class="line">            index  index.php index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="iis-tsl-sni-support">IIS TSL SNI Support</h2><p>参看<a href="https://docs.microsoft.com/en-us/iis/get-started/whats-new-in-iis-8/iis-80-server-name-indication-sni-ssl-scalability" target="_blank" rel="noopener">官方文档</a></p><ul><li>版本支持</li></ul><p>要求 IIS 8.0 （Windows 2012）及以上版本</p><ul><li>配置要点</li></ul><p>创建多个 HTTPs 站点时，需要填写以下内容</p><p><strong>Hostname</strong>: （注意与 SSL 证书名称保持一致）</p><p><strong>Require Server Name Indication</strong>: 需要勾选</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;TLS Server Name Indication 
      
    
    </summary>
    
    
    
      <category term="HTTP" scheme="http://sysin.org/tags/HTTP/"/>
    
      <category term="F5" scheme="http://sysin.org/tags/F5/"/>
    
      <category term="Nginx" scheme="http://sysin.org/tags/Nginx/"/>
    
      <category term="TLS" scheme="http://sysin.org/tags/TLS/"/>
    
  </entry>
  
  <entry>
    <title>TLSv1.3 Support：主流 Web 客户端和服务端对 TLSv1.3 的支持情况</title>
    <link href="http://sysin.org/article/TLSv1.3-Support/"/>
    <id>http://sysin.org/article/TLSv1.3-Support/</id>
    <published>2020-06-01T02:10:12.000Z</published>
    <updated>2020-08-14T02:31:41.989Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><h2 id="为什么要使用-tls-v13">为什么要使用 TLS v1.3</h2><p>TLS 1.3 是时隔九年对 TLS 1.2 等之前版本的新升级，也是迄今为止改动最大的一次。针对目前已知的安全威胁，IETF（Internet Engineering Task Force，互联网工程任务组）制定 TLS 1.3 的新标准，使其有望成为有史以来最安全，但也最复杂的 TLS 协议。</p><p>TLS 1.3 与之前的协议有较大差异，主要在于：</p><ul><li>相比过去的的版本，引入了新的密钥协商机制 — PSK</li><li>支持 0-RTT 数据传输，在建立连接时节省了往返时间</li><li>废弃了 3DES、RC4、AES-CBC 等加密组件，废弃了 SHA1、MD5 等哈希算法</li><li>ServerHello 之后的所有握手消息采取了加密操作，可见明文大大减少</li><li>不再允许对加密报文进行压缩、不再允许双方发起重协商</li><li>DSA 证书不再允许在 TLS 1.3 中使用</li></ul><p>对比旧协议中的不足，TLS 1.3 确实可以称得上是向前迈了一大步。既避免之前版本出现的缺陷，也减少了 TLS 握手的时间。</p><p>总结一下，TLS 1.3 与以前的版本相比具有如下两个大的优势：更快的访问速度和更强的安全性！</p><p><strong>TLS 1.0 和 TLS 1.1 是分别于 1996 年和 2006 年发布的老版协议，使用的是弱加密算法和系统</strong>。比如 SHA-1 和 MD5，这些算法和系统十分脆弱，存在重大安全漏洞，容易受到降级攻击的严重影响，而在 2008 年和 2017 年分别发布了协议的新版本，即 <a href="https://tools.ietf.org/html/rfc5246" target="_blank" rel="noopener">TLS 1.2</a> 和 <a href="https://datatracker.ietf.org/doc/rfc8446/" target="_blank" rel="noopener">TLS 1.3</a>，无疑更优于旧版本，使用起来也更安全。</p><p>2018 年，在春季 TLS 1.3 版本发布之后，苹果、谷歌、Mozilla 和微软四大浏览器制造商于 2018 年 10 月联合宣布计划在 2020 年初取消对 TLS 1.0 和 TLS 1.1 的支持。</p><p>主流浏览器客户端都提供了禁用 TLS 1.0 和 TLS 1.1 协议的大致期限：</p><table><thead><tr><th><strong>Browser Name</strong></th><th><strong>Date</strong></th></tr></thead><tbody><tr><td>Microsoft IE and Edge</td><td>First half of 2020</td></tr><tr><td>Mozilla Firefox</td><td>March 2020</td></tr><tr><td>Safari/Webkit</td><td>March 2020</td></tr><tr><td>Google Chrome</td><td>January 2020</td></tr></tbody></table><h2 id="客户端支持">客户端支持</h2><h3 id="浏览器">浏览器</h3><p><strong>Modern</strong>: Modern clients that support TLS 1.3, with no need for backwards compatibility</p><table><thead><tr><th>Configuration</th><th>Firefox</th><th>Android</th><th>Chrome</th><th>Edge</th><th>Internet Explorer</th><th>Java</th><th>OpenSSL</th><th>Opera</th><th>Safari</th></tr></thead><tbody><tr><td><strong>Modern</strong></td><td>63</td><td>10.0</td><td>70</td><td>75</td><td>--</td><td>11</td><td>1.1.1</td><td>57</td><td>12.1</td></tr></tbody></table><p>参看：https://wiki.mozilla.org/Security/Server_Side_TLS</p><h3 id="curl">curl</h3><p>7.52.0 - December 21 2016，curl: introduce the --tlsv1.3 option to force TLS 1.3</p><p>使用参数 <code>--tlsv1.3</code>，可以通过 <code>curl --help</code> 查看是否支持该参数</p><h2 id="服务端支持">服务端支持</h2><h3 id="f5-big-ip-tlsv1_3">F5 BIG-IP TLSv1_3</h3><p><a href="https://support.f5.com/csp/article/K10251520" target="_blank" rel="noopener">BIG-IP v14 开始支持 TLSv1_3</a>（In BIG-IP 14.0.0, the BIG-IP system adds limited support for Transport Layer Security (TLS) 1.3. Starting in BIG-IP 14.1.0.1 and later, this support was updated to provide production level support for TLS 1.3.）</p><p>By default, TLS 1.3 is disabled. To enable TLS 1.3, you must remove the <strong>No TLSv1.3</strong> option from the <strong>Enabled Options</strong> list in the Configuration utility for the Client SSL and Server SSL profiles</p><p>You can view a list of TLS 1.3 supported ciphers and groups using the following TMOS Shell (<strong>tmsh</strong>) commands:</p><ul><li><p>To view the supported client-side ciphers, use the following command:</p><p>tmsh run util clientssl-ciphers TLSv1_3</p></li><li><p>To view the supported server-side ciphers, use the following command:</p><p>tmsh run util serverssl-ciphers TLSv1_3</p></li></ul><p><strong>配置启用 TLSv1_3</strong></p><p>编辑 ClientSSL Profle：</p><p>Ciphers：选择 Cipher Group，下拉选择 f5-secure</p><p>Options：Options List...</p><p>Enabled Options，</p><p>Disable No TLSv1.3</p><p>添加，No TLSv1 和 TLSv1.1，保留默认的“Don't insert empty fragments”</p><h3 id="iis-amp-windows-tlsv13">IIS &amp; Windows TLSv1.3</h3><p>IIS 10 &amp; Windows Server 2019 正式版尚未支持，<a href="https://forums.iis.net/t/1250687.aspx?IIS+10+TLS+1+3+support" target="_blank" rel="noopener">参看</a></p><p>最新的 Windows Insider Preview 已经支持 TLS 1.3</p><p>the latest <a href="https://insider.windows.com/en-us/" target="_blank" rel="noopener">Windows Insider Preview Builds</a> for Schannel's TLS 1.3 support.</p><h3 id="nginx-tlsv13">Nginx TLSv1.3</h3><blockquote><p>The <code>TLSv1.1</code> and <code>TLSv1.2</code> parameters (1.1.13, 1.0.12) work only when OpenSSL 1.0.1 or higher is used.</p></blockquote><blockquote><p>The <code>TLSv1.3</code> parameter (1.13.0) works only when OpenSSL 1.1.1 built with TLSv1.3 support is used.</p></blockquote><p><a href="http://wiki.nginx.org/HttpSslModule#ssl_protocols" target="_blank" rel="noopener">More info on the NGINX documentation</a></p><p>参考配置：启用 HTTP/2、TLSv1.3、推荐的Ciphers、HSTS</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl http2; # HTTP/2 Enable</span><br><span class="line">    server_name  www.sysin.org;</span><br><span class="line">    ssl_certificate     www.sysin.org.crt;</span><br><span class="line">    ssl_certificate_key www.sysin.org.key;</span><br><span class="line">    ssl_protocols       TLSv1.2 TLSv1.3; # Requires nginx &gt;= 1.13.0 else use TLSv1.2</span><br><span class="line">    ssl_ciphers  ECDHE-RSA-AES256-GCM-SHA512:DHE-RSA-AES256-GCM-SHA512:ECDHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-SHA384;</span><br><span class="line">    add_header Strict-Transport-Security "max-age=31536000; includeSubdomains; preload";</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="apache-httpd-tlsv13">Apache httpd TLSv1.3</h3><p><strong>版本要求：</strong></p><p>Apache version <code>2.4.36</code> or greater. (网上文章传言 2.4.38 是错误的！)</p><p>OpenSSL version <code>1.1.1</code> or greater.</p><p>CentOS 8 和 Ubuntu 20.04 自带软件包满足要求，低版本需要编译安装。</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@c8 ~]# openssl version</span><br><span class="line">OpenSSL 1.1.1c FIPS  28 May 2019</span><br><span class="line"></span><br><span class="line">[root@c8 ~]# dnf list httpd</span><br><span class="line">Installed Packages</span><br><span class="line">httpd.x86_64        2.4.37-21.module_el8.2.0+382+15b0afa8        @AppStream</span><br></pre></td></tr></table></figure></p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@u20:~# openssl version</span><br><span class="line">OpenSSL 1.1.1f  31 Mar 2020</span><br><span class="line"></span><br><span class="line">root@u20:~# apt list apache2</span><br><span class="line">Listing... Done</span><br><span class="line">apache2/focal 2.4.41-4ubuntu3 amd64</span><br></pre></td></tr></table></figure></p><p><strong>启用 TLS 1.3 和 1.2</strong></p><p>The Apache version 2.4.36 or higher versions support TLS v1.3. You must upgrade Apache packages before enabled TLS 1.3 in SSL settings.</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SSLProtocol -all +TLSv1.2 +TLSv1.3</span><br></pre></td></tr></table></figure></p><p>配置项如下所示:</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;VirtualHost *:443&gt;</span><br><span class="line">    ServerName www.sysin.org</span><br><span class="line">    DocumentRoot /var/www/html</span><br><span class="line"></span><br><span class="line">    SSLEngine on</span><br><span class="line">    SSLProtocol -all +TLSv1.2 +TLSv1.3</span><br><span class="line">    SSLCertificateFile &quot;/path/to/www.sysin.org.cert&quot;</span><br><span class="line">    SSLCertificateKeyFile &quot;/path/to/www.sysin.org.key&quot;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br></pre></td></tr></table></figure></p><p>记得重启 Apache 服务才能生效。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;为什么要使用-tls-v13&quot;&gt;为什么要使用
      
    
    </summary>
    
    
    
      <category term="HTTP" scheme="http://sysin.org/tags/HTTP/"/>
    
      <category term="F5" scheme="http://sysin.org/tags/F5/"/>
    
      <category term="Nginx" scheme="http://sysin.org/tags/Nginx/"/>
    
      <category term="TLS" scheme="http://sysin.org/tags/TLS/"/>
    
      <category term="IIS" scheme="http://sysin.org/tags/IIS/"/>
    
      <category term="Apache" scheme="http://sysin.org/tags/Apache/"/>
    
  </entry>
  
  <entry>
    <title>用于 VMware 的 macOS Catalina 10.15.5 iso 百度网盘 下载</title>
    <link href="http://sysin.org/article/Download-VMware-macOS-Catalina-iso/"/>
    <id>http://sysin.org/article/Download-VMware-macOS-Catalina-iso/</id>
    <published>2020-05-30T02:10:00.000Z</published>
    <updated>2020-08-03T05:32:51.509Z</updated>
    
    <content type="html"><![CDATA[<p>基于MAS原版app制作，安全无添加，无任何logo，文件体积小（xz压缩后不到350M），适合长期持有。</p><blockquote><p>下载链接: https://pan.baidu.com/s/1wdrFp6y-qC7dUHtCRMv9xA  密码: bb3v</p></blockquote><p>说明：两个压缩文件是一样的，一个zip一个xz格式。</p><p><strong>附：可用的VMware 软件下载链接</strong></p><p>1.<a href="https://sysin.org/article/Download-VMware-ESXi-7.0-MOD/">ESXi 7.0 定制版镜像</a></p><p>2.Windows：<a href="ed2k://%7Cfile%7CVMware-Workstation-Lite-15.5.5-16285975%E7%B2%BE%E7%AE%80%E5%AE%98%E6%96%B9%E4%B8%AD%E6%96%87%E5%AE%89%E8%A3%85%E6%B3%A8%E5%86%8C%E7%89%88.exe%7C251983636%7C01C2F2541A6EF19955988D2916776CD4%7C/" target="_blank" rel="noopener">VMware Workstation 15.5.5 x64 精简定制版</a>：ed2k://|file|VMware-Workstation-Lite-15.5.5-16285975%E7%B2%BE%E7%AE%80%E5%AE%98%E6%96%B9%E4%B8%AD%E6%96%87%E5%AE%89%E8%A3%85%E6%B3%A8%E5%86%8C%E7%89%88.exe|251983636|01C2F2541A6EF19955988D2916776CD4|/</p><p>3.macOS：VMware Fusion 15.5.5 <a href="https://www.vmware.com/go/getfusion" target="_blank" rel="noopener">官网下载链接</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;基于MAS原版app制作，安全无添加，无任何logo，文件体积小（xz压缩后不到350M），适合长期持有。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;下载链接: https://pan.baidu.com/s/1wdrFp6y-qC7dUHtCRMv9xA  密码: bb3v
      
    
    </summary>
    
    
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
      <category term="Apple" scheme="http://sysin.org/tags/Apple/"/>
    
      <category term="macOS" scheme="http://sysin.org/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>VMware ESXi 7.0 SLIC 2.5 / macOS / LegacyCPU MOD ISO 百度网盘 下载</title>
    <link href="http://sysin.org/article/Download-VMware-ESXi-7.0-MOD/"/>
    <id>http://sysin.org/article/Download-VMware-ESXi-7.0-MOD/</id>
    <published>2020-05-28T02:10:00.000Z</published>
    <updated>2020-08-03T05:32:43.971Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>下载链接: https://pan.baidu.com/s/1-fjtDCj3bFXgTjZyJBpTIA  密码: 4sv7</p></blockquote><p>申明：BIOS文件以及macOS支持等底层修改都来自网上论坛的分享，笔者只是做了ISO的集成😁。</p><p><strong>特性：</strong></p><ul><li><p>SLIC 2.5：使用 OEM SLP keys 可以支持 Windows Server 2019</p></li><li><p>macOS Unlocker：直接运行 macOS Catalina 10.15</p></li><li><p>LegacyCPU support，允许在不受支持的 CPU 上安装 ESXi 7.0</p></li></ul><h2 id="vmware_155_dell_25_bios-efi_mod">VMware_15.5_DELL_2.5_BIOS-EFI_Mod</h2><p><strong>SLP 2.5</strong> (BIOS.440 &amp; EFIs - Dell 2.5 SLIC) - NT 6.0  (Vista/Server 2008), NT 6.1 (7/Server 2008 R2), NT 6.2 (Server 2012), NT 6.3 (Server 2012 R2), NT 10.0 (Server 2016/Server 2019)</p><p>截图：<img src="https://img-blog.csdnimg.cn/2020053115163459.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25ldGdj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="支持-macos-catalina">支持 macOS Catalina</h2><p>在VMware中直接新建虚机，操作系统选择“Apple macOS 10.15 (64-bit)”，即可安装和正常启动。</p><p>截图：<img src="https://img-blog.csdnimg.cn/20200531151851593.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25ldGdj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><p>用于VMware的macOS 10.15.5 安装映像iso下载：<a href="https://blog.csdn.net/netgc/article/details/106456323" target="_blank" rel="noopener">链接</a></p><h2 id="支持非官方支持的cpu">支持非官方支持的CPU</h2><p>修改启动参数，在官方不受支持的CPU的服务器上可以正常安装。</p><blockquote><p>根据 “VMware vSphere 7.0 Release Notes”，以下 CPU 已经不受支持（无法安装或者升级 ESXi 7.0）</p></blockquote><p>Comparing the processors supported by vSphere 6.7, vSphere 7.0 no longer supports the following processors:</p><ul><li>Intel Family 6, Model = 2C (Westmere-EP)</li><li>Intel Family 6, Model = 2F (Westmere-EX)</li></ul><p>笔者在一台10年的服务器上安装运行良好：HP DL 380 G7，Intel(R) Xeon(R) CPU E5606</p><p>截图：<img src="https://img-blog.csdnimg.cn/20200531151932313.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25ldGdj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p><h2 id="提供dell-hpe定制版iso集成">提供Dell、HPE定制版iso集成</h2><p>提供标准版、Dell定制版和HPE定制版三个iso文件。</p><p>名称: VMware-VMvisor-Installer-7.0.0-15843807.x86_64-SLIC2.5-GC.iso大小: 369336320 字节 (352 MiB)CRC32: 6E0AD081CRC64: 5A1D267F015EFCD7SHA256: B03B1B3D7AD533277293CA7C1725B1F50F755973795E327A5107E5475469D9C0SHA1: 8F28A06E91976A495DA657232337CABBAEDA02B8BLAKE2sp: 7D7F76CAE823A7F199DC9C5DFC80EF4FC334F9F1BBB651DD2E0D1987D070F4C8</p><p>名称: VMware-VMvisor-Installer-7.0.0-15843807.x86_64-DellEMC_Customized-A00-SLIC2.5-GC.iso大小: 369373184 字节 (352 MiB)CRC32: 95D1712BCRC64: 1AAF946A016147ABSHA256: 2FD51DF01AE46AB4C3DEE6CCC29C5E8B315E4303DC463DCC634A5A4407EAA3FCSHA1: 233BF2F421BDE8A95E7CAADE1903C7869BF2D23FBLAKE2sp: 867FDDAAF826E53454991DC680EFF58D5AB996808D4D7E4A1ED12F695083AB9F</p><p>名称: VMware_ESXi_7.0.0_15843807_HPE_700.0.0.10.5.0.108_April2020-SLIC2.5-GC.iso大小: 410791936 字节 (391 MiB)CRC32: C95C956ECRC64: 9C4AB5D0BE620CD6SHA256: 670F3ACF5E2D0E09F866ED1356FF2766DB690FCD697F4CC69BE1798ACFEA7288SHA1: 2DCA36F3B3AF708BF5D258320A604B7B37D7BFDEBLAKE2sp: C1CE1C810DB82BAE64211539B4051885A36EED16F2A01CCDC25D24F5D7D41B7A</p><blockquote><p>下载链接: https://pan.baidu.com/s/1-fjtDCj3bFXgTjZyJBpTIA  密码: 4sv7</p></blockquote>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;下载链接: https://pan.baidu.com/s/1-fjtDCj3bFXgTjZyJBpTIA  密码: 4sv7&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;申明：BIOS文件以及macOS支持等底层修改都来自网上论坛的分享，笔者只是做
      
    
    </summary>
    
    
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
      <category term="VMware" scheme="http://sysin.org/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>macOS Catalina 10.15.5 正式版 下载 百度网盘</title>
    <link href="http://sysin.org/article/Download-macOS-Catalina-10.15.5/"/>
    <id>http://sysin.org/article/Download-macOS-Catalina-10.15.5/</id>
    <published>2020-05-27T02:10:00.000Z</published>
    <updated>2020-08-03T05:32:31.360Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://appleinsider.com/articles/20/05/26/apple-releases-macos-catalina-10155-with-new-battery-health-management-feature" target="_blank" rel="noopener">Apple releases macOS Catalina 10.15.5 with new battery health management feature</a></p><p>macOS Catalina 10.15.5 = (19F96) 05/26/2020</p><blockquote><p>下载链接: https://pan.baidu.com/s/1z-n_UTnY3Wty7dEu-tf8mw  密码: dnns</p></blockquote><p>基于MAS原版制作，安全无添加，无任何logo，适合长期持有😄。</p><p><img src="https://img-blog.csdnimg.cn/20200531094401333.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L25ldGdj,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a href=&quot;https://appleinsider.com/articles/20/05/26/apple-releases-macos-catalina-10155-with-new-battery-health-management-feature&quot; targe
      
    
    </summary>
    
    
    
      <category term="Apple" scheme="http://sysin.org/tags/Apple/"/>
    
      <category term="macOS" scheme="http://sysin.org/tags/macOS/"/>
    
  </entry>
  
  <entry>
    <title>如何禁用 Firefox 自动更新（Windows、macOS、Linux）</title>
    <link href="http://sysin.org/article/Disable-Firefox-Auto-update-Windows_macOS_Linux/"/>
    <id>http://sysin.org/article/Disable-Firefox-Auto-update-Windows_macOS_Linux/</id>
    <published>2020-05-15T02:10:00.000Z</published>
    <updated>2020-08-03T05:32:16.835Z</updated>
    
    <content type="html"><![CDATA[<h2 id="windows">Windows</h2><h3 id="方法一使用策略文件">方法一：使用策略文件</h3><p>官方策略模板：https://github.com/mozilla/policy-templates/releases</p><p>创建策略文件：&lt;Firefox安装目录&gt;\distribution\policies.json</p><p>内容如下，</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;policies&quot;: &#123;</span><br><span class="line">    &quot;DisableAppUpdate.&quot;: false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="方法二使用注册表">方法二：使用注册表</h3><p>操作步骤：</p><ul><li><p>浏览到 “HKEY_LOCAL_MACHINE\Software\Policies” 创建项 “Mozilla” 在创建项 “Firefox” 创建完毕即 “HKEY_LOCAL_MACHINE\Software\Policies\Mozilla\Firefox”</p></li><li><p>在上述路径，右键点击空白处，新建一个 DWORD (32-Bit) Value，名称为 “DisableAppUpdate”</p></li><li><p>双击创建的 “DisableAppUpdate”，将值修改为 “1”。</p></li></ul><p>直接使用注册表文件</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Mozilla\Firefox]</span><br><span class="line">&quot;DisableAppUpdate&quot;=dword:00000001</span><br></pre></td></tr></table></figure></p><p><strong>直接使用CMD</strong>（推荐，最便捷）</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reg add &quot;HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Mozilla\Firefox&quot; /v DisableAppUpdate /t REG_DWORD /d 1 /f</span><br></pre></td></tr></table></figure></p><h3 id="效果">效果</h3><p>此时 “选项” 中 Firefox 更新，提示“更新已被系统管理员禁用”，检查更新按钮也不可用！</p><p>参考文章：https://www.webnots.com/how-to-disable-automatic-update-in-firefox/</p><h2 id="macos">macOS</h2><h3 id="方法一配置策略文件">方法一：配置策略文件</h3><p>获取最新或者对应版本的策略模板：https://github.com/mozilla/policy-templates/releases</p><p>自动更新策略描述如下：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;policies&quot;: &#123;</span><br><span class="line">    &quot;DisableAppUpdate&quot;: true | false</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>创建 Firefox 策略配置文件</p><p><code>Firefox.app/Contents/Resources/distribution/policies.json</code></p><p>禁用自动更新则将以下内容写入 policies.json 文件中</p><p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"policies"</span>: &#123;</span><br><span class="line">    <span class="attr">"DisableAppUpdate"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="方法二命令行实现">方法二：命令行实现</h3><p>可以直接执行如下终端命令，更加便捷，不用额外配置上述策略文件。</p><ul><li>启用策略</li></ul><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo defaults write /Library/Preferences/org.mozilla.firefox EnterprisePoliciesEnabled -bool TRUE</span><br></pre></td></tr></table></figure></p><ul><li>禁用自动更新</li></ul><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo defaults write /Library/Preferences/org.mozilla.firefox DisableAppUpdate -bool TRUE</span><br></pre></td></tr></table></figure></p><h3 id="效果">效果</h3><p>此时 “首选项” 中 Firefox 更新，提示“更新已被系统管理员禁用”，检查更新按钮也不可用！</p><h2 id="linux">Linux</h2><p>On Linux, the file goes into <code>firefox/distribution</code>, where <code>firefox</code> is the installation directory for firefox, which varies by distribution or you can specify system-wide policy by placing the file in <code>/etc/firefox/policies</code>.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;windows&quot;&gt;Windows&lt;/h2&gt;
&lt;h3 id=&quot;方法一使用策略文件&quot;&gt;方法一：使用策略文件&lt;/h3&gt;
&lt;p&gt;官方策略模板：https://github.com/mozilla/policy-templates/releases&lt;/p&gt;
&lt;p&gt;创建策略文
      
    
    </summary>
    
    
    
      <category term="Firefox" scheme="http://sysin.org/tags/Firefox/"/>
    
  </entry>
  
  <entry>
    <title>VMware NSX-T Data Center 3.0 下载</title>
    <link href="http://sysin.org/article/Download-VMware-NSX-T-3/"/>
    <id>http://sysin.org/article/Download-VMware-NSX-T-3/</id>
    <published>2020-05-15T02:10:00.000Z</published>
    <updated>2020-08-18T06:16:30.259Z</updated>
    
    <content type="html"><![CDATA[<p>VMware NSX-T Data Center 3.0  | 2020 年 4 月 7 日 | 内部版本 15946738</p><h2 id="通过-vmware-nsx-实现全栈网络安全虚拟化">通过 VMware NSX 实现全栈网络安全虚拟化</h2><p>使虚拟云网络能够跨数据中心、多云环境、裸机和容器基础架构连接并保护应用。VMware NSX Data Center 提供完整的 L2-L7 网络和安全虚拟化平台，支持像从单一窗口管理单个条目一样轻松管理整个网络。</p><h2 id="跨云环境提供-l2-l7-虚拟化平台">跨云环境提供 L2-L7 虚拟化平台</h2><h3 id="通过自动化实现敏捷性">通过自动化实现敏捷性</h3><p>通过在软件中运行整个 L2-L7 体系（与底层物理硬件分离），为您的网络和安全服务提供一键式置备服务，实现强大的灵活性、敏捷性和规模。<a href="https://www.vmware.com/cn/products/nsx/automation.html" target="_blank" rel="noopener">探索网络自动化 &gt;&gt;</a></p><h3 id="实现原生安全性">实现原生安全性</h3><p>通过细分到单个工作负载的微分段，为应用提供精细的保护。针对每个工作负载创建情境感知安全策略，同时利用 IDS/IPS 以抵御多云环境中的横向威胁。<a href="https://www.vmware.com/cn/security/network-security-solutions.html" target="_blank" rel="noopener">有关服务定义的防火墙的更多内容 &gt;&gt;</a></p><h3 id="享受一致的多云环境运维体验">享受一致的多云环境运维体验</h3><p>可从单一窗口管理私有云和公有云中一致的网络和安全策略，而无论您的应用是在虚拟机、容器还是裸机中运行。<a href="https://www.vmware.com/cn/products/nsx/multi-cloud-networking.html" target="_blank" rel="noopener">查看多云网络策略 &gt;&gt;</a></p><h3 id="同时节省-capex-和-opex">同时节省 CAPEX 和 OPEX</h3><p>通过将网络和安全功能整合到单个分布式虚拟化平台，将 CAPEX 降低高达 35%，并通过简化运维管理和优化流量来大幅削减 OPEX。<a href="https://www.vmware.com/content/dam/digitalmarketing/vmware/zh-cn/pdf/products/nsx/vmware-nsx-solution-brief.pdf" target="_blank" rel="noopener">下载解决方案概述 &gt;&gt;</a></p><h2 id="nsx-的主要应用场景有哪些">NSX 的主要应用场景有哪些？</h2><h3 id="采用零信任安全策略">采用零信任安全策略</h3><p>使用 NSX 中的微分段功能锁定关键应用，在软件中创建逻辑 DMZ，并减少虚拟桌面环境的攻击面。<a href="https://www.vmware.com/cn/solutions/micro-segmentation.html" target="_blank" rel="noopener">零信任安全策略</a>现在可在私有云和公有云环境中实施，并且效率很高。</p><p><a href="https://www.vmware.com/cn/products/nsx/security.html" target="_blank" rel="noopener">有关微分段的更多内容</a></p><h3 id="加快交付网络和安全服务">加快交付网络和安全服务</h3><p>通过利用蓝图在所有站点和云环境中一致地自动置备和管理网络和安全服务，或者通过将基础架构公开为代码，来加快应用交付。</p><p><a href="https://www.vmware.com/cn/solutions/network-automation.html" target="_blank" rel="noopener">有关网络自动化的更多内容</a></p><h3 id="跨云环境延展网络">跨云环境延展网络</h3><p>通过一致的网络和安全服务精简多云运维，并在此过程中启用从无缝数据中心延展到多数据中心池的多云应用场景，从而加快工作负载移动速度。</p><p><a href="https://www.vmware.com/cn/products/nsx/multi-cloud-networking.html" target="_blank" rel="noopener">有关多云网络的更多内容</a></p><h3 id="将容器作为一等公民予以管理">将容器作为“一等公民”予以管理</h3><p>为容器化应用和微服务提供虚拟机享有的集成式全体系网络和安全服务。利用针对 Kubernetes 的原生容器网络功能、微分段和针对<a href="https://www.vmware.com/cn/topics/glossary/content/microservices.html" target="_blank" rel="noopener">微服务</a>的端到端可观察性。</p><p><a href="https://www.vmware.com/cn/products/nsx/cloud-native-apps.html" target="_blank" rel="noopener">有关容器网络的更多内容</a></p><h2 id="扩展虚拟云的功能">扩展虚拟云的功能</h2><h3 id="升级到原生安全性">升级到原生安全性</h3><p>依靠专门构建的唯一<a href="https://www.vmware.com/cn/security/internal-firewall.html" target="_blank" rel="noopener">内部防火墙</a>来保护东西向网络流量，以及跨云环境一致地保护工作负载。</p><p><a href="https://www.vmware.com/cn/security/network-security-solutions.html" target="_blank" rel="noopener">有关服务定义的防火墙的更多内容 </a></p><h3 id="运行-vmware-cloud-on-aws">运行 VMware Cloud on AWS</h3><p>将本地部署 vSphere 环境扩展到 AWS 云中，交付顺畅的混合云体验。</p><p><a href="https://cloud.vmware.com/cn/vmc-aws" target="_blank" rel="noopener">有关 VMC on AWS 的更多内容 </a></p><h3 id="通过-idsips-实现高级威胁检测">通过 IDS/IPS 实现高级威胁检测</h3><p>用分布式软件 IDS/IPS 解决方案替换分散的设备，以检测东西向流量上的横向威胁移动并轻松实现合规性。</p><p><a href="https://www.vmware.com/cn/products/nsx-distributed-ids-ips.html" target="_blank" rel="noopener">有关 NSX Distributed IDS/IPS 的更多内容 </a></p><h3 id="利用全局可见性">利用全局可见性</h3><p>跨虚拟、物理和公有云网络基础架构（包括防火墙）获得端到端运维可见性和故障排除能力。</p><p><a href="https://www.vmware.com/cn/products/vrealize-network-insight.html" target="_blank" rel="noopener">有关 vRealize Network Insight 的更多内容 </a></p><h3 id="获取推荐的安全策略">获取推荐的安全策略</h3><p>通过丰富的应用拓扑虚拟化和自动化策略推荐，简化运维微分段。</p><p><a href="https://www.vmware.com/cn/products/nsx-intelligence-analytics-engine.html" target="_blank" rel="noopener">有关 NSX Intelligence 的更多内容 </a></p><h3 id="将-nsx-延展到云端应用">将 NSX 延展到云端应用</h3><p>通过单一窗口，为在公有云上运行的原生应用提供一致的网络和安全服务。</p><p><a href="https://www.vmware.com/cn/products/nsx-cloud.html" target="_blank" rel="noopener">有关 NSX Cloud 的更多内容 </a></p><h2 id="新增功能">新增功能</h2><p>NSX-T Data Center 3.0 针对私有云、公有云和多云环境的虚拟化网络和安全引入了各种新功能。亮点包括以下重点领域和新功能：</p><ul><li>**云级网络连接：**NSX Federation</li><li>**原生安全：**分布式 IDS、用于 Windows 物理服务器的微分段、基于时间的防火墙规则以及 URL 分析的功能预览</li><li>**现代应用网络连接：**适用于 vSphere with Kubernetes 的 NSX-T、容器网络连接和安全增强功能</li><li><strong>下一代电信云</strong>：适用于虚拟机移动化的 L3 EVPN，加速数据平面性能、NAT64、对容器的 IPv6 支持、适用于 NFV 的东西向服务链</li></ul><p>NSX-T Data Center 3.0.0 版本提供了以下新功能和增强功能。</p><h3 id="l2-网络">L2 网络</h3><p><strong>NSX-T 对 VDS 7.0 的支持</strong></p><p>NSX-T 现在能够在 vSphere VDS 交换机版本 7.0 上运行。建议 NSX 和 vSphere  的新部署利用这一紧密集成，并开始过渡到在 VDS 上使用 NSX-T。在未来版本中，将弃用 N-VDS NSX-T 主机交换机。之后，计划将  NSX-T 和 ESXi 主机交换机融合。N-VDS 将交换机保留在 KVM、NSX-T Edge 节点、本机公有云 NSX  代理中，用于处理裸机工作负载。</p><p>此版本仍支持当前 NSX-T ESXi 主机交换机 N-VDS，建议当前在 ESXi 中使用 N-VDS 的 NSX 部署继续使用同一交换机。原因有两个方面：</p><ol><li>对于现有 NSX 部署，将 N-VDS 转换为 VDS 7.0 是一种手动过程。如果需要，请与您的 VMware 代表联系以了解更多详细信息。</li><li>N-VDS 和 VDS API 有所不同。N-VDS 或 VDS API 本身未作任何更改。但是，如果您转为在环境中使用 VDS，就要开始调用 VDS API 而不是 N-VDS API。必须在将 N-VDS 转换为 VDS 之前进行此生态系统更改。</li></ol><p>从 N-VDS 迁移到 VDS 时，建议考虑以下部署注意事项：</p><ul><li>VDS 通过 vCenter 进行配置。N-VDS 独立于 vCenter。由于 VDS 对 NSX-T 的支持，并且将最终弃用 N-VDS，NSX-T 将与 vCenter 密切绑定，而且需要 vCenter 才能启用 NSX。</li><li>N-VDS 能够支持 ESXi 主机特定配置。VDS 使用基于集群的配置，不支持 ESXi 主机特定配置。</li><li>对于此版本，N-VDS 与 VDS 的功能并不完全一致。</li><li>与 N-VDS 相比，针对 VDS 的虚拟机和 vmKernel 接口 API 的支持类型有所不同。</li></ul><p><strong>RHEL 支持</strong>：我们在 NSX 的受支持操作系统的列表中增加了 RHEL 7.6 和 RHEL 7.7。这适用于 KVM 和裸机工作负载。</p><p><strong>Edge 网桥：</strong></p><p>现在可以通过 Edge 网桥将为客户机 VLAN 标记配置的分段扩展到 VLAN。通过在将分段映射到网桥配置文件时配置一系列  VLAN ID，可以启用该功能。具有此范围内的 VLAN ID 的分段流量将桥接到 VLAN，并保留其 VLAN 标记。在网桥的 VLAN  端接收且 VLAN ID 属于分段到网桥映射中所配置范围的流量将桥接到分段，并保留其 VLAN ID 作为客户机 VLAN 标记。</p><p>Edege 网桥现在支持基于策略的 UI。</p><p><strong>每个 VNI 的 MAC 限制</strong>：在 ESXi 数据平面中，每个逻辑交换机的默认 MAC 限制的默认值为 2048。NSX 现在提供了将每个逻辑交换机的 MAC 限制从默认值更改为符合客户要求的值的功能。</p><p><strong>支持 Windows 2016 裸机服务器</strong></p><p>NSX 支持以下用例：</p><ol><li>与支持 VLAN 的虚拟化工作负载的连接</li><li>与支持覆盖网络的虚拟化工作负载的连接</li><li>虚拟工作负载和物理工作负载之间的通信安全性</li><li>物理工作负载之间的通信安全性</li></ol><p>支持适用于：</p><ul><li>两个 PNIC 的情况（管理和应用使用单独的 IP）</li><li>一个 PNIC 的情况（管理和应用使用相同的 IP）</li></ul><p>有关当前支持的最高配置，请参见 <a href="https://configmax.vmware.com/home" target="_blank" rel="noopener">VMware 最高配置</a>。</p><p><strong>增强型数据路径</strong></p><ul><li><strong>ENS 中支持 tx 零复制</strong> - 对于更大的包大小 (600-700B)，现在支持 tx 零复制。从 vSphere 7.0 开始支持此功能，这改进了 l2/l3 缓存未命中情况，最终提高了整体性能。</li><li><strong>FPO Flow Director 卸载和关联的 vmkapi 更改</strong> - N-VDS 支持 NIC 卸载，因此提高了增强型数据路径中的性能。</li><li><strong>U-ENS 数据平面整合</strong> - ENS（增强型网络堆栈）和 FC（流量缓存）可在 N-VDS（或 vSwitch）上为 NSX-T 提供快速路径。ENS 用于常规用途，而 FC 则更多用于电信用例。</li><li><strong>ENS 性能优化</strong> - 对于缓存利用率和数据包大小，已改进了性能。</li></ul><h3 id="联合">联合</h3><p>NSX-T 3.0 引入了通过单一窗口（称为全局管理器 (GM)）联合多个内部部署数据中心的功能。GM 提供图形用户界面和基于意图的 REST API 端点。通过 GM，您可以跨多个位置和延伸的网络连接对象配置一致的安全策略：Tier-0 和 Tier-1 网关和分段。</p><h3 id="edge-平台">Edge 平台</h3><ul><li>新的 Edge 虚拟机超大型规格为高级服务提供了更大规模和更高的吞吐量。</li><li>在 Tier-0 网关上改进了收敛时间，并且在裸机 Edge 上，将 Edge 虚拟机上支持的 BFD 间隔降低至 500ms 和 50ms。</li><li>增强了 Edge 虚拟机部署：通过 NSX 执行 Edge 虚拟机部署期间，将执行以下操作：<ul><li>在 ESX 重新引导时自动启动 Edge 虚拟机</li><li>在 DFW 排除列表中添加了 Edge 虚拟机</li><li>配置以下参数：“允许 SSH”、“允许 root 用户登录”、“NTP 服务器列表”、“域搜索列表”、“DNS 服务器列表”和“默认用户凭据”</li></ul></li><li>AMD EPYC 支持：现在，可以在 AMD EPYC 系列 CPU 上部署 Edge 节点、虚拟机和裸机：<ul><li>AMD EPYC 7xx1 系列 (Naples)</li><li>AMD EPYC 3000 嵌入式系列及更高版本</li><li>AMD EPYC 7xx2 系列 (Rome)</li></ul></li></ul><h3 id="l3-网络">L3 网络</h3><ul><li>通过 UI/API 更改 Tier-0 网关 HA 模式，提供了将 Tier-0 网关高可用性模式从主动/主动更改为主动/备用的选项，以及通过 UI 和 API 进行反向更改的选项。</li><li>VRF Lite 支持通过 Tier-0 网关的虚拟路由转发 (VRF) 提供多租户数据平面隔离。VRF 具有自己的隔离路由表、上行链路、NAT 和网关防火墙服务。</li><li>L3 EVPN 支持提供了一个北向连接选项，可通过 MP-BGP EVPN AFI（路由类型 5）向提供商 Edge 通告 Tier-0 网关上的所有 VRF，并且通过对每个 VRF 使用一个 VNI，采用 VXLAN 封装在数据平面上保持隔离。</li><li>支持对 Tier-1 网关进行限速，这提供了对进出 Tier-1 网关上行链路的所有流量进行限速的功能。</li><li>策略和 UI 中的元数据代理支持增强了基于意图的 API 和策略 UI，以配置元数据代理。</li><li>DHCP 服务器策略和 UI 增强了基于意图的 API 和策略 UI，以在本地将 DHCP 服务器配置到分段。</li><li>适用于 L3 的策略 API 增强了基于意图的 API 和策略 UI，以检索网关上的运行时信息。</li><li>L3 多播（第 1 阶段）：<ul><li>NSX-T 3.0 首次在 NSX-T 中引入多播。</li><li>仅在 T0 上支持多播复制，且预期具有多播工作负载的任何主机都必须连接到 T0。未来版本将支持 T1。</li><li>NSX-T 3.0 中也只有一个从 Edge 到 TOR 的上行链路。在未来版本中，将内置冗余，并且对于支持 PIM 的 TOR，可能有多个到 TOR 的上行链路。</li><li>必须始终在 NSX 域外部对 RP 进行编程。</li><li>NSX-T 3.0 中的多播流量不支持 Edge 服务。</li></ul></li></ul><h3 id="ipv6">IPv6</h3><ul><li>NAT64 提供从 IPv4 到 IPv6 的转换机制。它在遵循 RFC 6146 标准的情况下，提供了从 IPv6 到 IPv4 的有状态网络地址转换。</li><li>有状态 DHCPv6 支持 - NSX 现在支持通过 Edge 节点上托管的 NSX 本机 DHCP 服务器，对 IPv6 地址和关联参数进行有状态交付。</li></ul><h3 id="防火墙">防火墙</h3><ul><li><strong>使用 NSX Federation 在多个站点之间实施一致的安全策略</strong> - NSX-T 3.0 引入了可管理多个 NSX Manager 的全局管理器 (GM) 概念。使用 NSX-T 3.0，全局管理器可以通过单一窗口在多个站点之间实施一致的安全策略。</li><li><strong>安全仪表板简介</strong> - NSX-T 3.0 引入了新的安全概览仪表板，确保安全和防火墙管理员能够一目了然地查看防火墙和分布式 IDS 的当前运行状态。</li><li><strong>基于时间的防火墙规则调度</strong> - 与 NSX-T 3.0 一样，您现在可以在特定时间间隔内调度实施特定规则。</li><li><strong>通过引入向导来快速执行基于 VLAN 的微分段</strong> - 通过使用 NSX-T，只需非常简单的步骤即可配置数据中心以引入分段。</li><li><strong>适用于 Windows 物理服务器的微分段</strong> <strong>-</strong> 在 NSX-T 3.0 中为 Windows 物理服务器引入了微分段。</li><li><strong>URL 分析 - 功能预览</strong> - 引入了 URL 筛选预览，并对 URL 进行检测、分类和信誉评分。此功能预览仅在网关防火墙上可用。</li><li><strong>在 KVM 中针对 FW 支持 TCP/UDP 和 ICMP 会话定时器配置</strong> - 针对 KVM 上运行的工作负载，支持在 KVM 中进行防火墙定时器配置更改。</li></ul><h3 id="身份防火墙">身份防火墙</h3><ul><li><strong>在身份防火墙规则中为 VDI 环境筛选 ICMP 流量</strong> - 这允许为 VDI 用户创建身份防火墙规则以根据 ICMP 协议筛选流量。这仅限于 VDI，不适用于 RDSH 用户。</li><li><strong>为身份防火墙组选择性地同步 AD 组</strong> - 这允许同步要在身份防火墙规则中用作端点的特定 AD 组。此功能可优化 AD 组的性能和可用性。目前，此功能仅在使用 API 时可用。</li><li><strong>针对身份防火墙规则筛选 UDP 流量</strong> - 这允许在身份防火墙规则中筛选 UDP 流量。</li></ul><h3 id="分布式入侵检测系统-d-ids">分布式入侵检测系统 (D-IDS)</h3><p>NSX  平台中引入了分布式入侵检测功能，作为平台的威胁与漏洞检测功能的一部分。此功能可在管理程序内启用入侵检测功能，以检测易受攻击的网络流量。可以在每个虚拟机和虚拟机的每个 vNIC 上启用此分布式机制，并实施精细的规则检查。作为此功能集的一部分，NSX Manager 可以通过 NSX  签名服务下载最新的特征码包。这样就可以在环境中采用最新威胁特征码来更新 NSX 分布式 IDS。</p><h3 id="服务插入和客户机侦测">服务插入和客户机侦测</h3><ul><li><strong>适用于 Edge 上 NFV-SFC 的东西向服务链</strong> - 多个服务链接功能之前仅适用于分布式流量，但现在适用于 Edge 流量。现在，东西向服务链也可以进行扩展以重定向 Edge 流量。</li><li><strong>禁用 NSX 服务虚拟机的克隆</strong> - 现在禁止从 vSphere Client 克隆服务虚拟机以防止虚拟机出现故障。</li></ul><h3 id="负载均衡">负载均衡</h3><ul><li><strong>负载均衡器运行状况检查支持多个监控器和“AND”条件</strong> - 此增强功能允许将多个活动运行状况监控器配置为一个运行状况监控策略。所有活动运行状况监控器都必须成功通过，才能将该成员视为正常。</li><li><strong>第 4 层和第 7 层虚拟服务器的连接丢弃</strong> - 第 4 层虚拟服务器具有一个新选项，可允许或拒绝来自指定网络的连接。适用于第 7 层虚拟服务器的 LB 规则允许使用组来指定网络，并具有新的“丢弃”操作以采用静默方式丢弃请求，而不是返回 HTTP 状态代码。</li><li><strong>对 LB 虚拟服务器和成员的 IPv6 支持</strong> - 支持将 IPv6 VIP 负载均衡到 IPv6 成员。</li><li><strong>JSON Web 令牌支持</strong> - 负载均衡器可以验证 JSON Web 令牌或 JWT，并根据其负载授予访问权限。</li><li><strong>按负载均衡器规则执行 SSL 直通和动态 SSL 终止</strong> - 负载均衡器可以根据 SSL 客户端 Hello 中的 SNI 来选择一个池，而不会终止 SSL。此外，它还可以基于 SNI 执行 SSL 直通、SSL 卸载或端到端 SSL。</li><li><strong>负载均衡器超大型支持</strong> - 为超大型 Edge 引入了超大型规格，以便更好地进行扩展。</li><li><strong>适用于 vSphere with Kubernetes 的 DLB</strong> - vSphere with Kubernetes 管理的 k8s 集群 IP 支持分布式负载均衡器。任何其他工作负载类型都不支持 DLB。</li></ul><h3 id="vpn">VPN</h3><ul><li><strong>Intel QAT 支持 VPN 批量加密</strong> - 支持 Intel QAT 卡以在裸机 Edge 上卸载 VPN 批量加密。</li><li><strong>L2VPN 的本地输出</strong> - 可以将两个本地网关连接到具有相同网关 IP 地址的延伸网络，以允许通过本地网关输出出站流量。</li><li><strong>按需 DPD</strong> - 支持按需 DPD 以避免 DPD 短期存活，同时能够快速检测远程故障。</li><li><strong>Tier-1 LR 上的 L2 VPN</strong> - Tier-1 网关上支持 L2 VPN 服务。</li><li><strong>VPN 会话的有状态故障切换</strong> - IKE SA 和 IPsec SA 将实时同步到备用 VPN 服务，以进行有状态故障切换。</li><li><strong>PMTU 发现</strong> - 对 L2 和 L3 VPN 服务均支持 PMTU 发现，以避免数据包分片。</li></ul><h3 id="自动化-openstack-和其他-cmp">自动化、OpenStack 和其他 CMP</h3><ul><li><strong>搜索 API</strong> <strong>可用</strong> - 通过 API 公开 NSX-T 搜索功能（已经在 UI 中提供）。这可以构建强大的查询，以根据 NSX-T 对象的标记、类型、名称或其他属性返回这些对象并简化自动化过程。API 指南中介绍了搜索 API 的详细用法。</li><li><strong>Terraform Provider for NSX-T - 声明式 API 支持</strong> - Terraform Provider 提供了通过内部部署的 NSX-T 的声明式 API 来配置逻辑对象的功能。这样就可以通过 NSX-T 策略 API  模型的灵活性和额外功能来发挥 Terraform 的优势。新的资源和数据源通过网络连接（Tier-0 网关、Tier-1  网关、分段）、安全性（集中式和分布式防火墙、组）和服务（负载均衡器、NAT、DHCP）覆盖更广泛的结构，从而实现基础架构即代码。Terraform Provider 发行说明中提供了更多详细信息。</li><li><strong>适用于 NSX-T 的 Ansible 模块</strong> - <strong>升级和逻辑对象支持</strong> - 增强了适用于 NSX-T 的 Ansible 模块，除了安装之外，还支持升级。这些模块还允许通过声明式 API 配置 Tier-0  网关、Tier-1 网关、分段和分布式防火墙规则，从而设置环境。这可以自动完成环境设置、升级和基本拓扑创建过程。Ansible  模块发行说明中提供了更多详细信息。</li><li><strong>OpenStack 集成改进 - 扩展了 IPv6、VPNaaS 支持、vRF Lite 支持</strong> - 适用于 NSX-T 声明式 API 的 Neutron 插件经过扩展，涵盖 IPv6 和 VPNaaS。Ipv6  实现为以前版本中已有的所有功能增加了负载均衡器支持，VPNaaS 则能够从 NSX-T 中创建的 OpenStack IPsec VPN  进行配置。除了 Tier-0 外，OpenStack Neutron 插件还验证了 Tier-0 vRF-lite  是否作为外部网络使用，允许大型企业和服务提供商以最少量的 Edge 资源提供隔离和灵活性。OpenStack Neutron  插件发行说明中提供了更多详细信息。</li></ul><h3 id="容器网络连接和安全">容器网络连接和安全</h3><ul><li><strong>用户界面中的“容器清单与监控”</strong> - 可以在 NSX-T 用户界面中直观呈现容器集群、命名空间、网络策略和 Pod 级别清单。此外，还可以查看容器/K8 对象与 NSX-T 逻辑对象之间的相互关联。</li><li><strong>IPAM 灵活性</strong> - NSX 策略 IP 块 API 已得到增强，可划分为不同大小的 IP 子网。此功能可帮助 NSX Container Plugin 使用策略 API 为命名空间划分出可变大小的子网。</li><li><strong>NCP 组件运行状况监控</strong> - 可以使用 NSX Manager UI/API 监控 NSX Container Plugin 和相关组件运行状况信息，如 NCP 状态、NSX 节点代理状态、NSX Hyperbus Agent 状态。</li></ul><h3 id="nsx-cloud">NSX Cloud</h3><ul><li><strong>应用 ID 和 URL 筛选</strong> - 现在可以通过 NSX Cloud 为公有云中的选择性本机服务提供应用 ID 和 URL 功能。这扩大了在公有云中可使用 NSX Cloud 中的单个一致性策略保护的工作负载/服务的范围。我们从 AWS 和 Azure 中最常用的服务开始。</li><li><strong>支持 AWS 和 Azure 政府云</strong> - 商务云（AWS 和 Azure）上 NSX Cloud 的所有功能现都已扩展到政府云（在美国的所有政府云区域中）。功能受各自公有云提供商的 API/可用性支持的约束。</li><li><strong>支持 SLES 12sp3 (SUSE 12 SP3)</strong> - 现在支持具有运行 SLES 12sp3 的代理的公有云虚拟机。</li><li><strong>在无代理 VPC 和 VNet 中支持 VPN</strong> - 可以在内部部署的 Edge 之间建立 VPN 连接，也可以在公有云（AWS 和 Azure）中建立 VPN 连接，即使 VPC 和 VNet 在无代理模式下运行。</li></ul><h3 id="运维">运维</h3><ul><li><strong>同时支持精简和厚磁盘模式</strong> - NSX Manager 和 NSX Intelligence 设备现在同时支持精简模式和厚模式，并在部署时提供此选择。</li><li><strong>增加了 NSX Manager 的磁盘大小</strong> - 从 NSX-T 3.0 开始，NSX  Manager 的磁盘大小将从 200 GB 增加到 300 GB（集群中的每个 NSX Manager 节点）。在新的 NSX Manager 安装过程中，请确保底层数据存储具有足够的磁盘空间。在升级到 NSX-T 3.0 的过程中，请确保在升级 NSX Manager  之前添加了新的数据存储。</li><li><strong>减小了 NSX-T 中的 VIB 大小</strong> - 在所有 NSX 主机安装中，NSX-T 3.0 具有更小的 VIB 占用空间，以便您能够在其管理程序上安装 ESX 和其他第三方 VIB 以及 NSX。</li><li><strong>支持联合升级</strong> - 通过 NSX Federation，管理员可以按照《升级指南》中的详细兼容性矩阵表，以异步方式升级全局管理器和本地管理器。</li><li><strong>针对 N-vDS 的定期 MTU/VLAN 运行状况检查</strong> - 现在可以对 NSX 主机交换机（例如 N-vDS）执行运行状况检查。</li><li><strong>无中断就地升级</strong> - 对 NSX 传输节点的就地升级进行了更多增强，警告也更少，《升级指南》中详细介绍了这一方面。</li><li><strong>流跟踪策略支持</strong> - 现在可在“策略”选项卡（之前名为“简化”选项卡）下使用流跟踪调试工具。</li><li><strong>能够在主机级别执行 TN 安装并提供进度条</strong> - 管理员可以在 UI 中查看管理程序上的 NSX 安装详细进度。</li><li><strong>Spoofguard 的跟踪流观察值</strong> - 跟踪流调试工具现在会显示因 Spoofguard 功能而可能出现的任何数据包丢弃问题。</li><li><strong>在主机离开 VC 集群时可以自动卸载 NSX</strong> - 在用户将传输节点移至 vSphere 集群外部时，将自动卸载 NSX。《升级指南》中提供了有关该功能的更多详细信息。</li><li><strong>中央设备配置</strong> - NSX 现在支持以集中方式配置在 NSX Manager 和 Edge 节点之间通用的设置，而不要求管理员在每个节点上使用本地 CLI 配置。</li><li><strong>SNMP 陷阱</strong> - NSX 现在支持从 NSX Manager、Edge 节点和受支持管理程序主机的 NSX 组件生成 SNMP 陷阱通知。这些陷阱通知用于 NSX 生成的事件和警报。在 NSX 下载站点上，NSX MIB 作为 NSX 交付内容的一部分提供。</li><li><strong>NSX 警报框架和系统警报/事件</strong> - 对于此版本的 NSX，该产品现在支持的警报框架改进了警示和警报的交付，以帮助在生产环境中成功运行 NSX。NSX 文档中提供了受支持警报的列表。</li></ul><h3 id="清单">清单</h3><ul><li><strong>NSX 标记列表和批量操作支持</strong> - NSX-T 增加了 UI/API 支持，用于列出 NSX 标记，以及向多个虚拟机分配/取消分配 NSX 标记。</li><li><strong>物理服务器列表</strong> - NSX-T 增加了用于列出物理服务器的 UI 支持。</li></ul><h3 id="可用性和用户界面">可用性和用户界面</h3><ul><li><strong>网络拓扑的图形可视化</strong> - 提供 Tier-0 网关、Tier-1 网关、分段和连接工作负载（虚拟机和容器）的交互式网络拓扑图，而且能够导出为 PDF。</li><li><strong><em>*新的入门向导*</em></strong> - 引入了新的入门向导，只需三个简单步骤便可以为 VLAN 微分段准备集群。</li><li><strong>从搜索结果中快速访问操作和警报</strong> - 增强了搜索结果页面，可以快速访问相关操作和警报。在网络、安全、清单和系统对象中增加了更多搜索条件。</li><li><strong>NSX 策略与 Manager 模式的用户界面首选项</strong> - 您可以在用户界面中切换 NSX  策略模式和 NSX Manager 模式，并控制默认显示。默认情况下，新安装会在 NSX 策略模式下显示 UI，并且隐藏了 UI  模式切换器。如果环境中包含通过 NSX Manager 模式创建的对象（例如，通过 NSX 升级或云管理平台），默认情况下会在 UI 右上角显示 UI 模式切换器。</li><li><strong>针对系统设备概览的 UI 设计改进</strong> - 改进了 UI 设计布局，可显示 NSX 系统设备的资源活动和运行状态。</li></ul><h3 id="许可">许可</h3><ul><li><strong>新的 VMware NSX Data Center 许可证</strong> - 增加了对 2020 年 4 月推出的新附加模块许可证 VMware NSX Data Center Distributed Threat  Prevention 的支持，并继续支持 2018 年 6 月推出的 NSX Data Center  许可证（Standard、Professional、Advanced、Enterprise Plus 和 Remote Office  Branch Office）以及之前的 VMware NSX for vSphere  许可证密钥。此外，许可证使用情况报告还会使用内核、CPU、CCU 和虚拟机衡量指标捕获微分段、联合使用情况。分布式入侵检测使用情况基于每个  CPU。有关 NSX 许可证的详细信息，请参阅 VMware 知识库文章 <a href="https://kb.vmware.com/s/article/52462" target="_blank" rel="noopener">52462</a>。</li><li><strong>vShield Endpoint 管理支持</strong> - NSX-T 支持管理 vShield Endpoint 防病毒卸载功能。有关详细信息，请参见 VMware 知识库文章 <a href="http://kb.vmware.com/kb/2110078" target="_blank" rel="noopener">2110078</a>。</li><li><strong>默认许可证和评估密钥分发方面的更改</strong> - 默认安装的许可证是“NSX for vShield Endpoint”，此许可证只允许使用 NSX 来部署和管理 vShield Endpoint 的防病毒卸载功能。可以通过 VMware 销售或 VMware 评估网站请求评估许可证密钥。</li><li><strong>NSX 评估许可证到期</strong> - 在 60 天 NSX 评估许可证到期后，您可以删除对象，但不允许创建或编辑对象。</li></ul><h3 id="aaa-和平台安全性">AAA 和平台安全性</h3><ul><li><strong>通过 LDAP 进行基于 AD 的本机身份验证</strong> - 此功能增加了对 NSX 管理员和用户的支持，使其可以通过直接 AD (Active Directory) 与  LDAP（轻量级目录访问协议）的集成进行身份验证，并登入到 NSX-T 平台。大多数企业级/业务用户凭据都存储在基于 Microsoft 的  AD 中。直接 AD  配置简化了用户入场过程，在其使用方式不合适或增加操作复杂性的情况下不会带来配置其他身份系统的麻烦。此外，此功能还允许使用具备强大搜索选项的  NSX-T RBAC 功能，以确定用于角色分配的相关 AD 用户/组。支持安全（LDAPS、startTLS）和常规 LDAP  配置。现在，NSX-T 客户可以灵活地配置 Workspace One Access（之前称为 VIDM）或本机  AD，在某些情况下，还可以组合配置 vIDM 和直接 AD，以满足其运行需求。</li><li><strong>与 OpenLDAP 集成</strong> - 除了支持本机 AD 集成外，NSX-T 3.0 还能灵活地对使用 OpenLDAP 目录服务的用户进行身份验证并使之入场。</li><li><strong>vSphere with Kubernetes 中用于 NSX-T 的 AAA 功能</strong> - 在 vSphere 7.0 设备中运行容器化应用程序和 Kubernetes 功能的用户，可以利用有限数量的 NSX 网络连接功能并进行故障排除，而无需通过 vSphere 设备进行额外的身份验证。</li><li><strong>“代表”API 功能</strong> - 通过指示是否已代表另一个 NSX 用户调用 API 操作，允许跟踪派生的用户操作，尤其是在使用主体身份 (PI) 或服务帐户执行 API 调用的情况下。包含*“X-NSX-EUSER: &lt;username&gt;”* 标头的任何 API 调用都将导致审核日志中包含额外的用户活动信息 - <em>&quot;euser=&lt;username&gt;&quot;</em>。此功能对于深入的用户审计非常有用，例如，使用有关“某人”做了“某事”的上下文数据维护丰富的审计记录。</li><li><strong>远程用户基于会话的身份验证</strong> -  NSX-T 3.0  具有增强的身份验证功能，允许本地和远程用户创建基于 cookie 的会话，用于对基于 API 的活动进行身份验证和持久保存。新的增强功能简化了  API 用户的会话创建过程，并通过避免重复的身份验证促进了有效的 API 操作和安全合规性。支持基于 vIDM 和基于 LDAP 的远程用户。</li><li><strong>为 API 写入调用设置了独立的审核日志</strong> <strong>-</strong> 此功能支持检索仅包含 API 写入调用相关信息的审核日志内容。通过跟踪之前和之后的状态，提高了审计记录的可读性。</li><li><strong>启用/禁用基于 Cookie 的身份验证</strong> - NSX 管理员现在可以关闭基于 Cookie（基于会话）的 API 身份验证，从而改善 NSX-T 平台操作的安全状况。默认情况下，可以使用基于 Cookie 的身份验证，并且可以在关闭后重新启用。</li><li><strong>启用/禁用基本身份验证</strong> - 如果 NSX 管理员担心使用基本身份验证不安全，现在就可以对使用的 API 和 CLI 禁用（或重新启用）基本身份验证。默认情况下，支持基本身份验证。</li></ul><h3 id="nsx-data-center-for-vsphere-到-nsx-t-data-center-的迁移">NSX Data Center for vSphere 到 NSX-T Data Center 的迁移</h3><ul><li><strong>包含维护模式的迁移协调器</strong> - 使用 vSphere 7.0 和 vDS 7.0 时，迁移协调器会将主机迁移到现有 vDS（版本 7.0），而不是迁移到 N-VDS。这最大限度地降低了迁移对客户环境的影响。</li><li><strong>从 NSX Data Center for vSphere 迁移到使用 vDS 7.0 的 NSX-T Data Center</strong> - NSX 迁移协调器现在支持使用维护模式执行最终主机迁移步骤。在将主机从 NSX for vSphere 转换为 NSX-T  之前，此模式允许从主机迁移虚拟机。通过将主机置于维护模式，可以使用 vMotion 迁移虚拟机，以最大限度地降低对进出虚拟机的数据流量的影响。</li></ul><h3 id="nsx-intelligence">NSX Intelligence</h3><ul><li><a href="https://docs.vmware.com/cn/VMware-NSX-Intelligence/1.1/rn/VMware-NSX-Intelligence-11-Release-Notes.html" target="_blank" rel="noopener">VMware NSX Intelligence 1.1 发行说明</a>中详细介绍了 NSX Intelligence 1.1 中引入的新功能和增强功能。</li><li><a href="https://docs.vmware.com/cn/VMware-NSX-Intelligence/index.html" target="_blank" rel="noopener">NSX Intelligence 文档</a>中现在单独提供了可帮助您安装、配置、更新、使用和管理 NSX Intelligence 的文档。</li></ul><h3 id="兼容性和系统要求">兼容性和系统要求</h3><p>有关兼容性和系统要求信息，请参见<a href="https://docs.vmware.com/cn/VMware-NSX-T-Data-Center/3.0/installation/GUID-3E0C4CEC-D593-4395-84C4-150CD6285963.html" target="_blank" rel="noopener">《NSX-T Data Center 安装指南》</a>。</p><h3 id="api-弃用和行为变化">API 弃用和行为变化</h3><ul><li><strong>移除应用程序发现</strong> - 已弃用并移除此功能。</li><li>**从 NSX-T 2.4 和 2.5 升级后“高级网络连接和安全性”**<strong>UI 中的变化</strong> - 如果从 NSX-T Data Center 2.4 和 2.5 进行升级，在 NSX-T Data Center 3.0 中，通过单击“管理器”模式可使用“高级网络和安全”UI 选项卡下的菜单选项。</li><li><strong>API 弃用策略</strong> - VMware 现在会在 NSX API 指南中发布我们的 API 弃用策略，以帮助使用 NSX 实现自动化的客户了解哪些 API 被视为已弃用，以及未来何时会将它们从产品中移除。</li></ul><h3 id="api-和-cli-资源">API 和 CLI 资源</h3><p>请参见 <a href="https://code.vmware.com/apis/547/nsx-t" target="_blank" rel="noopener">code.vmware.com</a> 以使用 NSX-T Data Center API 或 CLI 实现自动化。</p><p>可从 <strong>API 参考</strong>选项卡获取 API 文档。可从<strong>文档</strong>选项卡获取 CLI 文档。</p><h3 id="本地化语言">本地化语言</h3><p>NSX-T Data Center 已本地化为多种语言：英语、德语、法语、日语、简体中文、韩语、繁体中文和西班牙语。由于 NSX-T Data Center 本地化使用浏览器语言设置，因此，请确保您的设置与期望的语言相匹配。</p><h2 id="下载链接">下载链接</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">链接: https://pan.baidu.com/s/1yqtXvdYVTp4QYygyLNYoLw  密码: knvs</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;VMware NSX-T Data Center 3.0  | 2020 年 4 月 7 日 | 内部版本 15946738&lt;/p&gt;
&lt;h2 id=&quot;通过-vmware-nsx-实现全栈网络安全虚拟化&quot;&gt;通过 VMware NSX 实现全栈网络安全虚拟化&lt;/h2&gt;
&lt;p&gt;使
      
    
    </summary>
    
    
    
      <category term="Download" scheme="http://sysin.org/tags/Download/"/>
    
      <category term="VMware" scheme="http://sysin.org/tags/VMware/"/>
    
  </entry>
  
  <entry>
    <title>Ubuntu 20.04 LTS (Focal Fossa) 安装笔记</title>
    <link href="http://sysin.org/article/Ubuntu-20.04-Install/"/>
    <id>http://sysin.org/article/Ubuntu-20.04-Install/</id>
    <published>2020-05-15T02:10:00.000Z</published>
    <updated>2020-08-12T07:42:56.283Z</updated>
    
    <content type="html"><![CDATA[<p>作者：gc(at)sysin.org，主页：<a href="https://www.sysin.org" target="_blank" rel="noopener">www.sysin.org</a></p><h2 id="新特性">新特性</h2><h3 id="updated-packages">Updated Packages</h3><p><strong>Linux Kernel 5.4</strong></p><p><strong>Toolchain Upgrades 🛠️</strong></p><pre><code>Ubuntu 20.04 LTS comes with refreshed state-of-the-art toolchain including new upstream releases of glibc 2.31, ☕ OpenJDK 11, rustc 1.41, GCC 9.3, 🐍 Python 3.8.2, 💎 ruby 2.7.0, php 7.4, 🐪 perl 5.30, golang 1.13.</code></pre><p><strong>Ubuntu Desktop</strong></p><ul><li>New graphical boot splash (integrates with the system BIOS logo).</li><li>Refreshed <a href="https://ubuntu.com/blog/new-ubuntu-theme-in-development-for-20-04" target="_blank" rel="noopener">Yaru theme</a> 🎨<ul><li><a href="https://twitter.com/m_wimpress/status/1232246572479590401" target="_blank" rel="noopener">Light/Dark theme switching</a></li></ul></li><li>GNOME 3.36</li><li><a href="https://www.mesa3d.org/" target="_blank" rel="noopener">Mesa</a> 20.0 OpenGL stack</li><li><a href="http://www.bluez.org/" target="_blank" rel="noopener">BlueZ</a> 5.53</li><li><a href="https://www.freedesktop.org/wiki/Software/PulseAudio/" target="_blank" rel="noopener">PulseAudio</a> 14.0 (prerelease)</li><li><a href="https://www.mozilla.org/en-US/firefox/75.0/releasenotes/" target="_blank" rel="noopener">Firefox 75.0</a></li><li><a href="https://www.thunderbird.net/en-US/thunderbird/68.7.0/releasenotes/" target="_blank" rel="noopener">Thunderbird 68.7.0</a></li><li><a href="https://wiki.documentfoundation.org/ReleaseNotes/6.4" target="_blank" rel="noopener">LibreOffice 6.4</a></li></ul><h3 id="network-configuration">Network configuration</h3><p>With this Ubuntu release, <a href="https://netplan.io/" target="_blank" rel="noopener">netplan.io</a> has grown multiple new features, some of which are:</p><ul><li>Basic support for configuring SR-IOV network devices. Starting with  netplan.io 0.99, users can declare Virtual Functions for every SR-IOV  Physical Function, configure those as any other networking device and  set hardware VLAN VF filtering on them.</li><li>Support for GSM modems via the <a href="https://wiki.ubuntu.com/NetworkManager" target="_blank" rel="noopener">NetworkManager</a> backend via the <code>modems</code> section.</li><li>Adding <a href="https://wiki.ubuntu.com/WiFi" target="_blank" rel="noopener">WiFi</a> flags for <code>bssid</code>/<code>band</code>/<code>channel</code> settings.</li><li>Adding ability to set <code>ipv6-address-generation</code> for the <a href="https://wiki.ubuntu.com/NetworkManager" target="_blank" rel="noopener">NetworkManager</a> backend and <code>emit-lldp</code> for networkd.</li></ul><h3 id="storagefile-systems">Storage/File Systems</h3><p>ZFS 0.8.3</p><h3 id="other-base-system-changes-since-1804-lts">Other base system changes since 18.04 LTS</h3><ul><li><p>Python3 by default（Python 3.8.  Python 2.7 已经移除）</p></li><li><p>Snap Store replaces ubuntu-software</p></li></ul><h3 id="ubuntu-server">Ubuntu Server</h3><ul><li><p>Installer</p><p>The live server installer is now the preferred media to install Ubuntu Server on all architectures.</p></li><li><p>QEMU</p><p>QEMU was updated to 4.2 release.</p></li><li><p>libvirt</p><p>libvirt was updated to version 6.0.</p></li><li><p>dpdk</p><p>Ubuntu 20.04 LTS includes the latest stable release 19.11.1 of the latest LTS series 19.11.x. The very latest (non-stable) version being 20.02 was not chosen for  downstream projects of DPDK (like Open vSwitch) not being compatible  yet.</p></li><li><p>Open vSwitch</p><p>Open vSwitch has been updated to 2.13.</p></li><li><p>Chrony</p><p>Chrony been updated to <a href="https://chrony.tuxfamily.org/news.html" target="_blank" rel="noopener">version 3.5</a>.</p></li><li><p>cloud-init</p><p>Cloud-init was updated to version 20.1-10.</p></li><li><p>PHP 7.4</p></li><li><p>Ruby 2.7</p></li><li><p>Ruby on Rails 5.2.3</p></li><li><p>Ubuntu HA/Clustering</p><p>KronosnetCorosync 3.0Pacemaker 2.0Resource AgentsFence Agentskeepalived</p></li><li><p>isc-kea 1.6 stable track（dhcp server）</p></li><li><p>Bind 9.16</p></li><li><p>OpenSSH updates with U2F Support</p></li><li><p>HAProxy 2.0</p></li><li><p>Apache, TLSv1.3, client cert auth</p></li><li><p>Samba 4.11</p></li><li><p>PostgreSQL 12</p></li><li><p>nginx</p><p>Starting in Focal Fossa, nginx-core no longer ships with the legacy geoip module enabled by default. If you are using the legacy geoip module in nginx,  you may run into upgrade issues if you do not deactivate the geoip  module in your configuration. This was done as part of the deprecation  of GeoIP legacy support.</p></li><li><p>Squid 4.x</p></li><li><p>s390x</p></li><li><p>OpenStack Ussuri</p></li><li><p>Ceph was updated to the 15.2.1 release</p></li></ul><p><strong>完整更新内容请查阅发行说明：</strong></p><ul><li>https://wiki.ubuntu.com/FocalFossa/ReleaseNotes</li></ul><h2 id="1-安装摘要">1. 安装摘要</h2><p>18.04：安装界面变化比较大，参看截图，默认 SSH Server 已经安装（测试 18.04.3 修改为需要手动勾选），没有时区选择界面</p><p>20.04：安装界面少了步骤的数字提示，参看截图，SSH Server 需要勾选安装，没有时区选择界面</p><p>注意：分区如果选择 LVM，默认 / 目录只使用了4G，需要编辑使用全部容量</p><h2 id="2-格式化网卡名称">2. 格式化网卡名称</h2><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">类似 CentOS 7，及 Ubuntu 16.04 开始，安装好后网卡名称变成 ens160 了</span><br><span class="line"><span class="meta">#</span> 编辑 grub 配置文件</span><br><span class="line">sudo vi /etc/default/grub</span><br><span class="line">修改 GRUB_CMDLINE_LINUX=""为GRUB_CMDLINE_LINUX="net.ifnames=0 biosdevname=0"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 直接使用sed编辑</span><br><span class="line">sudo sed -i "/^GRUB_CMDLINE_LINUX=""/c GRUB_CMDLINE_LINUX=\"net.ifnames=0 biosdevname=0\"" /etc/default/grub</span><br><span class="line"><span class="meta">#</span> 更新 grub 配置文件</span><br><span class="line">sudo update-grub</span><br><span class="line"><span class="meta">#</span> 然后下一节编辑配置文件并重启生效</span><br></pre></td></tr></table></figure></p><h2 id="3-网络配置">3. 网络配置</h2><p>查看 IP 地址信息</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip address</span><br><span class="line"># 简写 ip a</span><br><span class="line"># ifconfig也支持</span><br></pre></td></tr></table></figure></p><p>通过 netplan 管理网络</p><blockquote><p>18.04:cat /etc/network/interfacesifupdown has been replaced by netplan默认使用netplan管理网络</p><p>18.04默认配置文件：/etc/netplan/50-cloud-init.yaml</p><p>20.04:cat /etc/network/interfacescat: /etc/network/interfaces: No such file or directory</p><p>20.04默认配置文件：/etc/netplan/00-installer-config.yaml</p></blockquote><p>配置静态IP地址</p><p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">sudo</span> <span class="string">vim</span> <span class="string">/etc/netplan/00-installer-config.yaml</span></span><br><span class="line"><span class="comment"># 格式如下：</span></span><br><span class="line"><span class="attr">network:</span></span><br><span class="line"><span class="attr">  version:</span> <span class="number">2</span></span><br><span class="line"><span class="attr">  ethernets:</span></span><br><span class="line"><span class="attr">    eth0:</span> <span class="comment">#ens160修改为 eth0</span></span><br><span class="line"><span class="attr">      addresses:</span></span><br><span class="line"><span class="bullet">        -</span> <span class="number">10.19</span><span class="number">.190</span><span class="number">.5</span><span class="string">/24</span></span><br><span class="line"><span class="attr">      gateway4:</span> <span class="number">10.19</span><span class="number">.190</span><span class="number">.1</span></span><br><span class="line"><span class="attr">      nameservers:</span></span><br><span class="line"><span class="attr">        addresses:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="number">10.19</span><span class="number">.190</span><span class="number">.11</span></span><br><span class="line"><span class="bullet">          -</span> <span class="number">10.19</span><span class="number">.190</span><span class="number">.12</span></span><br><span class="line"><span class="attr">        search:</span></span><br><span class="line"><span class="bullet">          -</span> <span class="string">sysin.org</span></span><br></pre></td></tr></table></figure></p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 运行以下命令使配置生效</span><br><span class="line">sudo netplan apply</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 重启系统后彻底生效</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></p><p>配置为DHCP</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">echo '</span><br><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  ethernets:</span><br><span class="line">    eth0:</span><br><span class="line">      dhcp4: yes</span><br><span class="line">      dhcp6: yes</span><br><span class="line">' &gt; /etc/netplan/00-installer-config.yaml</span><br></pre></td></tr></table></figure></p><p>恢复传统的网络配置方式</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 可以恢复原有配置方式</span><br><span class="line">sudo apt install net-tools #ifconfig、netstat、route等命令集</span><br><span class="line">sudo apt install ifupdown #模板未执行该命令</span><br></pre></td></tr></table></figure></p><p>补充：yaml 基础</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">大小写敏感</span><br><span class="line">使用缩进表示层级关系</span><br><span class="line">缩进时不允许使用Tab键，只允许使用空格</span><br><span class="line">缩进的空格数目不重要，只要相同层级的元素左侧对齐即可</span><br></pre></td></tr></table></figure></p><p>缩进建议使用2个空格，使用短横线“-”表示列表时，”- “后面的条目需要对齐，如果使用超过2个空格缩进，格式将有误。</p><p>配置静态路由示例</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">network:</span><br><span class="line">  version: 2</span><br><span class="line">  ethernets:</span><br><span class="line">    eth0:</span><br><span class="line">      addresses:</span><br><span class="line">        - 10.19.190.5/24</span><br><span class="line">      #gateway4: 10.19.190.254</span><br><span class="line">      nameservers:</span><br><span class="line">        addresses:</span><br><span class="line">          - 10.19.190.11</span><br><span class="line">          - 10.19.190.12</span><br><span class="line">        search:</span><br><span class="line">          - sysin.org</span><br><span class="line">      routes:</span><br><span class="line">        - to: 0.0.0.0/0</span><br><span class="line">          via: 10.19.190.254</span><br><span class="line">          metric: 100</span><br><span class="line">        - to: 10.19.177.0/24</span><br><span class="line">          via: 10.19.190.1</span><br><span class="line">          metric: 100</span><br></pre></td></tr></table></figure></p><h2 id="4-修改主机名">4. 修改主机名</h2><p>设置主机名</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/hostname</span><br><span class="line"><span class="meta">#</span> 修改为主机名 ubuntu01</span><br><span class="line">ubuntu01</span><br></pre></td></tr></table></figure></p><p>添加domain name</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/hosts</span><br><span class="line"><span class="meta">#</span> 添加一行</span><br><span class="line">127.0.0.1  ubuntu01.sysin.org ubuntu01</span><br><span class="line"><span class="meta">#</span> 注意这里的格式，IP 后面先写 FQDN 再写主机名，与 CentOS 相同</span><br><span class="line"><span class="meta">#</span> 先写主机名后写 FQDN 不影响解析，但是'hostname -f'命令无法只能显示主机名</span><br></pre></td></tr></table></figure></p><p>查看FQDN</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hostname -f</span><br><span class="line"><span class="meta">#</span> 正确显示如下</span><br><span class="line">ubuntu01.sysin.org</span><br></pre></td></tr></table></figure></p><h2 id="5-设置时区">5. 设置时区</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo timedatectl set-timezone Asia/Shanghai</span><br></pre></td></tr></table></figure></p><h2 id="6-修改国内镜像源">6. 修改国内镜像源</h2><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span> 模板使用aliyun</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 备份</span><br><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 替换为阿里云镜像源</span><br><span class="line">sudo sed -i 's/cn.archive.ubuntu.com/mirrors.aliyun.com/' /etc/apt/sources.list</span><br><span class="line"><span class="meta">#</span> 提示：-i 写入文件，s 替换命令</span><br><span class="line"></span><br><span class="line">选择时区后镜像地址为cn.archive.ubuntu.com，注意修改替换命令</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 根据实际网络情况选择镜像，可以Ping镜像地址查看延迟</span><br><span class="line"><span class="meta">#</span> 网易163</span><br><span class="line">sudo sed -i 's/cn.archive.ubuntu.com/mirrors.163.com/' /etc/apt/sources.list</span><br><span class="line"><span class="meta">#</span> 中科大</span><br><span class="line">sudo sed -i 's/cn.archive.ubuntu.com/mirrors.ustc.edu.cn/' /etc/apt/sources.list</span><br><span class="line"><span class="meta">#</span> 清华</span><br><span class="line">sudo sed -i 's/cn.archive.ubuntu.com/mirrors.tuna.tsinghua.edu.cn/' /etc/apt/sources.list</span><br></pre></td></tr></table></figure></p><p>更新</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update #更新源</span><br><span class="line">sudo apt upgrade #更新已安装的包</span><br><span class="line">sudo apt dist-upgrade #升级系统</span><br><span class="line">sudo apt clean &amp;&amp; sudo apt autoclean #清理下载文件的存档</span><br><span class="line"><span class="meta">#</span> apt 是新版命令，替代 apt-get，apt-get 将来会淘汰</span><br></pre></td></tr></table></figure></p><h2 id="7-安装-snmp模板未配置">7. 安装 SNMP（模板未配置）</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install snmpd snmp</span><br></pre></td></tr></table></figure></p><h2 id="8-配置-ntp">8. 配置 NTP</h2><p>安装</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install chrony</span><br><span class="line"></span><br><span class="line">sudo systemctl enable chrony</span><br><span class="line">sudo systemctl start chrony</span><br><span class="line">sudo systemctl status chrony</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> 查看配置文件，暂使用默认配置</span><br><span class="line">cat /etc/chrony/chrony.conf</span><br></pre></td></tr></table></figure></p><p>chrony 自带一个交互式工具 chronyc，在配置文件中指定了时间服务器之后，如果想查看同步状态，可以进入这个交互式工具的交互界面。</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chronyc 有很多的子命令，可以输入 help 来查看</span><br><span class="line">chronyc&gt; help</span><br><span class="line">    选项：</span><br><span class="line">    sources [-v]    显示关于当前来源的信息</span><br><span class="line">    sourcestats [-v]      显示时间同步状态（如时间偏移了多少之类）</span><br></pre></td></tr></table></figure></p><h2 id="9-虚机安装-vmware-tools">9. 虚机安装 VMware Tools</h2><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Ubuntu 16.04 在 ESXi 中安装系统时已经自动安装了 vm-tools（18.04、20.04相同）</span><br><span class="line"># 20.04 自带 vm-tools 版本为 11.0.5，与 ESXi 7.0.0 匹配</span><br><span class="line">sudo apt install open-vm-tools</span><br></pre></td></tr></table></figure></p><h2 id="10-安装必备工具">10. 安装必备工具</h2><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install zip unzip</span><br><span class="line">sudo apt install lrzsz</span><br><span class="line">sudo apt install htop #20.04已默认安装（18.04已默认安装）</span><br><span class="line">sudo apt install lnav</span><br><span class="line">sudo apt install fd-find #fd命令，20.04已经收录</span><br><span class="line">sudo apt install ripgrep #rg命令，20.04已经收录</span><br><span class="line">sudo apt install tree</span><br><span class="line">sudo apt install build-essential #Following command will install essential commands like gcc, make etc.</span><br><span class="line">sudo apt install net-tools #ifconfig、netstat、route等命令集</span><br><span class="line">sudo apt install ntp ntpdate ntpstat #可选，模板未安装</span><br><span class="line"><span class="meta">#</span> nc lsof pstree 系统自带</span><br></pre></td></tr></table></figure></p><h2 id="11-开启-root-账号登录">11. 开启 root 账号登录</h2><p>Ubuntu 默认禁用 root 用户登录，安装时候创建特定用户作为管理员帐号，启用 root 用户步骤如下：</p><ul><li>修改 root 密码</li></ul><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure></p><ul><li>修改配置文件</li></ul><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak</span><br><span class="line"></span><br><span class="line">sudo vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></p><p>找到下面相关配置：</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Authentication:</span><br><span class="line"></span><br><span class="line">#LoginGraceTime 2m</span><br><span class="line">#PermitRootLogin prohibit-password</span><br><span class="line">#StrictModes yes</span><br><span class="line">#MaxAuthTries 6</span><br><span class="line">#MaxSessions 10</span><br><span class="line"></span><br><span class="line">#PubkeyAuthentication yes</span><br><span class="line"></span><br><span class="line"># Expect .ssh/authorized_keys2 to be disregarded by default in future.</span><br><span class="line">#AuthorizedKeysFile     .ssh/authorized_keys .ssh/authorized_keys2</span><br></pre></td></tr></table></figure></p><p>修改如下</p><p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">增加一句</span><br><span class="line">PermitRootLogin yes</span><br><span class="line"></span><br><span class="line">快速配置：</span><br><span class="line">sudo sed -i "/^#PermitRootLogin/c "PermitRootLogin" "yes"" /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></p><p>补充</p><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin prohibit-password  #允许root登录，但禁止适用密码认证</span><br><span class="line">可以配合使用Pubkey认证，修改PubkeyAuthentication yes</span><br></pre></td></tr></table></figure></p><ul><li>重启服务生效</li></ul><p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart ssh</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;作者：gc(at)sysin.org，主页：&lt;a href=&quot;https://www.sysin.org&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;www.sysin.org&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;新特性&quot;&gt;新特性&lt;/h2&gt;
&lt;h3 id=&quot;
      
    
    </summary>
    
    
    
      <category term="Linux" scheme="http://sysin.org/tags/Linux/"/>
    
      <category term="Ubuntu" scheme="http://sysin.org/tags/Ubuntu/"/>
    
  </entry>
  
</feed>
