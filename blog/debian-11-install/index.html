<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  

  <!-- Baidu Tongji -->
  
    <script type="text/javascript">
      // Originial
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?2bb536d3dd0b9939875b1491d84cce9c";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  
  
  
  <meta name="bytedance-verification-code" content="ogpqLENT9c9pWmb2XWie"/>
  
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title> Debian 11 “bullseye” 安装笔记 - sysin | SYStem INside | 软件与技术分享 </title>
  <meta name="description" content=" Debian 11 “bullseye” 安装笔记 - sysin | SYStem INside | 软件与技术分享 "/>
  <meta name="keyword" content=" Debian 11 “bullseye” 安装笔记 "/>
  <link rel="shortcut icon" href="/img/favicon.png"/>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
  <link rel="manifest" href="/site.webmanifest"/>
  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://sysin.org/blog/debian-11-install/">

  <!-- Place this tag in your head or just before your close body tag. -->
  <!-- <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script> -->

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- reward start -->
      <link rel="stylesheet" href="/css/donate.css"/>
      <!-- reward end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- waline start -->
      <script type="text/javascript" src="/js/waline.js"></script>
      <!-- <script type="text/javascript" src="https://unpkg.com/@waline/client@v2/dist/waline.js"></script> -->
      <link rel="stylesheet" href="/css/waline.css"/>
      <!-- <link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"/> -->
      <!-- waline end -->
    

    

    

    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <!-- <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css"> -->
  <!-- GC change CDN to local: css/font-awesome.min.css & fonts/fontawesome-webfont.* 5 file-->
  <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
  <!-- ThemeColor Icon -->
  <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" type="text/css"/> -->
  <link rel="stylesheet" href="/css/google-icon.css" type="text/css"/>

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->


<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="sysin" type="application/atom+xml">
<link rel="alternate" href="/feed.xml" title="sysin" type="application/rss+xml">
</head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/" ><img src="/img/logo.png" width="64" alt="sysin" height="64" border="0" style="vertical-align:middle"></a>
      <!-- <a class="navbar-brand" href="/">sysin</a> -->
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">首页</a>
          </li>

          
          
          
          
          <li>
            <a href="/about/">
              
              关于
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              归档
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              分类
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/donate/">
              
              捐助
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/tags/">
              
              标签
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>搜索</a>
          </li>
          

          <!-- LangSelect -->
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/home.jpg');
      --intro-header-background-image-url-post: url('/img/article_header/article_header_l.jpg');
      --intro-header-background-image-url-page: url('//img/article_header/article_header_l.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/home.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/article_header/article_header_l.jpg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/article_header/article_header_l.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/article_header/article_header_l.jpg'); */
      
    }

    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-11 col-lg-offset-0 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#Linux" title="Linux">Linux</a>
              
            </div>
            <h1>Debian 11 “bullseye” 安装笔记</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by sysin on
              2021-08-24
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">36</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">8.3k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-10 col-lg-offset-0 col-md-10 col-md-offset-1 post-container">

        <!-- pageview_count start -->
        
        <div style="color:gray" align="left">
        更新日期：Tue Aug 24 2021 10:00:38 GMT+0800，阅读量: <span class="waline-pageview-count" />
        <script type="module">
          import { pageviewCount } from '/js/pageview.mjs';
          pageviewCount({
            serverURL: 'https://discuss.sysin.org',
            path: window.location.pathname,
            // 可选的，用于自定选择器，默认为 `'.waline-pageview-count'`
            // selector: 'waline-pageview-count',
            // 可选的，是否在获取时增加访问量，默认为 `true`
            // update: true,
          });
        </script>
        </div>
        
        <!-- pageview_count end -->

        <!-- toppromotion start -->
        
        <!-- toppromotion end -->

        <p>请访问原文链接：<a href="/blog/debian-11-install/" title="Debian 11 “bullseye” 安装笔记">Debian 11 “bullseye” 安装笔记</a> 查看最新版。原创作品，转载请保留出处。</p>
<p>作者主页：<a href="https://sysin.org">sysin.org</a></p>
<hr>
<p><img src="https://www.debian.org/Pics//mini-dc21-regensburg.jpg" alt="sysin"></p>
<p>ISO 下载：<a href="/blog/debian-11/" title="Debian 11.10 - The Universal Operating System">Debian 11.10 - The Universal Operating System</a></p>
<p>OVF 下载：<a href="/blog/debian-11-ovf/" title="Debian 11.5 x86_64 OVF (sysin) - VMware 虚拟机模板">Debian 11.5 x86_64 OVF (sysin) - VMware 虚拟机模板</a></p>
<p>Debian 版本：11<br>
代号：bullseye<br>
发布日期：2021.08.14<br>
内核版本：5.10</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">uname</span> -a</span></span><br><span class="line">Linux debian 5.10.0-8-amd64 #1 SMP Debian 5.10.46-4 (2021-08-03) x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>
<p>Debian 11 是 LTS 长期支持版本，长达 5 年的生命周期，适合在生产环境运行。</p>
<h2 id="1-Debian-版本历史">1. Debian 版本历史</h2>
<p>Debian 是最早的 Linux 发行版之一，由 Ian Murdock（伊恩 · 默多克）创立。Ian Murdock 于 1973 年 4 月 28 日出生于德国的君斯坦市 (Konstanz, Germany)。他是 Debian GNU/Linux 发行版的创始人，也是商用 Linux 发行商 Progeny 公司的创始人。他曾就职于 Sun Microsystems, Inc，负责 Sun 公司的操作系统平台发展战略。在加入 Sun 公司之前，Ian Murdock 是 Linux 基金会 (Linux Foundation) 的首席技术长官 (CTO)，以及 Linux 平台交互标准 LSB (Linux Standard Base) 的主席，最后受聘于 Docker 公司，非常令人遗憾的是 Ian Murdock 于美国时间 2015 年 12 月 28 日 逝世，开源界和 Linux 业界痛失一位真正的天才！</p>
<p>Debian 于 1993 年 8 月 16 日由当时还在美国普渡大学念书的 Ian Murdock 首次发表。Debian 的名称中的 “deb” 取自他的女友（现在为其妻子）Debra，“ian” 取自 Ian Murdock 自己的名字。Ian Murdock 最初把他的系统称为 “Debian Linux Release”。在定义文件 Debian Manifesto 中，Ian Murdock 宣布将以开源的方式，本着 Linux 及 GNU 的精神发行一套 GNU/Linux 发行版。Ian Murdock 的目的是创建一个任何人都可以免费下载和使用的稳定的发行版，而不是让用户一个一个地收集应用程序并自己编译。</p>
<p>以下是最近的基本版本的发布日期：</p>
<p>• 2021-08-14: <a target="_blank" rel="noopener" href="https://distrowatch.com/11319">Distribution Release: Debian 11</a><br>
• 2019-07-07: <a target="_blank" rel="noopener" href="https://distrowatch.com/10602">Distribution Release: Debian 10</a><br>
• 2017-06-18: <a target="_blank" rel="noopener" href="https://distrowatch.com/9865">Distribution Release: Debian 9</a><br>
• 2015-04-26: <a target="_blank" rel="noopener" href="https://distrowatch.com/8914">Distribution Release: Debian GNU/Linux 8.0</a><br>
• 2013-05-05: <a target="_blank" rel="noopener" href="https://distrowatch.com/7844">Distribution Release: Debian GNU/Linux 7.0</a><br>
• 2011-02-06: <a target="_blank" rel="noopener" href="https://distrowatch.com/6499">Distribution Release: Debian GNU/Linux 6.0</a><br>
• 2009-02-15: <a target="_blank" rel="noopener" href="https://distrowatch.com/5334">Distribution Release: Debian GNU/Linux 5.0</a><br>
• 2007-04-08: <a target="_blank" rel="noopener" href="https://distrowatch.com/4155">Distribution Release: Debian GNU/Linux 4.0</a></p>
<p>详见：<a target="_blank" rel="noopener" href="https://wiki.debian.org/DebianReleases">DebianReleases</a></p>
<h2 id="2-Debian-11-的新变化">2. <a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html">Debian 11 的新变化</a></h2>
<p><strong>目录</strong>：</p>
<ul>
<li>
<p><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#idm114">2.1. 支持的架构</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#newdistro">2.2. 这次发布中有什么新变化？</a></p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#major-packages">2.2.1. 桌面和知名软件包</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#driverless-operation">2.2.2. 无驱动扫描和打印</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#open-command">2.2.3. 新的通用 open 命令</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#cgroupv2">2.2.4. 控制组 v2</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#persistent-journal">2.2.5. 持久化 systemd 日志</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#fcitx5">2.2.6. 新的 Fcitx 5 输入法</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#debian-med">2.2.7. 来自 Debian Med Blend 团队的新闻</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#exfat-in-linux-kernel">2.2.8. 内核 exFAT 支持</a></li>
<li><a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-whats-new.zh-cn.html#man-xx">2.2.9. 改进的 man page 翻译</a></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://wiki.debian.org/NewInBullseye">维基页面</a> 提供了更多关于这个主题的信息。</p>
</li>
</ul>
<h3 id="2-1-支持的架构">2.1. 支持的架构</h3>
<p>下面是 Debian bullseye 官方支持的架构：</p>
<ul>
<li>32 位 PC 机（<code>i386</code>）和 64 位 PC 机（<code>amd64</code>）</li>
<li>64 位 ARM（<code>arm64</code>）</li>
<li>ARM EABI（<code>armel</code>）</li>
<li>ARMv7（EABI 硬浮点 ABI，<code>armhf</code>）</li>
<li>小端序 MIPS（<code>mipsel</code>）</li>
<li>64 位小端序 MIPS（<code>mips64el</code>）</li>
<li>64 位小端序 PowerPC（<code>ppc64el</code>）</li>
<li>IBM System z（<code>s390x</code>）</li>
</ul>
<p>您可以在 <a target="_blank" rel="noopener" href="https://www.debian.org/ports/">Debian 移植页面</a> 阅读更多的关于您的架构的移植状态和移植细节的信息。</p>
<h3 id="2-2-这次发布中有什么新变化？">2.2. 这次发布中有什么新变化？</h3>
<p>Debian 的这次发行再次带来了比上一版本 buster 更多的软件；本次发行包括 11294 个新软件包，软件包的总数达到了 59551 个。这个发行版的多数软件包得到了更新：更新了 42821 个软件包（占 buster 软件包总数的 72%）。而且，由于各种原因，有相当数量的软件包（9519 个，占 buster 软件包总数的 16%）从这次发行中被删除了。您将不会看到这些包有任何更新，而且在包管理软件中它们会被标记为 “过时的”；参见 <a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-upgrading.zh-cn.html#obsolete">第 4.8 节 “过时的软件包”</a>。</p>
<p>2.2.1. 桌面和知名软件包</p>
<p>如往常一样，Debian 也提供了多个桌面程序和环境。提供的桌面环境包括 GNOME 3.38，KDE Plasma 5.20，LXDE 11，LXQt 0.16，MATE 1.24，以及 Xfce 4.16。</p>
<p>生产力应用也得到了升级，包括办公套件：</p>
<ul>
<li>LibreOffice 已升级到 7.0 版；</li>
<li>Calligra 已升级到 3.2 版；</li>
<li>GNUcash 已升级到 4.4 版；</li>
</ul>
<p>这次发行包含了许多软件的更新，其中包括：</p>
<table>
<thead>
<tr>
<th>软件包</th>
<th>在 10（buster）中的版本</th>
<th>在 11（bullseye）中的版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>Apache</td>
<td>2.4.38</td>
<td>2.4.48</td>
</tr>
<tr>
<td>BIND DNS 服务器</td>
<td>9.11</td>
<td>9.16</td>
</tr>
<tr>
<td>Cryptsetup</td>
<td>2.1</td>
<td>2.3</td>
</tr>
<tr>
<td>Dovecot MTA</td>
<td>2.3.4</td>
<td>2.3.13</td>
</tr>
<tr>
<td>Emacs</td>
<td>26.1</td>
<td>27.1</td>
</tr>
<tr>
<td>Exim 默认邮件服务器</td>
<td>4.92</td>
<td>4.94</td>
</tr>
<tr>
<td>GNU 编译器套件（默认编译器）</td>
<td>8.3</td>
<td>10.2</td>
</tr>
<tr>
<td>GIMP</td>
<td>2.10.8</td>
<td>2.10.22</td>
</tr>
<tr>
<td>GnuPG</td>
<td>2.2.12</td>
<td>2.2.20</td>
</tr>
<tr>
<td>Inkscape</td>
<td>0.92.4</td>
<td>1.0.2</td>
</tr>
<tr>
<td>GNU C 函数库</td>
<td>2.28</td>
<td>2.31</td>
</tr>
<tr>
<td>lighttpd</td>
<td>1.4.53</td>
<td>1.4.59</td>
</tr>
<tr>
<td>Linux 内核映像</td>
<td>4.19 系列</td>
<td>5.10 系列</td>
</tr>
<tr>
<td>LLVM/Clang 工具链</td>
<td>6.0.1 和 7.0.1（默认）</td>
<td>9.0.1 和 11.0.1（默认）</td>
</tr>
<tr>
<td>MariaDB</td>
<td>10.3</td>
<td>10.5</td>
</tr>
<tr>
<td>Nginx</td>
<td>1.14</td>
<td>1.18</td>
</tr>
<tr>
<td>OpenJDK</td>
<td>11</td>
<td>11</td>
</tr>
<tr>
<td>OpenSSH</td>
<td>7.9p1</td>
<td>8.4p1</td>
</tr>
<tr>
<td>Perl</td>
<td>5.28</td>
<td>5.32</td>
</tr>
<tr>
<td>PHP</td>
<td>7.3</td>
<td>7.4</td>
</tr>
<tr>
<td>Postfix MTA</td>
<td>3.4</td>
<td>3.5</td>
</tr>
<tr>
<td>PostgreSQL</td>
<td>11</td>
<td>13</td>
</tr>
<tr>
<td>Python 3</td>
<td>3.7.3</td>
<td>3.9.1</td>
</tr>
<tr>
<td>Rustc</td>
<td>1.41（<code>armel</code> 则为 1.34）</td>
<td>1.48</td>
</tr>
<tr>
<td>Samba</td>
<td>4.9</td>
<td>4.13</td>
</tr>
<tr>
<td>Vim</td>
<td>8.1</td>
<td>8.2</td>
</tr>
</tbody>
</table>
<p>2.2.2. 无驱动扫描和打印</p>
<p>使用 <code>CUPS</code> 打印以及使用 <code>SANE</code> 扫描对于越来越多的硬件型号已经可以实现无需任何驱动程序（通常是非自由驱动程序）即可正常操作，尤其是过去五年以来出现在市场上的新设备。</p>
<p>2.2.2.1. CUPS 和无驱动打印</p>
<p>使用以太网或无线网络连接的现代打印机已经可以使用 <a target="_blank" rel="noopener" href="https://wiki.debian.org/CUPSQuickPrintQueues">无驱动打印功能</a>，由 <code>CUPS</code> 和 <code>cups-filters</code> 软件包提供支持，此功能已在 <a target="_blank" rel="noopener" href="https://www.debian.org/releases/buster/amd64/release-notes/ch-whats-new.html#driverless-printing">Debian buster 发行注记</a> 中描述。Debian 11 “bullseye” 提供了新软件包 <code>ipp-usb</code>；它使用许多现代打印机所支持的、供应商中立的 <a target="_blank" rel="noopener" href="https://wiki.debian.org/CUPSDriverlessPrinting#ippoverusb">IPP-over-USB</a> 协议，且 <code>cups-daemon</code> 推荐安装该软件包。它使得 USB 设备可被视作网络设备，以将无驱动打印扩展至包括 USB 连接的打印机。详情 <a target="_blank" rel="noopener" href="https://wiki.debian.org/CUPSDriverlessPrinting#ipp-usb">在维基上</a> 有更多描述。</p>
<p>在 <code>ipp-usb</code> 软件包中包含的 systemd 服务文件将在使用 USB 的打印机连接到系统时启动 <code>ipp-usb</code> 守护程序，以使其可用于打印任务。默认情况下 <code>cups-browsed</code> 软件包应当可以自动完成配置，或者可以 <a target="_blank" rel="noopener" href="https://wiki.debian.org/SystemPrinting">手动设置本地无驱动打印队列</a>。</p>
<p>2.2.2.2. SANE 和无驱动扫描</p>
<p>官方的 <code>SANE</code> 无驱动后端在 <code>libsane1</code> 软件包中由 <code>sane-escl</code> 提供。另有一独立开发的无驱动后端 <code>sane-airscan</code>。两个后端均可使用 <a target="_blank" rel="noopener" href="https://wiki.debian.org/SaneOverNetwork#escl">eSCL 协议</a>，但 <code>sane-airscan</code> 另外也可使用 <a target="_blank" rel="noopener" href="https://wiki.debian.org/SaneOverNetwork#wsd">WSD</a> 协议。用户应该考虑在系统上同时安装两个后端。</p>
<p><code>eSCL</code> 和 <code>WSD</code> 均为网络协议。因此，它们在设备是 <code>IPP-over-USB</code> 设备的情况下也可经由 USB 连接生效（参见上文）。请注意 <code>libsane1</code> 推荐安装 <code>ipp-usb</code> 软件包。在软件包已安装的情况下，合适的设备可以在使用 USB 端口连接到系统的同时自动设置使用无驱动后端。</p>
<p>2.2.3. 新的通用 open 命令</p>
<p>新增加的 <strong>open</strong> 命令将作为 <strong>xdg-open</strong>（默认）或者 <strong>run-mailcap</strong> 的别名出现，具体实现则由 <a target="_blank" rel="noopener" href="https://manpages.debian.org//bullseye/dpkg/update-alternatives.1.html">update-alternatives(1)</a> 系统管理。它旨在作为命令行交互工具，帮助用户使用默认的应用程序打开文件；所使用的程序按照具体情况可以是图形界面程序。</p>
<p>2.2.4. 控制组 v2</p>
<p>在 bullseye 中，systemd 默认使用控制组 v2（cgroupv2），它提供了统一的资源控制层级架构。如果有需要，可以使用内核命令行参数重新启用旧有的 cgroups；请参见 <a target="_blank" rel="noopener" href="https://www.debian.org/releases/stable/amd64/release-notes/ch-information.zh-cn.html#openstack-cgroups">第 5.1.9 节 “OpenStack 和 cgroups v1”</a>  一节中适用于 OpenStack 的注记。</p>
<p>2.2.5. 持久化 systemd 日志</p>
<p>在 bullseye 中的 systemd 默认启用了持久日志的功能，日志文件存放于 <code>/var/log/journal/</code>。请参见 <a target="_blank" rel="noopener" href="https://manpages.debian.org//bullseye/systemd/systemd-journald.service.8.html">systemd-journald.service(8)</a> 以了解细节；请注意 Debian 中的日志除了默认的 <code>systemd-journal</code> 组外，还可以被 <code>adm</code> 用户组内的成员阅读。</p>
<p>这项改动应该不会对任何已有的传统日志守护程序（例如 <code>rsyslog</code>）产生任何干扰，但是不依赖这些守护程序所提供的特别功能的用户应当考虑将传统日志程序卸载并切换到仅使用新的 systemd 日志工具。</p>
<p>2.2.6. 新的 Fcitx 5 输入法</p>
<p>Fcitx 5 是用于中文、日语、韩语和其它许多语言的一个输入法。它是 buster 提供的 Fcitx 4 的后续版本。新版本增加了对 Wayland 的支持并改进了扩展支持。您可以在 <a target="_blank" rel="noopener" href="https://wiki.debian.org/I18n/Fcitx5">维基页面上</a> 阅读更多信息以及从旧版本迁移的方法。</p>
<p>2.2.7. 来自 Debian Med Blend 团队的新闻</p>
<p>Debian Med 团队正在积极打包用于研究病毒序列以及与流行病学研究相关的软件以抗击 <code>COVID-19</code> 和疫情大流行。下一个发行周期中，团队将继续进行这项任务，并专注于打包可以应用于这两个领域的机器学习工具。</p>
<p>除了添加生命科学和医药领域的新软件包之外，许多已有的软件包也得到了持续集成支持。</p>
<p>一些性能关键的应用程序现在受益于 <a target="_blank" rel="noopener" href="https://wiki.debian.org/SIMDEverywhere">SIMD Everywhere</a> 的实现。该软件库可以帮助软件包既支持更多的硬件平台（尤其是 <code>arm64</code>），又受益于处理器所提供的向量运算扩展带来的性能提升，例如 <code>amd64</code> 上的 <code>AVX</code>，或 <code>arm64</code> 上的 <code>NEON</code>。</p>
<p>如需安装由 Debian Med 团队维护的软件包，您可以安装名为 <code>med-*</code>*<code>*</code> 的元软件包；在 Debian bullseye 中，其版本号为 3.6.x。您还可以访问 <a target="_blank" rel="noopener" href="https://blends.debian.org/med/tasks">Debian Med 任务页面</a> 以查看 Debian 中全部可用的生物和医疗软件。</p>
<p>2.2.8. 内核 exFAT 支持</p>
<p>bullseye 是第一个提供支持 exFAT 文件系统的 Linux 内核的发行版本，且它默认使用该实现挂载 exFAT 文件系统。因此，用户不再需要使用 <code>exfat-fuse</code> 软件包所提供的用户空间文件系统实现。如果您要继续使用用户空间文件系统的实现，您需要在挂载 exFAT 文件系统时直接调用 <strong>mount.exfat-fuse</strong> 命令。</p>
<p>创建和检查 exFAT 文件系统的工具位于 <code>exfatprogs</code> 软件包，它由 Linux 内核 exFAT 实现的作者编写。由已有的 <code>exfat-utils</code> 软件包提供的独立实现仍然可用，但它不能与新的实现共同安装在系统上。我们推荐您迁移到使用 <code>exfatprogs</code> 软件包，尽管您需要注意并处理两者可能不互相兼容的命令行选项。</p>
<p>2.2.9. 改进的 man page 翻译</p>
<p>部分项目，例如 systemd、 util-linux、 OpenSSH 和 Mutt 的部分语言的手册页，例如法语、西班牙语和马其顿语，得到了明显改进。欲获得此项改进，请安装 <code>manpages-*</code>xx<code>*</code>（其中 <code>*</code>xx<code>*</code> 是您所需的自然语言的代码）。</p>
<p>在 bullseye 的生命周期中，进一步的翻译改进将会通过 <code>backports</code> 仓库提供。</p>
<h2 id="3-安装摘要">3. 安装摘要</h2>
<p>本例使用 Debian 11 AMD64（x86_64）CD：debian-11.0.0-amd64-netinst.iso 进行安装。</p>
<ol>
<li>语言选择，选择 English，Location 选择 China</li>
<li>设定 root 账号密码，并提示新建一个账号（普通用户）并设置密码</li>
<li>分区，默认 ext4 文件系统，可选 LVM（本例使用手动分区，<code>/boot</code> 2G，剩余为 <code>/</code>，安装后手动创建 <code>/swap.img</code> 作为 SWAP 分区）</li>
<li>软件包管理，可以选择本地镜像源（如果使用 DVD 安装默认将 cdrom 作为 source，也需要配置镜像，否则可能因依赖关系报错，例如 <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/1144976/libsensors5-or-libsensors-config-upgrade-problem">snmp</a>）</li>
<li>组件：默认选择 GNOME 桌面环境（这里取消）和 Standard System Utilities（保持勾选），勾选 SSH server</li>
</ol>
<h2 id="4-默认没有安装-sudo">4. 默认没有安装 sudo</h2>
<p>Debian 在安装过程中设置 root 密码，并提示创建一个普通用户，SSH server 需要手动勾选安装，root 默认不允许 SSH 登录，同时默认并没有 sudo，所以第一步必须配置 sudo，或者开启 root 账号 SSH 登录（存在安全性风险，不推荐）。</p>
<p>本例中安装时创建了一个名为 sa 的用户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">id</span> sa</span></span><br><span class="line">uid=1000(sa) gid=1000(sa) groups=1000(sa),24(cdrom),25(floppy),29(audio),30(dip),44(video),46(plugdev),109(netdev)</span><br></pre></td></tr></table></figure>
<p>安装 sudo：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install sudo</span><br></pre></td></tr></table></figure>
<p>将之前创建的普通用户添加到 sudo 组，即可获得管理员权限：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">usermod -a -G sudo sa</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-a=append，不改变原有附加组</span></span><br></pre></td></tr></table></figure>
<p>附：<code>/etc/sudoers</code> 默认配置如下。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># This file MUST be edited with the &#x27;visudo&#x27; command as root.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Please consider adding local content in /etc/sudoers.d/ instead of</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">directly modifying this file.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># See the man page for details on how to write a sudoers file.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">Defaults        env_reset</span></span><br><span class="line">Defaults        mail_badpass</span><br><span class="line">Defaults        secure_path=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Host <span class="built_in">alias</span> specification</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">User <span class="built_in">alias</span> specification</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Cmnd <span class="built_in">alias</span> specification</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">User privilege specification</span></span><br><span class="line">root    ALL=(ALL:ALL) ALL</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Allow members of group sudo to execute any <span class="built_in">command</span></span></span><br><span class="line"><span class="meta prompt_">%</span><span class="language-bash">sudo   ALL=(ALL:ALL) ALL</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">See sudoers(5) <span class="keyword">for</span> more information on <span class="string">&quot;@include&quot;</span> directives:</span></span><br><span class="line"></span><br><span class="line">@includedir /etc/sudoers.d</span><br></pre></td></tr></table></figure>
<h2 id="5-软件包管理入门">5. 软件包管理入门</h2>
<p>Debian 软件包管理叫做 Advanced Packaging Tool (APT)，是一套管理软件包和相关依赖的机制，可以实现应用程序的安装、移除和更新等。</p>
<p>如果您已经有了 Linux（RHEL、Ubuntu）或者 Unix（macOS、FreeBSD）任一产品的软件包管理工具使用经验，对于其他系统可以参看下表快速入门：</p>
<table>
<thead>
<tr>
<th>命令功能 / 系统</th>
<th>Darwin (macOS)</th>
<th>FreeBSD</th>
<th>Debian/Ubuntu</th>
<th>RHEL（dnf = yum）</th>
</tr>
</thead>
<tbody>
<tr>
<td>搜索和查找软件包</td>
<td>brew search</td>
<td>pkg search</td>
<td>apt list</td>
<td>yum list</td>
</tr>
<tr>
<td>查看软件包信息</td>
<td>brew info</td>
<td>pkg info</td>
<td>apt show</td>
<td>yum info</td>
</tr>
<tr>
<td>安装</td>
<td>brew install</td>
<td>pkg install</td>
<td>apt install</td>
<td>yum install</td>
</tr>
<tr>
<td>删除</td>
<td>brew uninstall/remove/rm</td>
<td>pkg delete/remove</td>
<td>apt remove</td>
<td>yum remove</td>
</tr>
<tr>
<td>删除不在使用的软件包</td>
<td>brew autoremove</td>
<td>pkg autoremove</td>
<td>apt autoremove</td>
<td>yum autoremove</td>
</tr>
<tr>
<td>更新 repo 列表</td>
<td>brew update</td>
<td>pkg update</td>
<td>apt update</td>
<td>yum makecache</td>
</tr>
<tr>
<td>更新软件包</td>
<td>brew upgrade</td>
<td>pkg upgrade</td>
<td>apt upgrade</td>
<td>yum upgrade/update</td>
</tr>
<tr>
<td>清理缓存临时文件等</td>
<td>brew cleanup</td>
<td>pkg clean -a</td>
<td>apt autoclean</td>
<td>yum clean all</td>
</tr>
</tbody>
</table>
<blockquote>
<p>备注 1：RHEL 8 开始，使用 dnf，但 yum 仍然可用，实际上两个命令都是相同的文件链接，等价。</p>
<p>备注 2：RHEL 此处用词包含其免费兼容发行版 AlmaLinux、Rocky Linux 以及退役的 CentOS。</p>
</blockquote>
<p>可以看到，CentOS 中更新 repo 列表的命令与其他不同，其他命令几乎都是相同或者极为类似。</p>
<p>当然 Ubuntu 是基于 Debian 构建，apt 使用方式是一样的。</p>
<p><strong>注意事项</strong>： 应该尽量避免以下行为。</p>
<ul>
<li>在 “<code>/etc/apt/sources.list</code>” 中不要包含 <strong><code>testing</code></strong> 或 <strong><code>unstable</code></strong>。</li>
<li>在 “<code>/etc/apt/sources.list</code>” 里不要在标准的 Debian 中混合使用其它非 Debian 的档案库，例如 Ubuntu。</li>
<li>不要建立 “<code>/etc/apt/preferences</code>”。</li>
<li>不了解会造成的全部影响，就不要通过配置文件改变软件包管理工具的默认行为。</li>
<li>不要使用 “<code>dpkg -i &lt;random_package&gt;</code>” 安装任何软件包。</li>
<li>绝不使用 “<code>dpkg --force-all -i &lt;random_package&gt;</code>” 安装任何软件包。</li>
<li>不要删除或修改 “<code>/var/lib/dpkg/</code>” 中的文件。</li>
<li>不要让从源码直接安装的程序覆盖系统文件。如果需要的话，将它们安装到 “<code>/usr/local</code>” 或 “<code>/opt</code>” 中。</li>
</ul>
<h2 id="6-创建一个管理员账号">6. 创建一个管理员账号</h2>
<p>默认配置下，创建一个管理员账号，即有 sudo 权限执行所有命令的用户：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -s /bin/bash -G sudo user1  #user1 为用户名</span><br><span class="line">passwd user1  #为 user1 设置密码</span><br></pre></td></tr></table></figure>
<p>备注：</p>
<p>-m 创建同名 home 目录</p>
<p>-s 指定 shell</p>
<p>-G 修改附加属组</p>
<h2 id="7-配置-vi">7. 配置 vi</h2>
<p>系统自带 vi 即 vim 8.2.2434，默认配置有点难用，使用 .vimrc 配置文件后报错，竟然不支持语法高亮：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">E319: Sorry, the command is not available in this version: syntax on</span><br></pre></td></tr></table></figure>
<p>通过 <code>apt list vim</code> 可以看到系统自带的实际是 vim-tiny</p>
<p>安装完整版的 vim：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install vim</span><br></pre></td></tr></table></figure>
<p>可以看到提示 update-alternatives：vi 和 vim 等都指向了 <code>/usr/bin/vim.basic</code></p>
<p><code>crontab -e</code> 仍会提示选择默认编辑器，注意选择 vim.basic 即可。</p>
<p><code>.vimrc</code> 配置文件参考如下：</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"><span class="comment">&quot; vim 示例配置文件 ~/.vimrc</span></span><br><span class="line"><span class="comment">&quot; by gc@sysin.org 2022.06.12</span></span><br><span class="line"><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span><span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 编码设置释义</span></span><br><span class="line"><span class="comment">&quot; vim 内部使用的字符编码方式</span></span><br><span class="line"><span class="comment">&quot;set encoding=编码</span></span><br><span class="line"><span class="comment">&quot;set enc=编码</span></span><br><span class="line"><span class="comment">&quot; vim 当前编辑的文件的字符编码方式，保存文件时也使用</span></span><br><span class="line"><span class="comment">&quot;set fileencoding=编码</span></span><br><span class="line"><span class="comment">&quot;set fenc=编码</span></span><br><span class="line"><span class="comment">&quot; vim 打开的文件的字符编码方式，按顺序，最前面的优先</span></span><br><span class="line"><span class="comment">&quot;fileencodings 是一个用逗号分隔的列表，简写 fencs</span></span><br><span class="line"><span class="comment">&quot;set fileencodings=编码</span></span><br><span class="line"><span class="comment">&quot; vim 所工作的终端的字符编码方式</span></span><br><span class="line"><span class="comment">&quot;set termencoding=编码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 编码设置</span></span><br><span class="line"><span class="keyword">set</span> encoding=utf-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> fileencoding=utf-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> fencs=utf-<span class="number">8</span>,gb18030,gbk,cp936,gb2312,big5</span><br><span class="line"><span class="keyword">set</span> termencoding=utf-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 语言设置</span></span><br><span class="line"><span class="keyword">set</span> langmenu=zh_CN.UTF-<span class="number">8</span></span><br><span class="line"><span class="keyword">set</span> helplang=<span class="keyword">cn</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 去掉 vi 的一致性</span></span><br><span class="line"><span class="keyword">set</span> nocompatible</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 显示行号</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">number</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 开启语法高亮</span></span><br><span class="line"><span class="keyword">syntax</span> <span class="keyword">on</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置字体</span></span><br><span class="line"><span class="comment">&quot;set guifont=Monaco:h13</span></span><br><span class="line"><span class="comment">&quot; solarized 主题设置在终端下的设置</span></span><br><span class="line"><span class="comment">&quot;let g:solarized_termcolors=256</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置不自动换行</span></span><br><span class="line"><span class="keyword">set</span> nowrap</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置以 unix 的格式保存文件（UNIX 系统下默认）</span></span><br><span class="line"><span class="keyword">set</span> fileformat=unix</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 自动缩进</span></span><br><span class="line"><span class="keyword">set</span> autoindent</span><br><span class="line"><span class="keyword">set</span> <span class="built_in">cindent</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; Tab 键的宽度 = 4 个空格</span></span><br><span class="line"><span class="keyword">set</span> tabstop=<span class="number">4</span></span><br><span class="line"><span class="comment">&quot; 统一缩进为 4</span></span><br><span class="line"><span class="keyword">set</span> softtabstop=<span class="number">4</span></span><br><span class="line"><span class="keyword">set</span> <span class="built_in">shiftwidth</span>=<span class="number">4</span></span><br><span class="line"><span class="comment">&quot; expandtab：缩进用空格来表示，noexpandtab：用制表符表示一个缩进</span></span><br><span class="line"><span class="keyword">set</span> expandtab</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 高亮显示匹配的括号</span></span><br><span class="line"><span class="keyword">set</span> showmatch</span><br><span class="line"><span class="comment">&quot; 匹配括号高亮的时间（单位是十分之一秒）</span></span><br><span class="line"><span class="keyword">set</span> matchtime=<span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 光标移动到 buffer 的顶部和底部时保持 3 行距离</span></span><br><span class="line"><span class="keyword">set</span> scrolloff=<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 启动显示状态行 (1), 总是显示状态行 (2)</span></span><br><span class="line"><span class="keyword">set</span> laststatus=<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 使退格键（backspace）正常处理 indent, eol, start 等</span></span><br><span class="line"><span class="keyword">set</span> backspace=<span class="number">2</span></span><br><span class="line"><span class="comment">&quot; 允许 backspace 和光标键跨越行边界</span></span><br><span class="line"><span class="comment">&quot;set whichwrap+=&lt;,&gt;,h,l</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 可以在 buffer 的任何地方使用鼠标（类似 office 中在工作区双击鼠标定位）</span></span><br><span class="line"><span class="keyword">set</span> mouse=<span class="keyword">a</span></span><br><span class="line"><span class="keyword">set</span> selection=exclusive</span><br><span class="line"><span class="keyword">set</span> selectmode=mouse,key</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 搜索忽略大小写</span></span><br><span class="line"><span class="keyword">set</span> ignorecase</span><br><span class="line"><span class="comment">&quot; 高亮显示匹配字符（回车后）</span></span><br><span class="line"><span class="keyword">set</span> hlsearch</span><br><span class="line"><span class="comment">&quot; 搜索实时高亮显示所有匹配的字符</span></span><br><span class="line"><span class="keyword">set</span> incsearch</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 设置当文件被改动时自动载入</span></span><br><span class="line"><span class="comment">&quot;set autoread</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 突出显示当前行</span></span><br><span class="line"><span class="keyword">set</span> cursorline</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 打开标尺，在屏幕右下角显示当前光标所处位置（设置了 statusline 可以忽略）</span></span><br><span class="line"><span class="keyword">set</span> ruler</span><br><span class="line"><span class="comment">&quot; 状态行显示的内容</span></span><br><span class="line"><span class="string">&quot;set statusline=%F%m%r%h%w\ [FORMAT=%&#123;&amp;ff&#125;]\ [TYPE=%Y]\ [ENC=%&#123;&amp;encoding&#125;]\ [POS=%l,%v][%p%%]\ %&#123;strftime(\&quot;%Y.%m.%d\ -\ %H:%M\&quot;</span>)&#125;</span><br><span class="line"><span class="keyword">set</span> statusline=\ %&lt;%F[%<span class="number">1</span>*%M%*%n%R%H]%=\ %<span class="keyword">y</span>\ %<span class="number">0</span>(%&#123;&amp;fileformat&#125;\ %&#123;&amp;encoding&#125;\ %<span class="keyword">l</span>,%<span class="keyword">c</span>%)\ %<span class="keyword">p</span>%%</span><br><span class="line"></span><br><span class="line"><span class="comment">&quot; 显示 Tab 键和行尾空格</span></span><br><span class="line"><span class="keyword">set</span> <span class="keyword">list</span></span><br><span class="line"><span class="comment">&quot;set listchars=tab:→■,trail:■</span></span><br><span class="line"><span class="comment">&quot;set listchars=tab:→▫,trail:□</span></span><br><span class="line"><span class="keyword">set</span> listchars=<span class="keyword">tab</span>:→·,trail:□</span><br></pre></td></tr></table></figure>
<h2 id="8-开启-root-账号登录的方法">8. 开启 root 账号登录的方法</h2>
<blockquote>
<p>不建议开启，以下步骤仅供参考。</p>
</blockquote>
<p>Debian 默认禁用 root SSH 密码登录（Pubkey 认证不受此限，默认启用），安装时候创建特定用户作为管理员帐号（通过 sudo 执行特权命令），启用 root 用户步骤如下：</p>
<ul>
<li>修改 root 密码（设置密码后可以通过控制台登录）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo passwd root</span><br></pre></td></tr></table></figure>
<ul>
<li>修改配置文件（启用 SSH 密码登录）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak</span><br><span class="line">sudo vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<p>找到下面相关配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Authentication:</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">LoginGraceTime 2m</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">PermitRootLogin prohibit-password</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">StrictModes <span class="built_in">yes</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">MaxAuthTries 6</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">MaxSessions 10</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">PubkeyAuthentication <span class="built_in">yes</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Expect .ssh/authorized_keys2 to be disregarded by default <span class="keyword">in</span> future.</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">AuthorizedKeysFile     .ssh/authorized_keys .ssh/authorized_keys2</span></span><br></pre></td></tr></table></figure>
<p>修改如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">PermitRootLogin prohibit-password</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">增加一句</span></span><br><span class="line">PermitRootLogin yes</span><br></pre></td></tr></table></figure>
<p>补充:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">PermitRootLogin prohibit-password  #允许 root 登录，但禁止使用密码认证</span><br><span class="line">可以配合使用 Pubkey 认证，默认 `PubkeyAuthentication yes`</span><br></pre></td></tr></table></figure>
<ul>
<li>或者直接快速配置</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo sed -i.bak &quot;/^#PermitRootLogin/c&quot;PermitRootLogin&quot;&quot;yes&quot;&quot; /etc/ssh/sshd_config</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line">sudo sed -i.bak &#x27;/^#PermitRootLogin/c\PermitRootLogin yes&#x27; /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>
<ul>
<li>重启服务生效</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart ssh</span><br></pre></td></tr></table></figure>
<h2 id="9-格式化网卡命名">9. 格式化网卡命名</h2>
<p>从 Debian 9 开始，（CentOS 7 开始，Ubuntu 16.04 开始），安装好后网卡名称变成了类似 ensxxx 这种随机名称（本例为 ens33，可能是其他数字）。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">编辑 grub 配置文件</span></span><br><span class="line">sudo vi /etc/default/grub</span><br><span class="line">修改 GRUB_CMDLINE_LINUX=&quot;&quot;为 GRUB_CMDLINE_LINUX=&quot;net.ifnames=0 biosdevname=0&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">直接使用 sed 编辑</span></span><br><span class="line">sudo sed -i &quot;/^GRUB_CMDLINE_LINUX=&quot;&quot;/c GRUB_CMDLINE_LINUX=\&quot;net.ifnames=0 biosdevname=0\&quot;&quot; /etc/default/grub</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">更新 grub 配置文件</span></span><br><span class="line">sudo update-grub</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">然后下一节编辑配置文件并重启生效</span></span><br><span class="line">sudo vi /etc/network/interfaces</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将 ensxxx 修改为 eth0</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启系统生效</span></span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>
<h2 id="10-网络配置">10. 网络配置</h2>
<p>查看 IP 地址信息：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip address</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">简写 ip a</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者使用 ifconfig</span></span><br><span class="line">ifconfig</span><br></pre></td></tr></table></figure>
<p>Debian 11 网络配置文件为：<code>/etc/network/interfaces</code>。</p>
<p>默认配置使用 DHCP，安装过程并没有手动配置提示。内容如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/network/interfaces</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">This file describes the network interfaces available on your system</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">and how to activate them. For more information, see interfaces(5).</span></span><br><span class="line"></span><br><span class="line">source /etc/network/interfaces.d/*</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The loopback network interface</span></span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">The primary network interface</span></span><br><span class="line">allow-hotplug ens33  #ens33 修改为 eth0</span><br><span class="line">iface ens33 inet dhcp  #ens33 修改为 eth0</span><br></pre></td></tr></table></figure>
<p>修改 IP 地址：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/network/interfaces</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改为以下内容：</span></span><br><span class="line">iface lo inet loopback</span><br><span class="line">auto lo</span><br><span class="line"></span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet static</span><br><span class="line">address 10.10.1.5</span><br><span class="line">netmask 255.255.255.0</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">broadcast 10.10.1.255 <span class="comment">#可选，上述配置了掩码</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">network 10.10.1.0 <span class="comment">#可选，上述配置了掩码</span></span></span><br><span class="line">gateway 10.10.1.1</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">dns-domain example.com</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">domain 和 search 不能共存；如果同时存在，后面出现的将会被使用。</span></span><br><span class="line">dns-search sysin.org</span><br><span class="line">dns-nameservers 10.10.1.1 8.8.8.8 #注意 debian 11 默认没有安装 resolvconf，所以需要手动在 resolv.conf 中编辑 DNS</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者安装 resolvconf 后，在这里配置，将自动更新 resolv.conf</span></span><br><span class="line">sudo apt install resolvconf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">iface eth0 inet6 auto <span class="comment">#ipv6 自动配置，不写则表示禁用了</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">DHCP 配置如下：</span></span><br><span class="line">auto eth0</span><br><span class="line">iface eth0 inet dhcp</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">配置 DNS</span></span><br><span class="line">cat /etc/resolv.conf #如果已经安装 resolvconf，不要手动编辑，直接在上述 interfaces 中编辑 dns</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">重启网络</span></span><br><span class="line">sudo systemctl restart networking</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sudo service networking restart</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以看到 Debian 网络配置方法并没有变更，Ubuntu 16.04 也是这样配置，但是 18.04 开始使用 netplan，20.04 同样使用 netplan 但是默认配置文件名称再次变更。</p>
</blockquote>
<p>配置多个 IP：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">auto eth0:0</span><br><span class="line">iface eth0:0 inet static</span><br><span class="line">    address 192.168.1.90</span><br><span class="line">    netmask 255.255.255.0</span><br><span class="line"></span><br><span class="line">auto eth0:1</span><br><span class="line">iface eth0:1 inet static</span><br><span class="line">    address 192.168.1.91</span><br><span class="line">    netmask 255.255.255.0</span><br></pre></td></tr></table></figure>
<p>添加静态路由（Linux 通用，临时，重启消失）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">route add -net 10.10.11.0/24 gw 10.10.1.1</span><br></pre></td></tr></table></figure>
<p>Debian 配置永久静态路由：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加</span></span><br><span class="line">cat &gt;&gt; /etc/network/interfaces &lt;&lt;EOF</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">static routes</span></span><br><span class="line">up ip route add 10.10.12.0/24 via 10.10.1.1 dev eth0</span><br><span class="line">up ip route add 10.10.13.0/24 via 10.10.1.1 dev eth0</span><br><span class="line">up ip route add 10.10.14.0/24 via 10.10.1.1 dev eth0</span><br><span class="line">up ip route add 10.10.15.0/24 via 10.10.1.1 dev eth0</span><br><span class="line">up ip route add 10.10.16.0/24 via 10.10.1.1 dev eth0</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">重启网络</span></span><br><span class="line">systemctl restart networking</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">验证</span></span><br><span class="line">ip route</span><br></pre></td></tr></table></figure>
<h2 id="11-修改主机名">11. 修改主机名</h2>
<p>设置主机名：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hostnamectl set-hostname debian01 --static</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改为主机名 ubuntu01</span></span><br></pre></td></tr></table></figure>
<p>或者：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/hostname</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改为主机名 debian01</span></span><br><span class="line">debian01</span><br></pre></td></tr></table></figure>
<p>添加 domain name：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/hosts</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加一行</span></span><br><span class="line">127.0.0.1  debian01.sysin.org debian01</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注意这里的格式，IP 后面先写 FQDN 再写主机名，与 CentOS 相同</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">先写 FQDN 后写主机名，顺序反了不影响解析，但是<span class="string">&#x27;hostname -f&#x27;</span>命令无法显示 FQDN，只能显示主机名</span></span><br></pre></td></tr></table></figure>
<p>查看 FQDN：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hostname -f</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">正确显示如下</span></span><br><span class="line">debian01.sysin.org</span><br></pre></td></tr></table></figure>
<h2 id="12-设置时区">12. 设置时区</h2>
<p>我们默认安装是已经正确设置时区，但是如果是第三方云主机时区就未必符合本地要求。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看时区，有 CST 正确</span></span><br><span class="line">date</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">设置</span></span><br><span class="line">sudo timedatectl set-timezone Asia/Shanghai</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者使用向导选择</span></span><br><span class="line">tzselect</span><br></pre></td></tr></table></figure>
<h2 id="13-修改镜像源">13. 修改镜像源</h2>
<p>安装的时候已经可以选择 mirror，加速本地访问，可以访问 <a target="_blank" rel="noopener" href="https://www.debian.org/mirror/list">Debian worldwide mirror sites</a> 查看选择可用的镜像站点。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">模板使用 mirror.sjtu.edu.cn</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">备份</span></span><br><span class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">比如将默认官方中国像源 ftp.cn.debian.org 替换为 mirror.sjtu.edu.cn</span></span><br><span class="line">sudo sed -i &#x27;s/ftp.cn.debian.org/mirror.sjtu.edu.cn/&#x27; /etc/apt/sources.list</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># 中国可选镜像站点如下（可能有所变化）</span></span></span><br><span class="line">ftp.cn.debian.org</span><br><span class="line">mirrors.163.com</span><br><span class="line">mirrors.bfsu.edu.cn</span><br><span class="line">mirrors.hit.edu.cn</span><br><span class="line">mirror.sjtu.edu.cn （注意 mirror 没有 s）</span><br><span class="line">mirrors.tuna.tsinghua.edu.cn</span><br><span class="line">mirrors.ustc.edu.cn</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">可以 ping 站点名称，对比一下延迟来选择</span></span><br></pre></td></tr></table></figure>
<p>更新：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update #更新源</span><br><span class="line">sudo apt upgrade #更新已安装的包</span><br><span class="line">sudo apt dist-upgrade #升级系统</span><br><span class="line">sudo apt clean &amp;&amp; sudo apt autoclean #清理下载文件的存档</span><br></pre></td></tr></table></figure>
<h2 id="14-安装-SNMP-2">14. 安装 SNMP</h2>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install snmpd snmp</span><br></pre></td></tr></table></figure>
<p>（模板仅仅安装，未配置）</p>
<h2 id="15-配置-NTP（正确方法更新）">15. 配置 NTP（正确方法更新）</h2>
<p><strong>(1) 默认使用 systemd-timesyncd（NTP Client）进行时间同步</strong>：</p>
<p>也适用于 Ubuntu 20.04 和 22.04。</p>
<p>配置文件默认如下：<br>
<code>vi /etc/systemd/timesyncd.conf</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[Time]</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">NTP=</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">FallbackNTP=0.debian.pool.ntp.org 1.debian.pool.ntp.org 2.debian.pool.ntp.org 3.debian.pool.ntp.org</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">RootDistanceMaxSec=5</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">PollIntervalMinSec=32</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">PollIntervalMaxSec=2048</span></span><br></pre></td></tr></table></figure>
<p>默认 NTP 服务器使用 <a target="_blank" rel="noopener" href="http://0-3.debian.pool.ntp.org">0-3.debian.pool.ntp.org</a></p>
<p>如果使用其他的服务器，增加一行，多个地址用空格分隔：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NTP=ntp1.aliyun.com ntp2.aliyun.com</span><br></pre></td></tr></table></figure>
<p>重启服务生效：<br>
<code>systemctl restart systemd-timesyncd</code></p>
<p>手动同步（<code>sudo atp install ntpdate</code>）：<br>
<code>ntpdate -s ntp1.aliyun.com</code></p>
<p>查看同步状态：</p>
<p><code>timedatectl timesync-status</code></p>
<p>本例使用该默认配置。</p>
<p><strong>(2) 配置使用 chrony</strong>：</p>
<p>也适用于 Ubuntu 18.04、20.04 和 22.04。</p>
<p>也可以禁用默认的 NTP Client（命令：<code>sudo timedatectl set-ntp off</code>），使用 chrony 进行时间同步。</p>
<p>安装</p>
<p>这里使用 chrony 替代传统的 ntp，当然 ntp 也是可用的，两种默认都没有安装。</p>
<p>安装 chrony：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install chrony</span><br><span class="line"></span><br><span class="line">sudo systemctl enable chrony</span><br><span class="line">sudo systemctl start chrony</span><br><span class="line">sudo systemctl status chrony</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看配置文件，暂使用默认配置</span></span><br><span class="line">cat /etc/chrony/chrony.conf</span><br></pre></td></tr></table></figure>
<p>chrony 自带一个交互式工具 chronyc，在配置文件中指定了时间服务器之后，如果想查看同步状态，可以进入这个交互式工具的交互界面。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chronyc 有很多的子命令，可以输入 help 来查看</span><br><span class="line"><span class="meta prompt_">chronyc&gt; </span><span class="language-bash"><span class="built_in">help</span></span></span><br><span class="line">    选项：</span><br><span class="line">    sources [-v]    显示关于当前来源的信息</span><br><span class="line">    sourcestats [-v]      显示时间同步状态（如时间偏移了多少之类）</span><br></pre></td></tr></table></figure>
<p>查看：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chronyc sources -v</span><br><span class="line">chronyc sourcestats -v</span><br></pre></td></tr></table></figure>
<p>最基本配置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> /etc/chrony/chrony.conf</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Welcome to the chrony configuration file. See chrony.conf(5) <span class="keyword">for</span> more</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">information about usable directives.</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Include configuration files found <span class="keyword">in</span> /etc/chrony/conf.d.</span></span><br><span class="line">confdir /etc/chrony/conf.d</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Use Debian vendor zone.</span></span><br><span class="line">pool 2.debian.pool.ntp.org iburst</span><br></pre></td></tr></table></figure>
<p>修改 <code>pool 2.debian.pool.ntp.org iburst</code> 为指定的 NTP 服务器。</p>
<p>通常是修改为内网中的 NTP，保持时间的统一和可靠同步，否则一般不用修改。</p>
<p>例如 Ubuntu 中默认的是：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pool ntp.ubuntu.com        iburst maxsources 4</span><br><span class="line">pool 0.ubuntu.pool.ntp.org iburst maxsources 1</span><br><span class="line">pool 1.ubuntu.pool.ntp.org iburst maxsources 1</span><br><span class="line">pool 2.ubuntu.pool.ntp.org iburst maxsources 2</span><br></pre></td></tr></table></figure>
<p>这里的 pool 表示一组服务器，也可以用 sever 指令替代，标识一台服务器，可以是域名也可以是 IP 地址。</p>
<h2 id="16-虚机安装-VMware-Tools">16. 虚机安装 VMware Tools</h2>
<p>默认自动安装，查看状态如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看版本</span></span><br><span class="line">vmtoolsd -v</span><br><span class="line">VMware Tools daemon, version 11.2.5.26209 (build-17337674)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看运行状态</span></span><br><span class="line">systemctl status vmtoolsd</span><br></pre></td></tr></table></figure>
<p>虚机会自动安装，如果未安装，执行如下命令安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install open-vm-tools</span><br></pre></td></tr></table></figure>
<h2 id="17-安装必备工具">17. 安装必备工具</h2>
<p>根据需要安装自己常用的必备工具：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">sudo apt -y install zip unzip</span><br><span class="line">sudo apt -y install lrzsz</span><br><span class="line">sudo apt -y install htop #已经收录</span><br><span class="line">sudo apt -y install lnav</span><br><span class="line">sudo apt -y install fd-find #fd 命令，已经收录，命令为 fdfind</span><br><span class="line">sudo ln -s /usr/bin/fdfind /usr/local/bin/fd</span><br><span class="line">sudo apt -y install ripgrep #rg 命令，已经收录</span><br><span class="line">sudo apt -y install tree</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sudo apt -y install net-tools <span class="comment">#ifconfig、netstat、route 等命令集，默认安装</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">sudo apt -y install ntp ntpdate ntpstat <span class="comment">#可选，模板仅安装 ntpdate</span></span></span><br><span class="line">sudo apt -y install ntpdate</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">注意 debian 11 默认没有安装 resolvconf，所以需要手动在 resolv.conf 中编辑 DNS</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者安装 resolvconf 后，在这里配置，将自动更新 resolv.conf</span></span><br><span class="line">sudo apt -y install resolvconf</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">nc lsof 系统自带</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">pstree</span></span><br><span class="line">sudo apt -y install psmisc</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">ncdu：NCurses Disk Usage</span></span><br><span class="line">sudo apt -y install ncdu</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">dstat 监控 CPU、磁盘和网络使用率</span></span><br><span class="line">sudo apt -y install dstat</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">终端复用器</span></span><br><span class="line">sudo apt -y install screen</span><br><span class="line">sudo apt -y install tmux</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">exa：<span class="built_in">ls</span> 增强</span></span><br><span class="line">sudo apt -y install exa</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">duf 未收录</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">procs 未收录</span></span><br><span class="line">sudo apt -y install git</span><br><span class="line">sudo apt -y install build-essential #Following command will install essential commands like gcc, make etc.</span><br></pre></td></tr></table></figure>
<h2 id="18-Shell-配置">18. Shell 配置</h2>
<h3 id="命令自动补全忽略大小写">命令自动补全忽略大小写</h3>
<p>该配置针对 Bash，仅使用 Zsh 可以忽略。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;set completion-ignore-case on&#x27; &gt;&gt; ~/.inputrc</span><br></pre></td></tr></table></figure>
<h3 id="修改-vmrc（vim-配置文件）">修改 vmrc（vim 配置文件）</h3>
<p>为当前用户创建 ~/.vimrc，内容参看上述 “配置 vi”</p>
<p>为将 .vimrc 添加到默认用户配置文件 <code>cp ~/.vimrc /etc/skel/.vimrc</code></p>
<h3 id="ll-常规版">ll 常规版</h3>
<p>一般 Linux 中默认定义了 ll 别名，但参数比较少，需要使用更加强大的 ll 别名。</p>
<p>Debian 默认并没有定义 ll 别名。</p>
<p>写入环境变量（当前用户优先执行）：</p>
<p>bash：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;alias ll=&quot;ls -lahF --color=auto --time-style=long-iso&quot;&#x27; &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>
<p>zsh（稍后配置 zsh）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#x27;alias ll=&quot;ls -lahF --color=auto --time-style=long-iso&quot;&#x27; &gt;&gt; ~/.zshrc</span><br></pre></td></tr></table></figure>
<p>注意：仅仅针对当前用户，写入全局用户配置文件：/etc/skel/.bashrc 或者 /etc/skel/.zshrc</p>
<h3 id="高级版-ls：以数字显示权限">高级版 ls：以数字显示权限</h3>
<p>这里我们把命令叫做 lll</p>
<p>命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls -lahF --color=auto --time-style=long-iso | awk &#x27;&#123;k=0;s=0;for(i=0;i&lt;=8;i++)&#123;k+=((substr($1,i+2,1)~/[rwxst]/)*2^(8-i))&#125;j=4;for(i=4;i&lt;=10;i+=3)&#123;s+=((substr($1,i,1)~/[stST]/)*j);j/=2&#125;if(k)&#123;printf(&quot;%0o%0o &quot;,s,k)&#125;print&#125;&#x27;</span><br></pre></td></tr></table></figure>
<p>创建文件</p>
<blockquote>
<p>在使用 cat EOF 中出现 $ 变量通常会直接被执行，显示执行的结果。若想保持 $ 变量不变需要使用 \ 符进行注释。</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果非 root 用户，请先切换到 root</span></span><br><span class="line">sudo -i</span><br><span class="line">cat &gt; /usr/local/bin/lll &lt;&lt;EOF</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">ls -lahF --color=auto --time-style=long-iso | awk &#x27;&#123;k=0;s=0;for(i=0;i&lt;=8;i++)&#123;k+=((substr(\$1,i+2,1)~/[rwxst]/)*2^(8-i))&#125;j=4;for(i=4;i&lt;=10;i+=3)&#123;s+=((substr(\$1,i,1)~/[stST]/)*j);j/=2&#125;if(k)&#123;printf(&quot;%0o%0o &quot;,s,k)&#125;print&#125;&#x27;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果非 root 用户，无需切换 root 执行如下命令：</span></span><br><span class="line">sudo sh -c &quot;cat &gt; /usr/local/bin/lll&quot; &lt;&lt;EOF</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">ls -lahF --color=auto --time-style=long-iso | awk &#x27;&#123;k=0;s=0;for(i=0;i&lt;=8;i++)&#123;k+=((substr(\$1,i+2,1)~/[rwxst]/)*2^(8-i))&#125;j=4;for(i=4;i&lt;=10;i+=3)&#123;s+=((substr(\$1,i,1)~/[stST]/)*j);j/=2&#125;if(k)&#123;printf(&quot;%0o%0o &quot;,s,k)&#125;print&#125;&#x27;</span><br><span class="line">EOF</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">赋予执行权限：</span></span><br><span class="line">chmod +x /usr/local/bin/lll</span><br></pre></td></tr></table></figure>
<h3 id="Zsh">Zsh</h3>
<p>以下针对当前用户有效，建议使用全局配置，参看 <a href="https://sysin.org/blog/linux-zsh-all/">其他文章</a>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Zsh</span></span><br><span class="line">sudo apt install zsh</span><br><span class="line"></span><br><span class="line">sudo chsh -s /bin/zsh</span><br><span class="line">sudo apt install git</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">通过 https://www.ipaddress.com 查询，美国地址有效</span></span><br><span class="line">sudo sh -c &quot;echo&#x27;199.232.96.133 raw.githubusercontent.com&#x27;&gt;&gt; /etc/hosts&quot;</span><br><span class="line"></span><br><span class="line">sudo sh -c &quot;$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span><br><span class="line"></span><br><span class="line">sed -i &#x27;/^ZSH_THEME=.*/c ZSH_THEME=&quot;ys&quot;&#x27; ~/.zshrc</span><br><span class="line"></span><br><span class="line">echo &#x27;alias ll=&quot;ls -lahF --color=auto --time-style=long-iso&quot;&#x27; &gt;&gt; ~/.zshrc</span><br><span class="line"></span><br><span class="line">git clone --depth=1 https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting</span><br><span class="line"></span><br><span class="line">sed -i &#x27;/^plugins=.*/c plugins=(git zsh-syntax-highlighting)&#x27; ~/.zshrc</span><br><span class="line"></span><br><span class="line">source  ~/.zshrc</span><br></pre></td></tr></table></figure>
<h2 id="19-清理并制作镜像模板">19. 清理并制作镜像模板</h2>
<p>清理 apt 缓存</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt clean &amp;&amp; sudo apt autoclean #清理下载文件的存档</span><br></pre></td></tr></table></figure>
<p>清理临时文件夹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /tmp/*  # 清空临时文件夹</span><br></pre></td></tr></table></figure>
<p>清空历史记录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">比较完整的清空历史记录</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">debian/ubuntu use auth.log</span></span><br><span class="line">rm -f /var/log/auth.log.*</span><br><span class="line">echo &gt; /var/log/auth.log</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">rm</span> -f /var/log/audit/audit*</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">echo</span> &gt; /var/log/audit/audit.log</span></span><br><span class="line">rm -f /var/log/secure*</span><br><span class="line">echo &gt; /var/log/secure</span><br><span class="line">rm -f /var/log/btmp*</span><br><span class="line">echo &gt; /var/log/btmp</span><br><span class="line">echo &gt; /var/log/lastlog</span><br><span class="line">rm -f /var/log/wtmp*</span><br><span class="line">echo &gt; /var/log/wtmp</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">以上需要 root，以下当前用户执行</span></span><br><span class="line">echo &gt; ~/.bash_history</span><br><span class="line">echo &gt; ~/.zsh_history</span><br><span class="line">history -c</span><br></pre></td></tr></table></figure>
<p>至此，Debian 的基本配置已经完成，可以制作模板了。</p>
<h2 id="20-Gnome-桌面环境">20. Gnome 桌面环境</h2>
<p>如果需要在命令行下安装桌面环境，操作如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">GNOME 3 and GNOME Classic desktop environment</span></span><br><span class="line">sudo tasksel install desktop gnome-desktop</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">要安装 KDE 桌面环境将 以上命令中的 gnome-desktop 替换为 kde-desktop</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">laptop tools (optional)</span></span><br><span class="line">sudo tasksel install laptop</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start the graphical desktop environment by default on boot</span></span><br><span class="line">sudo systemctl set-default graphical.target</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">start desktop <span class="keyword">in</span> console</span></span><br><span class="line">startx</span><br></pre></td></tr></table></figure>
<h2 id="21-关于防火墙或者包过滤">21. 关于防火墙或者包过滤</h2>
<p>Debian 11 默认使用 nftables 作为 netfilter 前端，使用 nft 命令进行管理，但是默认并没有启用。</p>
<p>Linux 内核嵌入了 netfilter 防火墙，可以从用户空间使用 iptables、ip6tables、arptables 和 ebtables 命令对其进行控制。然而，Netfilter iptables 命令正在被 nftables 取代，这避免了它的许多问题。它的设计涉及较少的代码重复，并且只需使用 nft 命令即可对其进行管理。</p>
<p>Debian Buster（即 Debian 10，包括 11）默认使用 nftables 框架。</p>
<p>要在 Debian 中启用默认防火墙，请执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">apt -y install nftables</span></span><br><span class="line">Reading package lists... Done</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">systemctl <span class="built_in">enable</span> nftables.service</span></span><br><span class="line">Created symlink /etc/systemd/system/sysinit.target.wants/nftables.service → /lib/systemd/system/nftables.service.</span><br></pre></td></tr></table></figure>
<p>关于 <code>nft</code> 命令的语法和用例，参看其他文章。</p>


        <hr>
          <!-- comment_tips start -->
          
            <!-- comment_tips end -->

        <div align="center">
          <a href="/donate/">捐助本站 ❤️ Donate</a>
        </div>

        <!-- promotion start -->
        
          <div align="center">
            <p>
              <a href="https://cloud.tencent.com/act/cps/redirect?redirect=2446&cps_key=78f957e545ecb2e5e2720d6ccf030209&from=console" target="_blank"><img src="/img/banner-qcloud.webp?v20230203" style="cursor:pointer;" alt="点击访问官方网站" /></a>
            </p>
          </div>
          <hr>
          
          <!-- promotion end -->

        <!-- Pager -->
        <ul class="pager">
          
          <li class="previous">
            <a href="/blog/tar-no-path/" data-toggle="tooltip" data-placement="top" title="tar 打包文件夹或者文件，不带路径，去除路径">&larr; Previous Post</a>
          </li>
          
          
          <li class="next">
            <a href="/blog/vmware-vsphere-bitfusion-4/" data-toggle="tooltip" data-placement="top" title="VMware vSphere Bitfusion 4.0 - 面向 AI 和 ML 应用提供弹性基础架构">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      文章用于推荐和分享优秀的软件产品及其相关技术，所有软件默认提供官方原版（免费版或试用版），免费分享。对于部分产品笔者加入了自己的理解和分析，方便学习和研究使用。任何内容若侵犯了您的版权，请联系作者删除。如果您喜欢这篇文章或者觉得它对您有所帮助，或者发现有不当之处，欢迎您发表评论，也欢迎您分享这个网站，或者赞赏一下作者，谢谢！
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
          <!-- reward Srtart -->
          <!--赞赏-->

    <div class="reward">
        <div class="reward-button">赞 <span class="reward-code">
            <span class="alipay-code"> <img class="alipay-img" src="/img/alipay-s-68.webp"><b>支付宝赞赏</b></span>
            <span class="wechat-code"> <img class="wechat-img" src="/img/wechatpay-s-68.webp"><b>微信赞赏</b> </span>
            </span></div>
        <p class="reward-notice">赞赏一下</p>
    </div>

<!--赞赏end-->
          <!-- reward End -->
        

        
        <!-- Sharing Srtart -->
        <!-- Social Social Share Post -->
<!-- sites: ['weibo', 'qq', 'wechat', 'douban', 'qzone', 'linkedin', 'facebook', 'twitter', 'google'] -->
<!-- Docs:https://github.com/overtrue/share.js -->
<div class="social-share" data-disabled="douban" data-wechat-qrcode-helper="" data-mobile-sites="weibo,wechat,qq,qzone,linkedin" align="center">
</div>

<!-- css & js -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css"> -->
<!-- <script defer="defer" async="true" src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script> -->
<link rel="stylesheet" href="/css/share.min.css">
<script defer="defer" async="true" src="/js/social-share.min.js"></script>

        <!-- Sharing End -->
        <hr>
        

        <!-- comments start -->
        <!-- 默认 comments: true -->
        <!-- 关闭 comments: false -->
        
        <!-- 0. waline comment (by sysin.org)-->

  <!-- waline Srtart -->
  <div style="color:gray" align="center">
    <span>☑️ 评论恢复，欢迎留言❗️</br>敬请注册！点击 “登录” - “<font color="blue">用户注册</font>”（已知不支持 21.cn/189.cn 邮箱）。<font color="red">请勿使用联合登录（已关闭）</font>。</span>
  </div>
  <div id="waline" style="all: unset; /* max-width: 100%; margin: 0 auto; */"></div>
  <style>
    :root {
      /* 字体大小 */
      --waline-font-size: 1.75rem;
      /* 头像大小 */
      --waline-avatar-size: 5.25rem;
      /* 评论状态按钮高亮色 */
      --waline-disable-bgcolor: #abe2fc;
    }
    .wl-login-nick {
      /* 昵称字体大小 */
      font-size:.05em;
    }
    /* 你需要把 `https://img.t.sinajs.cn` 换成自己的 CDN */
    .wl-content img[src^="https://unpkg.com/@waline/"] {
      width: 1.25em;
      margin: 0.25em;
      vertical-align: middle;
    }
  </style>
  <script type="text/javascript">
      Waline.init({
        el: '#waline',
        serverURL: 'https://discuss.sysin.org',
        login: 'force',
        wordLimit: [3, 300],
        pageSize: 10,
        imageUploader: false,
        search: false,
        reaction: false,
        copyright: false,
        // pageview: true,
        // path: '/blog/debian-11-install/',
        emoji: false,
        locale: {
          admin: '作者',
          placeholder: '欢迎留言！请使用邮箱注册，注册仅需提供有效邮件地址，无需其他个人信息，谢谢。',
          level0: '777',
          level1: '755',
          level2: '644',
          level3: '600',
          level4: '400',
          level5: '000',
        },
      });
  </script>
  <!-- <div style="color:gray" align="right">
    Pageviews: <span class="waline-pageview-count" /"></span>
  </div> -->
  <!-- waline End -->
  

    <!-- 0. valine comment (by sysin.org)-->
    

        <!-- 1. gitalk comment -->
        

                  <!-- 2. gitment comment -->
                  

                      <!-- 3. disqus comment -->
                      
        <hr>
        
        <!-- comments end -->

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

  <!-- Don not display number -->
  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
  <!-- Don not display number -->
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">目录</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-Debian-%E7%89%88%E6%9C%AC%E5%8E%86%E5%8F%B2"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">1. Debian 版本历史</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-Debian-11-%E7%9A%84%E6%96%B0%E5%8F%98%E5%8C%96"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">2. Debian 11 的新变化</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-1-%E6%94%AF%E6%8C%81%E7%9A%84%E6%9E%B6%E6%9E%84"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text">2.1. 支持的架构</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-2-%E8%BF%99%E6%AC%A1%E5%8F%91%E5%B8%83%E4%B8%AD%E6%9C%89%E4%BB%80%E4%B9%88%E6%96%B0%E5%8F%98%E5%8C%96%EF%BC%9F"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text">2.2. 这次发布中有什么新变化？</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-%E5%AE%89%E8%A3%85%E6%91%98%E8%A6%81"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">3. 安装摘要</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#4-%E9%BB%98%E8%AE%A4%E6%B2%A1%E6%9C%89%E5%AE%89%E8%A3%85-sudo"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">4. 默认没有安装 sudo</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#5-%E8%BD%AF%E4%BB%B6%E5%8C%85%E7%AE%A1%E7%90%86%E5%85%A5%E9%97%A8"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">5. 软件包管理入门</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#6-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%AE%A1%E7%90%86%E5%91%98%E8%B4%A6%E5%8F%B7"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">6. 创建一个管理员账号</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#7-%E9%85%8D%E7%BD%AE-vi"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">7. 配置 vi</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#8-%E5%BC%80%E5%90%AF-root-%E8%B4%A6%E5%8F%B7%E7%99%BB%E5%BD%95%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">8. 开启 root 账号登录的方法</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#9-%E6%A0%BC%E5%BC%8F%E5%8C%96%E7%BD%91%E5%8D%A1%E5%91%BD%E5%90%8D"><span class="toc-nav-number">9.</span> <span class="toc-nav-text">9. 格式化网卡命名</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#10-%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">10. 网络配置</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#11-%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="toc-nav-number">11.</span> <span class="toc-nav-text">11. 修改主机名</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#12-%E8%AE%BE%E7%BD%AE%E6%97%B6%E5%8C%BA"><span class="toc-nav-number">12.</span> <span class="toc-nav-text">12. 设置时区</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#13-%E4%BF%AE%E6%94%B9%E9%95%9C%E5%83%8F%E6%BA%90"><span class="toc-nav-number">13.</span> <span class="toc-nav-text">13. 修改镜像源</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#14-%E5%AE%89%E8%A3%85-SNMP-2"><span class="toc-nav-number">14.</span> <span class="toc-nav-text">14. 安装 SNMP</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#15-%E9%85%8D%E7%BD%AE-NTP%EF%BC%88%E6%AD%A3%E7%A1%AE%E6%96%B9%E6%B3%95%E6%9B%B4%E6%96%B0%EF%BC%89"><span class="toc-nav-number">15.</span> <span class="toc-nav-text">15. 配置 NTP（正确方法更新）</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#16-%E8%99%9A%E6%9C%BA%E5%AE%89%E8%A3%85-VMware-Tools"><span class="toc-nav-number">16.</span> <span class="toc-nav-text">16. 虚机安装 VMware Tools</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#17-%E5%AE%89%E8%A3%85%E5%BF%85%E5%A4%87%E5%B7%A5%E5%85%B7"><span class="toc-nav-number">17.</span> <span class="toc-nav-text">17. 安装必备工具</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#18-Shell-%E9%85%8D%E7%BD%AE"><span class="toc-nav-number">18.</span> <span class="toc-nav-text">18. Shell 配置</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E5%91%BD%E4%BB%A4%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E5%BF%BD%E7%95%A5%E5%A4%A7%E5%B0%8F%E5%86%99"><span class="toc-nav-number">18.1.</span> <span class="toc-nav-text">命令自动补全忽略大小写</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E4%BF%AE%E6%94%B9-vmrc%EF%BC%88vim-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%89"><span class="toc-nav-number">18.2.</span> <span class="toc-nav-text">修改 vmrc（vim 配置文件）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ll-%E5%B8%B8%E8%A7%84%E7%89%88"><span class="toc-nav-number">18.3.</span> <span class="toc-nav-text">ll 常规版</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E9%AB%98%E7%BA%A7%E7%89%88-ls%EF%BC%9A%E4%BB%A5%E6%95%B0%E5%AD%97%E6%98%BE%E7%A4%BA%E6%9D%83%E9%99%90"><span class="toc-nav-number">18.4.</span> <span class="toc-nav-text">高级版 ls：以数字显示权限</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#Zsh"><span class="toc-nav-number">18.5.</span> <span class="toc-nav-text">Zsh</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#19-%E6%B8%85%E7%90%86%E5%B9%B6%E5%88%B6%E4%BD%9C%E9%95%9C%E5%83%8F%E6%A8%A1%E6%9D%BF"><span class="toc-nav-number">19.</span> <span class="toc-nav-text">19. 清理并制作镜像模板</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#20-Gnome-%E6%A1%8C%E9%9D%A2%E7%8E%AF%E5%A2%83"><span class="toc-nav-number">20.</span> <span class="toc-nav-text">20. Gnome 桌面环境</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#21-%E5%85%B3%E4%BA%8E%E9%98%B2%E7%81%AB%E5%A2%99%E6%88%96%E8%80%85%E5%8C%85%E8%BF%87%E6%BB%A4"><span class="toc-nav-number">21.</span> <span class="toc-nav-text">21. 关于防火墙或者包过滤</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Post Domain Container -->
      <div class="col-lg-10 col-lg-offset-0 col-md-10 col-md-offset-1 sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">特色标签</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#Linux" title="Linux">Linux</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>网站链接</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://curl.qcloud.com/IQz7k8Kc" target="_blank">腾讯云限时秒杀</a>
          </li>
          
          <li>
            <a href="https://www.aliyun.com/minisite/goods?userCode=ne0pli3k" target="_blank">阿里云优惠活动</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("/js/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-11 col-lg-offset-0 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          
            <li>
              <a href="/feed.xml">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
          

          

          

          

          

          

          

          
            <li>
              <a target="_blank" href="https://www.cnblogs.com/sysin">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse">博</i>
                </span>
              </a>
            </li>
          

          
            <li>
              <a target="_blank" href="https://www.zhihu.com/people/sysinside">
                <span class="fa-stack fa-lg">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-1x fa-inverse">知</i>
                </span>
              </a>
            </li>
          

          

        </ul>
        <p class="copyright text-muted">
          Copyright &copy; sysin 2024
          <br>
          Build with <a href="https://hexo.io/" target=_blank>Hexo</a>
          <span style="display: inline-block; margin: 0 5px;">
              <i class="fa fa-heart"></i>
          </span>
          Powered by <a href="https://github.com/" target=_blank><img border="0" src="/img/github.png"></a>
          <br>
          
      </p>
      </div>
    </div>
  </div>
</footer>

<a id="rocket" href="#top" class=""></a>


  <!-- jQuery -->
  <script type="text/javascript" src="/js/jquery.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- Custom Theme JavaScript -->
  <script type="text/javascript" src="/js/hux-blog.min.js"></script>
  <!-- catalog -->
  <script async="true" type="text/javascript" src="/js/catalog.js"></script>
  <!-- totop(rocket) -->
  <script async="true" type="text/javascript" src="/js/totop.js"></script>

  

  
    <!-- Scroll start -->
    <script async="async" type="text/javascript" src="/js/scroll.js"></script>
    <!-- Scroll end -->
  

  

  

  
    <!-- ribbon -->
    <script type="text/javascript" src="/js/ribbonDynamic.js"></script>
  

  







<script>
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function (e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  }

  // fastClick.js
  //GC change fastclick.min.js to local and rename to fc.min.js, because AdBlock Plus
  //https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js
  //https://cdn.staticfile.org/fastclick/1.0.6/fastclick.min.js
  async ("/js/fc.min.js", function () {
    var $nav = document.querySelector("nav");
    if ($nav)
      FastClick.attach($nav);
    }
  )
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://sysin.org/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="搜索..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.fle'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
